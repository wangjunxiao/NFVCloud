\begin{quote}
Map over promises concurrently \end{quote}


Useful when you need to run promise-\/returning \& async functions multiple times with different inputs concurrently.

\subsection*{Install}


\begin{DoxyCode}
$ npm install --save p-map
\end{DoxyCode}


\subsection*{Usage}


\begin{DoxyCode}
const pMap = require('p-map');
const got = require('got');

const sites = [
    getWebsiteFromUsername('sindresorhus'), //=> Promise
    'ava.li',
    'todomvc.com',
    'github.com'
];

const mapper = el => got.head(el).then(res => res.requestUrl);

pMap(sites, mapper, \{concurrency: 2\}).then(result => \{
    console.log(result);
    //=> ['http://sindresorhus.com/', 'http://ava.li/', 'http://todomvc.com/', 'http://github.com/']
\});
\end{DoxyCode}


\subsection*{A\+PI}

\subsubsection*{p\+Map(input, mapper, \mbox{[}options\mbox{]})}

Returns a {\ttfamily Promise} that is fulfilled when all promises in {\ttfamily input} and ones returned from {\ttfamily mapper} are fulfilled, or rejects if any of the promises reject. The fulfilled value is an {\ttfamily Array} of the fulfilled values returned from {\ttfamily mapper} in {\ttfamily input} order.

\paragraph*{input}

Type\+: {\ttfamily Iterable$<$Promise$\vert$any$>$}

Iterated over concurrently in the {\ttfamily mapper} function.

\paragraph*{mapper(element, index)}

Type\+: {\ttfamily Function}

Expected to return a {\ttfamily Promise} or value.

\paragraph*{options}

Type\+: {\ttfamily Object}

\subparagraph*{concurrency}

Type\+: {\ttfamily number}~\newline
 Default\+: {\ttfamily Infinity}~\newline
 Minimum\+: {\ttfamily 1}

Number of concurrently pending promises returned by {\ttfamily mapper}.

\subsection*{Related}


\begin{DoxyItemize}
\item \href{https://github.com/sindresorhus/p-all}{\tt p-\/all} -\/ Run promise-\/returning \& async functions concurrently with optional limited concurrency
\item \href{https://github.com/sindresorhus/p-filter}{\tt p-\/filter} -\/ Filter promises concurrently
\item \href{https://github.com/sindresorhus/p-times}{\tt p-\/times} -\/ Run promise-\/returning \& async functions a specific number of times concurrently
\item \href{https://github.com/sindresorhus/p-props}{\tt p-\/props} -\/ Like {\ttfamily Promise.\+all()} but for {\ttfamily Map} and {\ttfamily Object}
\item \href{https://github.com/sindresorhus/p-map-series}{\tt p-\/map-\/series} -\/ Map over promises serially
\item \href{https://github.com/sindresorhus/p-queue}{\tt p-\/queue} -\/ Promise queue with concurrency control
\item \href{https://github.com/sindresorhus/promise-fun}{\tt More…}
\end{DoxyItemize}

\subsection*{License}

M\+IT © \href{https://sindresorhus.com}{\tt Sindre Sorhus} 