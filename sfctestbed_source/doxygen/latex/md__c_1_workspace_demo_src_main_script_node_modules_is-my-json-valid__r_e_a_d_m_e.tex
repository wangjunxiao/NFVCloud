A \href{http://json-schema.org/}{\tt J\+S\+O\+N\+Schema} validator that uses code generation to be extremely fast


\begin{DoxyCode}
npm install is-my-json-valid
\end{DoxyCode}


It passes the entire J\+S\+O\+N\+Schema v4 test suite except for {\ttfamily remote\+Refs} and {\ttfamily max\+Length}/{\ttfamily min\+Length} when using unicode surrogate pairs.

\href{http://travis-ci.org/mafintosh/is-my-json-valid}{\tt }

\subsection*{Usage}

Simply pass a schema to compile it


\begin{DoxyCode}
var validator = require('is-my-json-valid')

var validate = validator(\{
  required: true,
  type: 'object',
  properties: \{
    hello: \{
      required: true,
      type: 'string'
    \}
  \}
\})

console.log('should be valid', validate(\{hello: 'world'\}))
console.log('should not be valid', validate(\{\}))

// get the last list of errors by checking validate.errors
// the following will print [\{field: 'data.hello', message: 'is required'\}]
console.log(validate.errors)
\end{DoxyCode}


You can also pass the schema as a string


\begin{DoxyCode}
var validate = validator('\{"type": ... \}')
\end{DoxyCode}


Optionally you can use the require submodule to load a schema from {\ttfamily \+\_\+\+\_\+dirname}


\begin{DoxyCode}
var validator = require('is-my-json-valid/require')
var validate = validator('my-schema.json')
\end{DoxyCode}


\subsection*{Custom formats}

is-\/my-\/json-\/valid supports the formats specified in J\+S\+ON schema v4 (such as date-\/time). If you want to add your own custom formats pass them as the formats options to the validator


\begin{DoxyCode}
var validate = validator(\{
  type: 'string',
  required: true,
  format: 'only-a'
\}, \{
  formats: \{
    'only-a': /^a+$/
  \}
\})

console.log(validate('aa')) // true
console.log(validate('ab')) // false
\end{DoxyCode}


\subsection*{External schemas}

You can pass in external schemas that you reference using the {\ttfamily \$ref} attribute as the {\ttfamily schemas} option


\begin{DoxyCode}
var ext = \{
  required: true,
  type: 'string'
\}

var schema = \{
  $ref: '#ext' // references another schema called ext
\}

// pass the external schemas as an option
var validate = validator(schema, \{schemas: \{ext: ext\}\})

validate('hello') // returns true
validate(42) // return false
\end{DoxyCode}


\subsection*{Filtering away additional properties}

is-\/my-\/json-\/valid supports filtering away properties not in the schema


\begin{DoxyCode}
var filter = validator.filter(\{
  required: true,
  type: 'object',
  properties: \{
    hello: \{type: 'string', required: true\}
  \},
  additionalProperties: false
\})

var doc = \{hello: 'world', notInSchema: true\}
console.log(filter(doc)) // \{hello: 'world'\}
\end{DoxyCode}


\subsection*{Verbose mode outputs the value on errors}

is-\/my-\/json-\/valid outputs the value causing an error when verbose is set to true


\begin{DoxyCode}
var validate = validator(\{
  required: true,
  type: 'object',
  properties: \{
    hello: \{
      required: true,
      type: 'string'
    \}
  \}
\}, \{
  verbose: true
\})

validate(\{hello: 100\});
console.log(validate.errors) // \{field: 'data.hello', message: 'is the wrong type', value: 100, type:
       'string'\}
\end{DoxyCode}


\subsection*{Greedy mode tries to validate as much as possible}

By default is-\/my-\/json-\/valid bails on first validation error but when greedy is set to true it tries to validate as much as possible\+:


\begin{DoxyCode}
var validate = validator(\{
  type: 'object',
  properties: \{
    x: \{
      type: 'number'
    \}
  \},
  required: ['x', 'y']
\}, \{
  greedy: true
\});

validate(\{x: 'string'\});
console.log(validate.errors) // [\{field: 'data.y', message: 'is required'\},
                             //  \{field: 'data.x', message: 'is the wrong type'\}]
\end{DoxyCode}


\subsection*{Error messages}

Here is a list of possible {\ttfamily message} values for errors\+:


\begin{DoxyItemize}
\item {\ttfamily is required}
\item {\ttfamily is the wrong type}
\item {\ttfamily has additional items}
\item {\ttfamily must be F\+O\+R\+M\+AT format} (F\+O\+R\+M\+AT is the {\ttfamily format} property from the schema)
\item {\ttfamily must be unique}
\item {\ttfamily must be an enum value}
\item {\ttfamily dependencies not set}
\item {\ttfamily has additional properties}
\item {\ttfamily referenced schema does not match}
\item {\ttfamily negative schema matches}
\item {\ttfamily pattern mismatch}
\item {\ttfamily no schemas match}
\item {\ttfamily no (or more than one) schemas match}
\item {\ttfamily has a remainder}
\item {\ttfamily has more properties than allowed}
\item {\ttfamily has less properties than allowed}
\item {\ttfamily has more items than allowed}
\item {\ttfamily has less items than allowed}
\item {\ttfamily has longer length than allowed}
\item {\ttfamily has less length than allowed}
\item {\ttfamily is less than minimum}
\item {\ttfamily is more than maximum}
\end{DoxyItemize}

\subsection*{Performance}

is-\/my-\/json-\/valid uses code generation to turn your J\+S\+ON schema into basic javascript code that is easily optimizeable by v8.

At the time of writing, is-\/my-\/json-\/valid is the {\bfseries fastest validator} when running


\begin{DoxyItemize}
\item \href{https://github.com/Muscula/json-schema-benchmark}{\tt json-\/schema-\/benchmark}
\item \href{http://cosmicrealms.com/blog/2014/08/29/benchmark-of-node-dot-js-json-validation-modules-part-3/}{\tt cosmicreals.\+com benchmark}
\item \href{https://github.com/pandastrike/jsck/issues/72#issuecomment-70992684}{\tt jsck benchmark}
\item \href{https://cdn.rawgit.com/playlyfe/themis/master/benchmark/results.html}{\tt themis benchmark}
\item \href{https://rawgit.com/zaggino/z-schema/master/benchmark/results.html}{\tt z-\/schema benchmark}
\end{DoxyItemize}

If you know any other relevant benchmarks open a PR and I\textquotesingle{}ll add them.

\subsection*{License}

M\+IT 