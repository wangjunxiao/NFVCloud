Generic configuration validation tool that helps you with warnings, errors and deprecation messages as well as showing users examples of correct configuration.


\begin{DoxyCode}
npm install --save jest-validate
\end{DoxyCode}


\subsection*{Usage}


\begin{DoxyCode}
import \{validate\} from 'jest-validate';

validate(
  config: Object,
  options: ValidationOptions,
); // => \{hasDeprecationWarnings: boolean, isValid: boolean\}
\end{DoxyCode}


Where {\ttfamily Validation\+Options} are\+: 
\begin{DoxyCode}
type ValidationOptions = \{
  comment?: string,
  condition?: (option: any, validOption: any) => boolean,
  deprecate?: (
    config: Object,
    option: string,
    deprecatedOptions: Object,
    options: ValidationOptions
  ) => true,
  deprecatedConfig?: \{[key: string]: Function\},
  error?: (
    option: string,
    received: any,
    defaultValue: any,
    options: ValidationOptions,
  ) => void,
  exampleConfig: Object,
  title?: Title,
  unknown?: (
    config: Object,
    exampleConfig: Object,
    option: string,
    options: ValidationOptions
  ) => void,
\}

type Title = \{|
  deprecation?: string,
  error?: string,
  warning?: string,
|\}
\end{DoxyCode}


{\ttfamily example\+Config} is the only option required.

\subsection*{A\+PI}

By default {\ttfamily jest-\/validate} will print generic warning and error messages. You can however customize this behavior by providing {\ttfamily options\+: Validation\+Options} object as a second argument\+:

Almost anything can be overwritten to suite your needs.

\subsubsection*{Options}


\begin{DoxyItemize}
\item {\ttfamily comment} – optional string to be rendered bellow error/warning message.
\item {\ttfamily condition} – an optional function with validation condition.
\item {\ttfamily deprecate}, {\ttfamily error}, {\ttfamily unknown} – optional functions responsible for displaying warning and error messages.
\item {\ttfamily deprecated\+Config} – optional object with deprecated config keys.
\item {\ttfamily example\+Config} – the only {\bfseries required} option with configuration against which you\textquotesingle{}d like to test.
\item {\ttfamily title} – optional object of titles for errors and messages.
\end{DoxyItemize}

You will find examples of {\ttfamily condition}, {\ttfamily deprecate}, {\ttfamily error}, {\ttfamily unknown}, and {\ttfamily deprecated\+Config} inside source of this repository, named respectively.

\subsection*{Examples}

Minimal example\+:


\begin{DoxyCode}
validate(config, \{exampleConfig\});
\end{DoxyCode}


Example with slight modifications\+:


\begin{DoxyCode}
validate(config, \{
  comment: '  Documentation: http://custom-docs.com',
  exampleConfig,
  deprecatedConfig,
  title: \{
    deprecation: 'Custom Deprecation',
    // leaving 'error' and 'warning' as default
  \}
\});
\end{DoxyCode}


This will output\+:

\paragraph*{Warning\+:}


\begin{DoxyCode}
● Validation Warning:

  Unknown option transformx with value "<rootDir>/node\_modules/babel-jest" was found.
  This is either a typing error or a user mistake. Fixing it will remove this message.

  Documentation: http://custom-docs.com
\end{DoxyCode}


\paragraph*{Error\+:}


\begin{DoxyCode}
● Validation Error:

  Option transform must be of type:
    object
  but instead received:
    string

  Example:
  \{
    "transform": \{"^.+\(\backslash\)\(\backslash\).js$": "<rootDir>/preprocessor.js"\}
  \}

  Documentation: http://custom-docs.com
\end{DoxyCode}


\paragraph*{Deprecation}

Based on {\ttfamily deprecated\+Config} object with proper deprecation messages. Note custom title\+:


\begin{DoxyCode}
Custom Deprecation:

  Option scriptPreprocessor was replaced by transform, which support multiple preprocessors.

  Jest now treats your current configuration as:
  \{
    "transform": \{".*": "xxx"\}
  \}

  Please update your configuration.

  Documentation: http://custom-docs.com
\end{DoxyCode}
 