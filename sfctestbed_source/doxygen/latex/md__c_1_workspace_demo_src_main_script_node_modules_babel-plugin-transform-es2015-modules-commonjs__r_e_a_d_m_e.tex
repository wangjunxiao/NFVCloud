\begin{quote}
This plugin transforms E\+S2015 modules to \href{http://wiki.commonjs.org/wiki/Modules/1.1}{\tt Common\+JS}. \end{quote}


\subsection*{Example}

{\bfseries In}


\begin{DoxyCode}
export default 42;
\end{DoxyCode}


{\bfseries Out}


\begin{DoxyCode}
Object.defineProperty(exports, "\_\_esModule", \{
  value: true
\});

exports.default = 42;
\end{DoxyCode}


\subsection*{Installation}


\begin{DoxyCode}
npm install --save-dev babel-plugin-transform-es2015-modules-commonjs
\end{DoxyCode}


\subsection*{Usage}

\subsubsection*{Via {\ttfamily .babelrc} (Recommended)}

$\ast$$\ast$.babelrc$\ast$$\ast$


\begin{DoxyCode}
// without options
\{
  "plugins": ["transform-es2015-modules-commonjs"]
\}

// with options
\{
  "plugins": [
    ["transform-es2015-modules-commonjs", \{
      "allowTopLevelThis": true
    \}]
  ]
\}
\end{DoxyCode}


\subsubsection*{Via C\+LI}


\begin{DoxyCode}
babel --plugins transform-es2015-modules-commonjs script.js
\end{DoxyCode}


\subsubsection*{Via Node A\+PI}


\begin{DoxyCode}
require("babel-core").transform("code", \{
  plugins: ["transform-es2015-modules-commonjs"]
\});
\end{DoxyCode}


\subsection*{Options}

\subsubsection*{{\ttfamily loose}}

{\ttfamily boolean}, defaults to {\ttfamily false}.

As per the spec, {\ttfamily import} and {\ttfamily export} are only allowed to be used at the top level. When in loose mode these are allowed to be used anywhere.

And by default, when using exports with babel a non-\/enumerable {\ttfamily \+\_\+\+\_\+es\+Module} property is exported.


\begin{DoxyCode}
var foo = exports.foo = 5;

Object.defineProperty(exports, "\_\_esModule", \{
  value: true
\});
\end{DoxyCode}


In environments that don\textquotesingle{}t support this you can enable loose mode on {\ttfamily babel-\/plugin-\/transform-\/es20150-\/modules-\/commonjs} and instead of using {\ttfamily Object.\+define\+Property} an assignment will be used instead.


\begin{DoxyCode}
var foo = exports.foo = 5;
exports.\_\_esModule = true;
\end{DoxyCode}


\subsubsection*{{\ttfamily strict}}

{\ttfamily boolean}, defaults to {\ttfamily false}

By default, when using exports with babel a non-\/enumerable {\ttfamily \+\_\+\+\_\+es\+Module} property is exported. In some cases this property is used to determine if the import {\itshape is} the default export or if it {\itshape contains} the default export.


\begin{DoxyCode}
var foo = exports.foo = 5;

Object.defineProperty(exports, "\_\_esModule", \{
  value: true
\});
\end{DoxyCode}


In order to prevent the {\ttfamily \+\_\+\+\_\+es\+Module} property from being exported, you can set the {\ttfamily strict} option to {\ttfamily true}.

\subsubsection*{{\ttfamily no\+Interop}}

{\ttfamily boolean}, defaults to {\ttfamily false}

By default, when using exports with babel a non-\/enumerable {\ttfamily \+\_\+\+\_\+es\+Module} property is exported. This property is then used to determine if the import {\itshape is} the default export or if it {\itshape contains} the default export.


\begin{DoxyCode}
"use strict";

var \_foo = require("foo");

var \_foo2 = \_interopRequireDefault(\_foo);

function \_interopRequireDefault(obj) \{
  return obj && obj.\_\_esModule ? obj : \{ default: obj \};
\}
\end{DoxyCode}


In cases where the auto-\/unwrapping of {\ttfamily default} is not needed, you can set the {\ttfamily no\+Interop} option to {\ttfamily true} to avoid the usage of the {\ttfamily interop\+Require\+Default} helper (shown in inline form above). 