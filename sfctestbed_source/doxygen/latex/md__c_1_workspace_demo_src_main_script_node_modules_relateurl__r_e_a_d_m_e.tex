\begin{quote}
Minify U\+R\+Ls by converting them from absolute to relative. \end{quote}


If you were to use this library on a website like {\ttfamily \href{http://example.com/dir1/dir1-1/}{\tt http\+://example.\+com/dir1/dir1-\/1/}}, you would get results such as\+:

\tabulinesep=1mm
\begin{longtabu} spread 0pt [c]{*{2}{|X[-1]}|}
\hline
\rowcolor{\tableheadbgcolor}\textbf{ Before  }&\textbf{ After   }\\\cline{1-2}
\endfirsthead
\hline
\endfoot
\hline
\rowcolor{\tableheadbgcolor}\textbf{ Before  }&\textbf{ After   }\\\cline{1-2}
\endhead
{\ttfamily \href{http://example.com/dir1/dir1-2/index.html}{\tt http\+://example.\+com/dir1/dir1-\/2/index.\+html}}  &{\ttfamily ../dir1-\/2/}   \\\cline{1-2}
{\ttfamily \href{http://example.com/dir2/dir2-1/}{\tt http\+://example.\+com/dir2/dir2-\/1/}}  &{\ttfamily /dir2/dir2-\/1/}   \\\cline{1-2}
{\ttfamily \href{http://example.com/dir1/dir1-1/}{\tt http\+://example.\+com/dir1/dir1-\/1/}}  &\\\cline{1-2}
{\ttfamily \href{https://example.com/dir1/dir1-1/}{\tt https\+://example.\+com/dir1/dir1-\/1/}}  &{\ttfamily \href{https://example.com/dir1/dir1-1/}{\tt https\+://example.\+com/dir1/dir1-\/1/}}   \\\cline{1-2}
{\ttfamily \href{http://google.com:80/dir/}{\tt http\+://google.\+com\+:80/dir/}}  &{\ttfamily //google.com/dir/}   \\\cline{1-2}
{\ttfamily ../../../../../../../../\#anchor}  &{\ttfamily /\#anchor}   \\\cline{1-2}
\end{longtabu}


{\bfseries All string parsing.} {\itshape No} directory browsing. It is thoroughly tested, very fast and lightweight with zero external dependencies.

\subsection*{Getting Started}

This utility requires \href{http://nodejs.org/}{\tt Node.\+js} {\ttfamily $>$= 0.\+10}. To install, type this at the command line\+: 
\begin{DoxyCode}
npm install relateurl --save-dev
\end{DoxyCode}


\subsubsection*{Options}

\paragraph*{options.\+default\+Ports}

Type\+: {\ttfamily Object} ~\newline
Default value\+: {\ttfamily \{\href{ftp:21,}{\tt ftp\+:21,} \href{http:80,}{\tt http\+:80,} \href{https:443}{\tt https\+:443}\}} ~\newline
 Extend the list with any ports you need. Any U\+R\+Ls containing these default ports will have them removed. Example\+: {\ttfamily \href{http://example.com:80/}{\tt http\+://example.\+com\+:80/}} will become {\ttfamily \href{http://example.com/}{\tt http\+://example.\+com/}}.

\paragraph*{options.\+directory\+Indexes}

Type\+: {\ttfamily Array} ~\newline
Default value\+: {\ttfamily \mbox{[}\char`\"{}index.\+html\char`\"{}\mbox{]}} ~\newline
 Extend the list with any resources you need. Works with \href{#options.removeDirectoryIndexes}{\tt {\ttfamily options.\+remove\+Directory\+Indexes}}.

\paragraph*{options.\+ignore\+\_\+www}

Type\+: {\ttfamily Boolean} ~\newline
Default value\+: {\ttfamily false} ~\newline
 This will, for example, consider any domains containing {\ttfamily \href{http://www.example.com/}{\tt http\+://www.\+example.\+com/}} to be related to any that contain {\ttfamily \href{http://example.com/}{\tt http\+://example.\+com/}}.

\paragraph*{options.\+output}

Type\+: constant or {\ttfamily String} ~\newline
Choices\+: {\ttfamily Relate\+Url.\+A\+B\+S\+O\+L\+U\+TE},{\ttfamily Relate\+Url.\+P\+A\+T\+H\+\_\+\+R\+E\+L\+A\+T\+I\+VE},{\ttfamily Relate\+Url.\+R\+O\+O\+T\+\_\+\+R\+E\+L\+A\+T\+I\+VE},{\ttfamily Relate\+Url.\+S\+H\+O\+R\+T\+E\+ST} ~\newline
Choices\+: {\ttfamily \char`\"{}absolute\char`\"{}},{\ttfamily \char`\"{}path\+Relative\char`\"{}},{\ttfamily \char`\"{}root\+Relative\char`\"{}},{\ttfamily \char`\"{}shortest\char`\"{}} ~\newline
Default value\+: {\ttfamily Relate\+Url.\+S\+H\+O\+R\+T\+E\+ST} ~\newline
 {\ttfamily Relate\+Url.\+A\+B\+S\+O\+L\+U\+TE} will produce an absolute \mbox{\hyperlink{namespace_u_r_l}{U\+RL}}. Overrides \href{#options.schemeRelative}{\tt {\ttfamily options.\+scheme\+Relative}} with a value of {\ttfamily false}. ~\newline
{\ttfamily Relate\+Url.\+P\+A\+T\+H\+\_\+\+R\+E\+L\+A\+T\+I\+VE} will produce something like {\ttfamily ../child-\/of-\/parent/etc/}. ~\newline
{\ttfamily Relate\+Url.\+R\+O\+O\+T\+\_\+\+R\+E\+L\+A\+T\+I\+VE} will produce something like {\ttfamily /child-\/of-\/root/etc/}. ~\newline
{\ttfamily Relate\+Url.\+S\+H\+O\+R\+T\+E\+ST} will choose whichever is shortest between root-\/ and path-\/relative. ~\newline
 \paragraph*{options.\+rejected\+Schemes}

Type\+: {\ttfamily Array} ~\newline
Default value\+: {\ttfamily \mbox{[}\char`\"{}data\char`\"{},\char`\"{}javascript\char`\"{},\char`\"{}mailto\char`\"{}\mbox{]}} ~\newline
 Extend the list with any additional schemes. Example\+: {\ttfamily javascript\+:something} will not be modified.

\paragraph*{options.\+remove\+Auth}

Type\+: {\ttfamily Boolean} ~\newline
Default value\+: {\ttfamily false} ~\newline
 Remove user authentication information from the output \mbox{\hyperlink{namespace_u_r_l}{U\+RL}}.

\paragraph*{options.\+remove\+Directory\+Indexes}

Type\+: {\ttfamily Boolean} ~\newline
Default value\+: {\ttfamily true} ~\newline
 Remove any resources that match any found in \href{#options.directoryIndexes}{\tt {\ttfamily options.\+directory\+Indexes}}.

\paragraph*{options.\+remove\+Empty\+Queries}

Type\+: {\ttfamily Boolean} ~\newline
Default value\+: {\ttfamily false} ~\newline
 Remove empty query variables. Example\+: {\ttfamily \href{http://domain.com/?var1&var2=&var3=asdf}{\tt http\+://domain.\+com/?var1\&var2=\&var3=asdf}} will become {\ttfamily \href{http://domain.com/?var3=adsf}{\tt http\+://domain.\+com/?var3=adsf}}. This does not apply to unrelated U\+R\+Ls (with other protocols, auths, hosts and/or ports).

\paragraph*{options.\+remove\+Root\+Trailing\+Slash}

Type\+: {\ttfamily Boolean} ~\newline
Default value\+: {\ttfamily true} ~\newline
 Remove trailing slashes from root paths. Example\+: {\ttfamily \href{http://domain.com/?var}{\tt http\+://domain.\+com/?var}} will become {\ttfamily \href{http://domain.com?var}{\tt http\+://domain.\+com?var}} while {\ttfamily \href{http://domain.com/dir/?var}{\tt http\+://domain.\+com/dir/?var}} will not be modified.

\paragraph*{options.\+scheme\+Relative}

Type\+: {\ttfamily Boolean} ~\newline
Default value\+: {\ttfamily true} ~\newline
 Output U\+R\+Ls relative to the scheme. Example\+: {\ttfamily \href{http://example.com/}{\tt http\+://example.\+com/}} will become {\ttfamily //example.com/}.

\paragraph*{options.\+site}

Type\+: {\ttfamily String} ~\newline
Default value\+: {\ttfamily undefined} ~\newline
 An options-\/based version of the \href{#examples}{\tt {\ttfamily from}} argument. If both are specified, {\ttfamily from} takes priority.

\paragraph*{options.\+slashes\+Denote\+Host}

Type\+: {\ttfamily Boolean} ~\newline
Default value\+: {\ttfamily true} ~\newline
 Passed to Node\textquotesingle{}s \href{http://nodejs.org/api/url.html#url_url_parse_urlstr_parsequerystring_slashesdenotehost}{\tt {\ttfamily url.\+parse}}.

\subsubsection*{Examples}

This library can be used as a \href{#single-instance}{\tt function for single-\/use} or as a \href{#reusable-instances}{\tt class for multiple conversions}.

Upon successful conversion, a {\ttfamily String} will be returned. If an issue is encountered while parsing {\ttfamily from}, an error will be thrown.

\#\#\#\# Single Instance 
\begin{DoxyCode}
var RelateUrl = require("relateurl");

var result = RelateUrl.relate(from, to, options);
\end{DoxyCode}


\#\#\#\# Reusable Instances 
\begin{DoxyCode}
var RelateUrl = require("relateurl");

var instance = new RelateUrl(from, options);

var result1 = instance.relate(to1);
var result2 = instance.relate(to2, customOptions);
var result3 = instance.relate(to3);
\end{DoxyCode}


\subsection*{F\+AQ}


\begin{DoxyEnumerate}
\item {\bfseries Why bother writing/using this?} ~\newline
To aid in further minifying H\+T\+ML, mainly for the purpose of faster page loads and S\+EO. It\textquotesingle{}s been integrated into \href{https://github.com/kangax/html-minifier}{\tt H\+T\+M\+L\+Minifier}.
\item {\bfseries Why not just use Node\textquotesingle{}s {\ttfamily url.\+parse}, {\ttfamily url.\+resolve} and {\ttfamily path.\+relative}?} ~\newline
{\ttfamily url.\+parse} {\itshape is} used, but {\ttfamily url.\+resolve} and {\ttfamily path.\+relative} are both slower and less powerful than this library.
\end{DoxyEnumerate}

\subsection*{Release \mbox{\hyperlink{interface_history}{History}}}


\begin{DoxyItemize}
\item 0.\+2.\+7 Node v6 support
\item 0.\+2.\+6 minor enhancements
\item 0.\+2.\+5 added {\ttfamily options.\+remove\+Root\+Trailing\+Slash}
\item 0.\+2.\+4 added {\ttfamily options.\+site}
\item 0.\+2.\+3 added browserify npm-\/script
\item 0.\+2.\+2 removed task runner
\item 0.\+2.\+1 shorten resource-\/ and query-\/relative U\+R\+Ls, test variations list with other site U\+R\+Ls
\item 0.\+2.\+0 code cleanup, {\ttfamily options.\+remove\+Empty\+Queries=true} only applied to unrelated U\+R\+Ls
\item 0.\+1.\+0 initial release
\end{DoxyItemize}

\subsection*{Roadmap}


\begin{DoxyItemize}
\item 0.\+2.\+8 check if queries are the same, regardless of param order
\item 0.\+2.\+8 possible \href{http://www.iana.org/assignments/uri-schemes/uri-schemes.xhtml}{\tt scheme exclusions} such as {\ttfamily tel\+:}
\item 0.\+2.\+8 decipher and return invalid input (special cases) to complete test suite
\item 0.\+3.\+0 test {\ttfamily options.\+slashes\+Denote\+Host=false}, add something like {\ttfamily options.\+external\+Directory\+Indexes=\mbox{[}\mbox{]}} for external sites 
\end{DoxyItemize}