\href{https://npmjs.org/package/vary}{\tt } \href{https://npmjs.org/package/vary}{\tt } \href{https://nodejs.org/en/download}{\tt } \href{https://travis-ci.org/jshttp/vary}{\tt } \href{https://coveralls.io/r/jshttp/vary}{\tt }

Manipulate the H\+T\+TP Vary header

\subsection*{Installation}

This is a \href{https://nodejs.org/en/}{\tt Node.\+js} module available through the \href{https://www.npmjs.com/}{\tt npm registry}. Installation is done using the \href{https://docs.npmjs.com/getting-started/installing-npm-packages-locally}{\tt {\ttfamily npm install} command}\+:


\begin{DoxyCode}
$ npm install vary
\end{DoxyCode}


\subsection*{A\+PI}


\begin{DoxyCode}
var vary = require('vary')
\end{DoxyCode}


\subsubsection*{vary(res, field)}

Adds the given header {\ttfamily field} to the {\ttfamily Vary} response header of {\ttfamily res}. This can be a string of a single field, a string of a valid {\ttfamily Vary} header, or an array of multiple fields.

This will append the header if not already listed, otherwise leaves it listed in the current location.


\begin{DoxyCode}
// Append "Origin" to the Vary header of the response
vary(res, 'Origin')
\end{DoxyCode}


\subsubsection*{vary.\+append(header, field)}

Adds the given header {\ttfamily field} to the {\ttfamily Vary} response header string {\ttfamily header}. This can be a string of a single field, a string of a valid {\ttfamily Vary} header, or an array of multiple fields.

This will append the header if not already listed, otherwise leaves it listed in the current location. The new header string is returned.


\begin{DoxyCode}
// Get header string appending "Origin" to "Accept, User-Agent"
vary.append('Accept, User-Agent', 'Origin')
\end{DoxyCode}


\subsection*{Examples}

\subsubsection*{Updating the Vary header when content is based on it}


\begin{DoxyCode}
var http = require('http')
var vary = require('vary')

http.createServer(function onRequest (req, res) \{
  // about to user-agent sniff
  vary(res, 'User-Agent')

  var ua = req.headers['user-agent'] || ''
  var isMobile = /mobi|android|touch|mini/i.test(ua)

  // serve site, depending on isMobile
  res.setHeader('Content-Type', 'text/html')
  res.end('You are (probably) ' + (isMobile ? '' : 'not ') + 'a mobile user')
\})
\end{DoxyCode}


\subsection*{Testing}


\begin{DoxyCode}
$ npm test
\end{DoxyCode}


\subsection*{License}

\mbox{[}M\+IT\mbox{]}(L\+I\+C\+E\+N\+SE) 