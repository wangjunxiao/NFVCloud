whatwg-\/url is a full implementation of the W\+H\+A\+T\+WG \href{https://url.spec.whatwg.org/}{\tt U\+RL Standard}. It can be used standalone, but it also exposes a lot of the internal algorithms that are useful for integrating a \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} parser into a project like \href{https://github.com/tmpvar/jsdom}{\tt jsdom}.

\subsection*{Current Status}

whatwg-\/url is currently up to date with the \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} spec up to commit \href{https://github.com/whatwg/url/commit/fe6b251739e225555f04319f19c70c031a5d99eb}{\tt fe6b25}.

\subsection*{A\+PI}

\subsubsection*{The {\ttfamily \mbox{\hyperlink{namespace_u_r_l}{U\+RL}}} Constructor}

The main A\+PI is the \href{https://url.spec.whatwg.org/#url}{\tt {\ttfamily U\+RL}} export, which follows the spec\textquotesingle{}s behavior in all ways (including e.\+g. {\ttfamily U\+S\+V\+String} conversion). Most consumers of this library will want to use this.

\subsubsection*{Low-\/level \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} Standard A\+PI}

The following methods are exported for use by places like jsdom that need to implement things like \href{https://html.spec.whatwg.org/#htmlhyperlinkelementutils}{\tt {\ttfamily H\+T\+M\+L\+Hyperlink\+Element\+Utils}}. They operate on or return an \char`\"{}internal U\+R\+L\char`\"{} or \href{https://url.spec.whatwg.org/#concept-url}{\tt \char`\"{}\+U\+R\+L record\char`\"{}} type.


\begin{DoxyItemize}
\item \href{https://url.spec.whatwg.org/#concept-url-parser}{\tt U\+RL parser}\+: {\ttfamily parse\+U\+RL(input, \{ base\+U\+RL, encoding\+Override \})}
\item \href{https://url.spec.whatwg.org/#concept-basic-url-parser}{\tt Basic U\+RL parser}\+: {\ttfamily basic\+U\+R\+L\+Parse(input, \{ base\+U\+RL, encoding\+Override, url, state\+Override \})}
\item \href{https://url.spec.whatwg.org/#concept-url-serializer}{\tt U\+RL serializer}\+: {\ttfamily serialize\+U\+R\+L(url\+Record, exclude\+Fragment)}
\item \href{https://url.spec.whatwg.org/#concept-host-serializer}{\tt Host serializer}\+: {\ttfamily serialize\+Host(host\+From\+U\+R\+L\+Record)}
\item \href{https://url.spec.whatwg.org/#serialize-an-integer}{\tt Serialize an integer}\+: {\ttfamily serialize\+Integer(number)}
\item \href{https://url.spec.whatwg.org/#concept-url-origin}{\tt Origin} \href{https://html.spec.whatwg.org/multipage/browsers.html#unicode-serialisation-of-an-origin}{\tt Unicode serializer}\+: {\ttfamily serialize\+U\+R\+L\+To\+Unicode\+Origin(url\+Record)}
\item \href{https://url.spec.whatwg.org/#set-the-username}{\tt Set the username}\+: {\ttfamily set\+The\+Username(url\+Record, username\+String)}
\item \href{https://url.spec.whatwg.org/#set-the-password}{\tt Set the password}\+: {\ttfamily set\+The\+Password(url\+Record, password\+String)}
\item \href{https://url.spec.whatwg.org/#cannot-have-a-username-password-port}{\tt Cannot have a username/password/port}\+: {\ttfamily cannot\+Have\+A\+Username\+Password\+Port(url\+Record)}
\end{DoxyItemize}

The {\ttfamily state\+Override} parameter is one of the following strings\+:


\begin{DoxyItemize}
\item \href{https://url.spec.whatwg.org/#scheme-start-state}{\tt {\ttfamily \char`\"{}scheme start\char`\"{}}}
\item \href{https://url.spec.whatwg.org/#scheme-state}{\tt {\ttfamily \char`\"{}scheme\char`\"{}}}
\item \href{https://url.spec.whatwg.org/#no-scheme-state}{\tt {\ttfamily \char`\"{}no scheme\char`\"{}}}
\item \href{https://url.spec.whatwg.org/#special-relative-or-authority-state}{\tt {\ttfamily \char`\"{}special relative or authority\char`\"{}}}
\item \href{https://url.spec.whatwg.org/#path-or-authority-state}{\tt {\ttfamily \char`\"{}path or authority\char`\"{}}}
\item \href{https://url.spec.whatwg.org/#relative-state}{\tt {\ttfamily \char`\"{}relative\char`\"{}}}
\item \href{https://url.spec.whatwg.org/#relative-slash-state}{\tt {\ttfamily \char`\"{}relative slash\char`\"{}}}
\item \href{https://url.spec.whatwg.org/#special-authority-slashes-state}{\tt {\ttfamily \char`\"{}special authority slashes\char`\"{}}}
\item \href{https://url.spec.whatwg.org/#special-authority-ignore-slashes-state}{\tt {\ttfamily \char`\"{}special authority ignore slashes\char`\"{}}}
\item \href{https://url.spec.whatwg.org/#authority-state}{\tt {\ttfamily \char`\"{}authority\char`\"{}}}
\item \href{https://url.spec.whatwg.org/#host-state}{\tt {\ttfamily \char`\"{}host\char`\"{}}}
\item \href{https://url.spec.whatwg.org/#hostname-state}{\tt {\ttfamily \char`\"{}hostname\char`\"{}}}
\item \href{https://url.spec.whatwg.org/#port-state}{\tt {\ttfamily \char`\"{}port\char`\"{}}}
\item \href{https://url.spec.whatwg.org/#file-state}{\tt {\ttfamily \char`\"{}file\char`\"{}}}
\item \href{https://url.spec.whatwg.org/#file-slash-state}{\tt {\ttfamily \char`\"{}file slash\char`\"{}}}
\item \href{https://url.spec.whatwg.org/#file-host-state}{\tt {\ttfamily \char`\"{}file host\char`\"{}}}
\item \href{https://url.spec.whatwg.org/#path-start-state}{\tt {\ttfamily \char`\"{}path start\char`\"{}}}
\item \href{https://url.spec.whatwg.org/#path-state}{\tt {\ttfamily \char`\"{}path\char`\"{}}}
\item \href{https://url.spec.whatwg.org/#cannot-be-a-base-url-path-state}{\tt {\ttfamily \char`\"{}cannot-\/be-\/a-\/base-\/\+U\+R\+L path\char`\"{}}}
\item \href{https://url.spec.whatwg.org/#query-state}{\tt {\ttfamily \char`\"{}query\char`\"{}}}
\item \href{https://url.spec.whatwg.org/#fragment-state}{\tt {\ttfamily \char`\"{}fragment\char`\"{}}}
\end{DoxyItemize}

The \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} record type has the following A\+PI\+:


\begin{DoxyItemize}
\item \href{https://url.spec.whatwg.org/#concept-url-scheme}{\tt {\ttfamily scheme}}
\item \href{https://url.spec.whatwg.org/#concept-url-username}{\tt {\ttfamily username}}
\item \href{https://url.spec.whatwg.org/#concept-url-password}{\tt {\ttfamily password}}
\item \href{https://url.spec.whatwg.org/#concept-url-host}{\tt {\ttfamily host}}
\item \href{https://url.spec.whatwg.org/#concept-url-port}{\tt {\ttfamily port}}
\item \href{https://url.spec.whatwg.org/#concept-url-path}{\tt {\ttfamily path}} (as an array)
\item \href{https://url.spec.whatwg.org/#concept-url-query}{\tt {\ttfamily query}}
\item \href{https://url.spec.whatwg.org/#concept-url-fragment}{\tt {\ttfamily fragment}}
\item \href{https://url.spec.whatwg.org/#url-cannot-be-a-base-url-flag}{\tt {\ttfamily cannot\+Be\+A\+Base\+U\+RL}} (as a boolean)
\end{DoxyItemize}

These properties should be treated with care, as in general changing them will cause the \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} record to be in an inconsistent state until the appropriate invocation of {\ttfamily basic\+U\+R\+L\+Parse} is used to fix it up. You can see examples of this in the \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} Standard, where there are many step sequences like \char`\"{}4. Set context object’s url’s fragment to the empty string. 5. Basic U\+R\+L parse \+\_\+input\+\_\+ with context object’s url as \+\_\+url\+\_\+ and fragment state as \+\_\+state override\+\_\+.\char`\"{} In between those two steps, a \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} record is in an unusable state.

The return value of \char`\"{}failure\char`\"{} in the spec is represented by the string {\ttfamily \char`\"{}failure\char`\"{}}. That is, functions like {\ttfamily parse\+U\+RL} and {\ttfamily basic\+U\+R\+L\+Parse} can return {\itshape either} a \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} record {\itshape or} the string {\ttfamily \char`\"{}failure\char`\"{}}. 