A Java\+Script library for escaping C\+SS strings and identifiers while generating the shortest possible A\+S\+C\+I\+I-\/only output.

This is a Java\+Script library for \href{http://mathiasbynens.be/notes/css-escapes}{\tt escaping text for use in C\+SS strings or identifiers} while generating the shortest possible valid A\+S\+C\+I\+I-\/only output. \href{http://mothereff.in/css-escapes}{\tt Here‚Äôs an online demo.}

Feel free to fork if you see possible improvements!

\subsection*{Installation}

Via \href{http://bower.io/}{\tt Bower}\+:


\begin{DoxyCode}
bower install cssesc
\end{DoxyCode}


Via \href{https://github.com/component/component}{\tt Component}\+:


\begin{DoxyCode}
component install mathiasbynens/cssesc
\end{DoxyCode}


Via \href{http://npmjs.org/}{\tt npm}\+:


\begin{DoxyCode}
npm install cssesc
\end{DoxyCode}


In a browser\+:


\begin{DoxyCode}
<script src="cssesc.js"></script>
\end{DoxyCode}


In \href{http://nodejs.org/}{\tt Node.\+js} and \href{http://ringojs.org/}{\tt Ringo\+JS}\+:


\begin{DoxyCode}
var cssesc = require('cssesc');
\end{DoxyCode}


In \href{http://narwhaljs.org/}{\tt Narwhal}\+:


\begin{DoxyCode}
var cssesc = require('cssesc').cssesc;
\end{DoxyCode}


In \href{http://www.mozilla.org/rhino/}{\tt Rhino}\+:


\begin{DoxyCode}
load('cssesc.js');
\end{DoxyCode}


Using an A\+MD loader like \href{http://requirejs.org/}{\tt Require\+JS}\+:


\begin{DoxyCode}
require(
  \{
    'paths': \{
      'cssesc': 'path/to/cssesc'
    \}
  \},
  ['cssesc'],
  function(cssesc) \{
    console.log(cssesc);
  \}
);
\end{DoxyCode}


\subsection*{A\+PI}

\subsubsection*{{\ttfamily cssesc(value, options)}}

This function takes a value and returns an escaped version of the value where any characters that are not printable A\+S\+C\+II symbols are escaped using the shortest possible (but valid) \href{http://mathiasbynens.be/notes/css-escapes}{\tt escape sequences for use in C\+SS strings or identifiers}.


\begin{DoxyCode}
cssesc('Ich ‚ô• B√ºcher');
// ‚Üí 'Ich \(\backslash\)\(\backslash\)2665  B\(\backslash\)\(\backslash\)FC cher'

cssesc('foo ùåÜ bar');
// ‚Üí 'foo \(\backslash\)\(\backslash\)1D306  bar'
\end{DoxyCode}


By default, {\ttfamily cssesc} returns a string that can be used as part of a C\+SS string. If the target is a C\+SS identifier rather than a C\+SS string, use the {\ttfamily is\+Identifier\+: true} setting (see below).

The optional {\ttfamily options} argument accepts an object with the following options\+:

\paragraph*{{\ttfamily is\+Identifier}}

The default value for the {\ttfamily is\+Identifier} option is {\ttfamily false}. This means that the input text will be escaped for use in a C\+SS string literal. If you want to use the result as a C\+SS identifier instead (in a selector, for example), set this option to {\ttfamily true}.


\begin{DoxyCode}
cssesc('123a2b');
// ‚Üí '123a2b'

cssesc('123a2b', \{
  'isIdentifier': true
\});
// ‚Üí '\(\backslash\)\(\backslash\)31 23a2b'
\end{DoxyCode}


\paragraph*{{\ttfamily quotes}}

The default value for the {\ttfamily quotes} option is `\textquotesingle{}single'{\ttfamily . This means that any occurences of}\textquotesingle{}{\ttfamily in the input text will be escaped as}\textbackslash{}\textquotesingle{}\`{}, so that the output can be used in a C\+SS string literal wrapped in single quotes.


\begin{DoxyCode}
cssesc('Lorem ipsum "dolor" sit \(\backslash\)'amet\(\backslash\)' etc.');
// ‚Üí 'Lorem ipsum "dolor" sit \(\backslash\)\(\backslash\)\(\backslash\)'amet\(\backslash\)\(\backslash\)\(\backslash\)' etc.'
// ‚Üí "Lorem ipsum \(\backslash\)"dolor\(\backslash\)" sit \(\backslash\)\(\backslash\)'amet\(\backslash\)\(\backslash\)' etc."

cssesc('Lorem ipsum "dolor" sit \(\backslash\)'amet\(\backslash\)' etc.', \{
  'quotes': 'single'
\});
// ‚Üí 'Lorem ipsum "dolor" sit \(\backslash\)\(\backslash\)\(\backslash\)'amet\(\backslash\)\(\backslash\)\(\backslash\)' etc.'
// ‚Üí "Lorem ipsum \(\backslash\)"dolor\(\backslash\)" sit \(\backslash\)\(\backslash\)'amet\(\backslash\)\(\backslash\)' etc."
\end{DoxyCode}


If you want to use the output as part of a C\+SS string literal wrapped in double quotes, set the {\ttfamily quotes} option to `\textquotesingle{}double'\`{}.


\begin{DoxyCode}
cssesc('Lorem ipsum "dolor" sit \(\backslash\)'amet\(\backslash\)' etc.', \{
  'quotes': 'double'
\});
// ‚Üí 'Lorem ipsum \(\backslash\)\(\backslash\)"dolor\(\backslash\)\(\backslash\)" sit \(\backslash\)'amet\(\backslash\)' etc.'
// ‚Üí "Lorem ipsum \(\backslash\)\(\backslash\)\(\backslash\)"dolor\(\backslash\)\(\backslash\)\(\backslash\)" sit 'amet' etc."
\end{DoxyCode}


\paragraph*{{\ttfamily wrap}}

The {\ttfamily wrap} option takes a boolean value ({\ttfamily true} or {\ttfamily false}), and defaults to {\ttfamily false} (disabled). When enabled, the output will be a valid C\+SS string literal wrapped in quotes. The type of quotes can be specified through the {\ttfamily quotes} setting.


\begin{DoxyCode}
cssesc('Lorem ipsum "dolor" sit \(\backslash\)'amet\(\backslash\)' etc.', \{
  'quotes': 'single',
  'wrap': true
\});
// ‚Üí '\(\backslash\)'Lorem ipsum "dolor" sit \(\backslash\)\(\backslash\)\(\backslash\)'amet\(\backslash\)\(\backslash\)\(\backslash\)' etc.\(\backslash\)''
// ‚Üí "\(\backslash\)'Lorem ipsum \(\backslash\)"dolor\(\backslash\)" sit \(\backslash\)\(\backslash\)\(\backslash\)'amet\(\backslash\)\(\backslash\)\(\backslash\)' etc.\(\backslash\)'"

cssesc('Lorem ipsum "dolor" sit \(\backslash\)'amet\(\backslash\)' etc.', \{
  'quotes': 'double',
  'wrap': true
\});
// ‚Üí '"Lorem ipsum \(\backslash\)\(\backslash\)"dolor\(\backslash\)\(\backslash\)" sit \(\backslash\)'amet\(\backslash\)' etc."'
// ‚Üí "\(\backslash\)"Lorem ipsum \(\backslash\)\(\backslash\)\(\backslash\)"dolor\(\backslash\)\(\backslash\)\(\backslash\)" sit \(\backslash\)'amet\(\backslash\)' etc.\(\backslash\)""
\end{DoxyCode}


\paragraph*{{\ttfamily escape\+Everything}}

The {\ttfamily escape\+Everything} option takes a boolean value ({\ttfamily true} or {\ttfamily false}), and defaults to {\ttfamily false} (disabled). When enabled, all the symbols in the output will be escaped, even printable A\+S\+C\+II symbols.


\begin{DoxyCode}
cssesc('lolwat"foo\(\backslash\)'bar', \{
  'escapeEverything': true
\});
// ‚Üí '\(\backslash\)\(\backslash\)6C\(\backslash\)\(\backslash\)6F\(\backslash\)\(\backslash\)6C\(\backslash\)\(\backslash\)77\(\backslash\)\(\backslash\)61\(\backslash\)\(\backslash\)74\(\backslash\)\(\backslash\)"\(\backslash\)\(\backslash\)66\(\backslash\)\(\backslash\)6F\(\backslash\)\(\backslash\)6F\(\backslash\)\(\backslash\)\(\backslash\)'\(\backslash\)\(\backslash\)62\(\backslash\)\(\backslash\)61\(\backslash\)\(\backslash\)72'
// ‚Üí "\(\backslash\)\(\backslash\)6C\(\backslash\)\(\backslash\)6F\(\backslash\)\(\backslash\)6C\(\backslash\)\(\backslash\)77\(\backslash\)\(\backslash\)61\(\backslash\)\(\backslash\)74\(\backslash\)\(\backslash\)\(\backslash\)"\(\backslash\)\(\backslash\)66\(\backslash\)\(\backslash\)6F\(\backslash\)\(\backslash\)6F\(\backslash\)\(\backslash\)'\(\backslash\)\(\backslash\)62\(\backslash\)\(\backslash\)61\(\backslash\)\(\backslash\)72"
\end{DoxyCode}


\subsubsection*{{\ttfamily cssesc.\+version}}

A string representing the semantic version number.

\subsubsection*{Using the {\ttfamily cssesc} binary}

To use the {\ttfamily cssesc} binary in your shell, simply install cssesc globally using npm\+:


\begin{DoxyCode}
npm install -g cssesc
\end{DoxyCode}


After that you will be able to escape text for use in C\+SS strings or identifiers from the command line\+:


\begin{DoxyCode}
$ cssesc 'f√∂o ‚ô• b√•r ùåÜ baz'
f\(\backslash\)F6o \(\backslash\)2665  b\(\backslash\)E5r \(\backslash\)1D306  baz
\end{DoxyCode}


If the output needs to be a C\+SS identifier rather than part of a string literal, use the {\ttfamily -\/i}/{\ttfamily -\/-\/identifier} option\+:


\begin{DoxyCode}
$ cssesc --identifier 'f√∂o ‚ô• b√•r ùåÜ baz'
f\(\backslash\)F6o\(\backslash\) \(\backslash\)2665\(\backslash\) b\(\backslash\)E5r\(\backslash\) \(\backslash\)1D306\(\backslash\) baz
\end{DoxyCode}


See {\ttfamily cssesc -\/-\/help} for the full list of options.

\subsection*{Support}

This library has been tested in at least Chrome 28-\/30, Firefox 3-\/23, Safari 4-\/6, Opera 10-\/15, IE 6-\/10, Node.\+js v0.\+10.\+0, Narwhal 0.\+3.\+2, Ringo\+JS 0.\+8-\/0.\+9, Phantom\+JS 1.\+9.\+0, and Rhino 1.\+7\+R\+C4.

\subsection*{Unit tests \& code coverage}

After cloning this repository, run {\ttfamily npm install} to install the dependencies needed for development and testing. You may want to install Istanbul {\itshape globally} using {\ttfamily npm install istanbul -\/g}.

Once that‚Äôs done, you can run the unit tests in Node using {\ttfamily npm test} or {\ttfamily node tests/tests.\+js}. To run the tests in Rhino, Ringo, Narwhal, and web browsers as well, use {\ttfamily grunt test}.

To generate \href{http://rawgithub.com/mathiasbynens/cssesc/master/coverage/cssesc/cssesc.js.html}{\tt the code coverage report}, use {\ttfamily grunt cover}.

\subsection*{Author}

\tabulinesep=1mm
\begin{longtabu} spread 0pt [c]{*{1}{|X[-1]}|}
\hline
\rowcolor{\tableheadbgcolor}\textbf{ \mbox{[}!   }\\\cline{1-1}
\endfirsthead
\hline
\endfoot
\hline
\rowcolor{\tableheadbgcolor}\textbf{ \mbox{[}!   }\\\cline{1-1}
\endhead
\href{http://mathiasbynens.be/}{\tt Mathias Bynens}   \\\cline{1-1}
\end{longtabu}


\subsection*{License}

This library is available under the \href{http://mths.be/mit}{\tt M\+IT} license. 