\begin{quote}
A Babel preset that can automatically determine the Babel plugins and polyfills you need based on your supported environments. \end{quote}



\begin{DoxyCode}
npm install babel-preset-env --save-dev
\end{DoxyCode}



\begin{DoxyCode}
\{
  "presets": [
    ["env", \{
      "targets": \{
        "browsers": ["last 2 versions", "safari >= 7"]
      \}
    \}]
  ]
\}
\end{DoxyCode}


Check out the many options (especially {\ttfamily use\+Built\+Ins} to polyfill less)!


\begin{DoxyItemize}
\item \href{#how-it-works}{\tt How it Works}
\item \href{#install}{\tt Install}
\item \href{#usage}{\tt Usage}
\item \href{#options}{\tt Options}
\item \href{#examples}{\tt Examples}
\item \href{#caveats}{\tt Caveats}
\item \href{#other-cool-projects}{\tt Other Cool Projects}
\end{DoxyItemize}

\subsection*{How it Works}

\subsubsection*{Determine environment support for E\+C\+M\+A\+Script features}

Use external data such as \href{https://github.com/kangax/compat-table}{\tt {\ttfamily compat-\/table}} to determine browser support. (We should create P\+Rs there when necessary)



We can periodically run \href{https://github.com/babel/babel-preset-env/blob/master/scripts/build-data.js}{\tt build-\/data.\+js} which generates \href{https://github.com/babel/babel-preset-env/blob/master/data/plugins.json}{\tt plugins.\+json}.

Ref\+: \href{https://github.com/babel/babel-preset-env/issues/7}{\tt \#7}

\subsubsection*{Maintain a mapping between Java\+Script features and Babel plugins}

\begin{quote}
Currently located at \href{https://github.com/babel/babel-preset-env/blob/master/data/plugin-features.js}{\tt plugin-\/features.\+js}. \end{quote}


This should be straightforward to do in most cases. There might be cases where plugins should be split up more or certain plugins aren\textquotesingle{}t standalone enough (or impossible to do).

\subsubsection*{Support all plugins in Babel that are considered {\ttfamily latest}}

\begin{quote}
Default behavior without options is the same as {\ttfamily babel-\/preset-\/latest}. \end{quote}


It won\textquotesingle{}t include {\ttfamily stage-\/x} plugins. env will support all plugins in what we consider the latest version of Javascript (by matching what we do in \href{http://babeljs.io/docs/plugins/preset-latest/}{\tt {\ttfamily babel-\/preset-\/latest}}).

Ref\+: \href{https://github.com/babel/babel-preset-env/issues/14}{\tt \#14}

\subsubsection*{Determine the lowest common denominator of plugins to be included in the preset}

If you are targeting IE 8 and Chrome 55 it will include all plugins required by IE 8 since you would need to support both still.

\subsubsection*{Support a target option {\ttfamily \char`\"{}node\char`\"{}\+: \char`\"{}current\char`\"{}} to compile for the currently running node version.}

For example, if you are building on Node 4, arrow functions won\textquotesingle{}t be converted, but they will if you build on Node 0.\+12.

\subsubsection*{Support a {\ttfamily browsers} option like autoprefixer}

Use \href{https://github.com/ai/browserslist}{\tt browserslist} to declare supported environments by performing queries like {\ttfamily $>$ 1\%, last 2 versions}.

Ref\+: \href{https://github.com/babel/babel-preset-env/pull/19}{\tt \#19}

\subsection*{Install}

With \href{https://www.npmjs.com}{\tt npm}\+:


\begin{DoxyCode}
npm install --save-dev babel-preset-env
\end{DoxyCode}


Or \href{https://yarnpkg.com}{\tt yarn}\+:


\begin{DoxyCode}
yarn add babel-preset-env --dev
\end{DoxyCode}


\subsection*{Usage}

The default behavior without options runs all transforms (behaves the same as \href{https://babeljs.io/docs/plugins/preset-latest/}{\tt babel-\/preset-\/latest}).


\begin{DoxyCode}
\{
  "presets": ["env"]
\}
\end{DoxyCode}


\subsection*{Options}

For more information on setting options for a preset, refer to the \href{http://babeljs.io/docs/plugins/#plugin-preset-options}{\tt plugin/preset options} documentation.

\subsubsection*{{\ttfamily targets}}

{\ttfamily \{ \mbox{[}string\mbox{]}\+: number $\vert$ string \}}, defaults to {\ttfamily \{\}}.

Takes an object of environment versions to support.

Each target environment takes a number or a string (we recommend using a string when specifying minor versions like {\ttfamily node\+: \char`\"{}6.\+10\char`\"{}}).

Example environments\+: {\ttfamily chrome}, {\ttfamily opera}, {\ttfamily edge}, {\ttfamily firefox}, {\ttfamily safari}, {\ttfamily ie}, {\ttfamily ios}, {\ttfamily android}, {\ttfamily node}, {\ttfamily electron}.

The \href{https://github.com/babel/babel-preset-env/blob/master/data/plugins.json}{\tt data} for this is generated by running the \href{https://github.com/babel/babel-preset-env/blob/master/scripts/build-data.js}{\tt build-\/data script} which pulls in data from \href{https://kangax.github.io/compat-table}{\tt compat-\/table}.

\subsubsection*{{\ttfamily targets.\+node}}

{\ttfamily number $\vert$ string $\vert$ \char`\"{}current\char`\"{} $\vert$ true}

If you want to compile against the current node version, you can specify {\ttfamily \char`\"{}node\char`\"{}\+: true} or {\ttfamily \char`\"{}node\char`\"{}\+: \char`\"{}current\char`\"{}}, which would be the same as {\ttfamily \char`\"{}node\char`\"{}\+: parse\+Float(process.\+versions.\+node)}.

\subsubsection*{{\ttfamily targets.\+browsers}}

{\ttfamily Array$<$string$>$ $\vert$ string}

A query to select browsers (ex\+: last 2 versions, $>$ 5\%) using \href{https://github.com/ai/browserslist}{\tt browserslist}.

Note, browsers\textquotesingle{} results are overridden by explicit items from {\ttfamily targets}.

\subsubsection*{{\ttfamily targets.\+uglify}}

{\ttfamily number $\vert$ true}

Uglify\+JS does not currently support any E\+S6 syntax, so if you are using Uglify to minify your code, targeting later browsers may cause Uglify to throw syntax errors.

To prevent these errors -\/ specify the uglify option, which will enable all plugins and, as a result, fully compile your code to E\+S5. However, the {\ttfamily use\+Built\+Ins} option will still work as before, and only include the polyfills that your target(s) need.

\begin{quote}
N\+O\+TE\+: Uglify has a work-\/in-\/progress \char`\"{}\+Harmony\char`\"{} branch to address the lack of E\+S6 support, but it is not yet stable. You can follow its progress in \href{https://github.com/mishoo/UglifyJS2/issues/448}{\tt Uglify\+J\+S2 issue \#448}. If you require an alternative minifier which {\itshape does} support E\+S6 syntax, we recommend using \href{https://github.com/babel/babili}{\tt Babili}. \end{quote}


\subsubsection*{{\ttfamily spec}}

{\ttfamily boolean}, defaults to {\ttfamily false}.

Enable more spec compliant, but potentially slower, transformations for any plugins in this preset that support them.

\subsubsection*{{\ttfamily loose}}

{\ttfamily boolean}, defaults to {\ttfamily false}.

Enable \char`\"{}loose\char`\"{} transformations for any plugins in this preset that allow them.

\subsubsection*{{\ttfamily modules}}

{\ttfamily \char`\"{}amd\char`\"{} $\vert$ \char`\"{}umd\char`\"{} $\vert$ \char`\"{}systemjs\char`\"{} $\vert$ \char`\"{}commonjs\char`\"{} $\vert$ false}, defaults to {\ttfamily \char`\"{}commonjs\char`\"{}}.

Enable transformation of E\+S6 module syntax to another module type.

Setting this to {\ttfamily false} will not transform modules.

\subsubsection*{{\ttfamily debug}}

{\ttfamily boolean}, defaults to {\ttfamily false}.

Outputs the targets/plugins used and the version specified in \href{https://github.com/babel/babel-preset-env/blob/master/data/plugins.json}{\tt plugin data version} to {\ttfamily console.\+log}.

\subsubsection*{{\ttfamily include}}

{\ttfamily Array$<$string$>$}, defaults to {\ttfamily \mbox{[}\mbox{]}}.

\begin{quote}
N\+O\+TE\+: {\ttfamily whitelist} is deprecated and will be removed in the next major in favor of this. \end{quote}


An array of plugins to always include.

Valid options include any\+:


\begin{DoxyItemize}
\item \href{https://github.com/babel/babel-preset-env/blob/master/data/plugin-features.js}{\tt Babel plugins} -\/ both with ({\ttfamily babel-\/plugin-\/transform-\/es2015-\/spread}) and without prefix ({\ttfamily transform-\/es2015-\/spread}) are supported.
\item \href{https://github.com/babel/babel-preset-env/blob/master/data/built-in-features.js}{\tt Built-\/ins}, such as {\ttfamily map}, {\ttfamily set}, or {\ttfamily object.\+assign}.
\end{DoxyItemize}

This option is useful if there is a bug in a native implementation, or a combination of a non-\/supported feature + a supported one doesn\textquotesingle{}t work.

For example, Node 4 supports native classes but not spread. If {\ttfamily super} is used with a spread argument, then the {\ttfamily transform-\/es2015-\/classes} transform needs to be {\ttfamily include}d, as it is not possible to transpile a spread with {\ttfamily super} otherwise.

\begin{quote}
N\+O\+TE\+: The {\ttfamily include} and {\ttfamily exclude} options {\itshape only} work with the \href{https://github.com/babel/babel-preset-env/blob/master/data/plugin-features.js}{\tt plugins included with this preset}; so, for example, including {\ttfamily transform-\/do-\/expressions} or excluding {\ttfamily transform-\/function-\/bind} will throw errors. To use a plugin {\itshape not} included with this preset, add them to your \href{https://babeljs.io/docs/usage/babelrc/}{\tt config} directly. \end{quote}


\subsubsection*{{\ttfamily exclude}}

{\ttfamily Array$<$string$>$}, defaults to {\ttfamily \mbox{[}\mbox{]}}.

An array of plugins to always exclude/remove.

The possible options are the same as the {\ttfamily include} option.

This option is useful for \char`\"{}blacklisting\char`\"{} a transform like {\ttfamily transform-\/regenerator} if you don\textquotesingle{}t use generators and don\textquotesingle{}t want to include {\ttfamily regenerator\+Runtime} (when using {\ttfamily use\+Built\+Ins}) or for using another plugin like \href{https://github.com/MatAtBread/fast-async}{\tt fast-\/async} instead of \href{http://babeljs.io/docs/plugins/transform-async-generator-functions/}{\tt Babel\textquotesingle{}s async-\/to-\/gen}.

\subsubsection*{{\ttfamily use\+Built\+Ins}}

{\ttfamily boolean}, defaults to {\ttfamily false}.

A way to apply {\ttfamily babel-\/preset-\/env} for polyfills (via \char`\"{}babel-\/polyfill\char`\"{}).

\begin{quote}
N\+O\+TE\+: This does not currently polyfill experimental/stage-\/x built-\/ins like the regular \char`\"{}babel-\/polyfill\char`\"{} does. This will only work with npm $>$= 3 (which should be used with Babel 6 anyway) \end{quote}



\begin{DoxyCode}
npm install babel-polyfill --save
\end{DoxyCode}


This option enables a new plugin that replaces the statement {\ttfamily import \char`\"{}babel-\/polyfill\char`\"{}} or {\ttfamily require(\char`\"{}babel-\/polyfill\char`\"{})} with individual requires for {\ttfamily babel-\/polyfill} based on environment.

\begin{quote}
N\+O\+TE\+: Only use {\ttfamily require(\char`\"{}babel-\/polyfill\char`\"{});} once in your whole app. Multiple imports or requires of {\ttfamily babel-\/polyfill} will throw an error since it can cause global collisions and other issues that are hard to trace. We recommend creating a single entry file that only contains the {\ttfamily require} statement. \end{quote}


{\bfseries In}


\begin{DoxyCode}
import "babel-polyfill";
\end{DoxyCode}


{\bfseries Out (different based on environment)}


\begin{DoxyCode}
import "core-js/modules/es7.string.pad-start";
import "core-js/modules/es7.string.pad-end";
import "core-js/modules/web.timers";
import "core-js/modules/web.immediate";
import "core-js/modules/web.dom.iterable";
\end{DoxyCode}


This will also work for {\ttfamily core-\/js} directly ({\ttfamily import \char`\"{}core-\/js\char`\"{};})


\begin{DoxyCode}
npm install core-js --save
\end{DoxyCode}
 



\subsection*{Examples}

\subsubsection*{Export with various targets}


\begin{DoxyCode}
export class A \{\}
\end{DoxyCode}


\paragraph*{Target only Chrome 52}

$\ast$$\ast$.babelrc$\ast$$\ast$


\begin{DoxyCode}
\{
  "presets": [
    ["env", \{
      "targets": \{
        "chrome": 52
      \}
    \}]
  ]
\}
\end{DoxyCode}


{\bfseries Out}


\begin{DoxyCode}
class A \{\}
exports.A = A;
\end{DoxyCode}


\paragraph*{Target Chrome 52 with webpack 2/rollup and loose mode}

$\ast$$\ast$.babelrc$\ast$$\ast$


\begin{DoxyCode}
\{
  "presets": [
    ["env", \{
      "targets": \{
        "chrome": 52
      \},
      "modules": false,
      "loose": true
    \}]
  ]
\}
\end{DoxyCode}


{\bfseries Out}


\begin{DoxyCode}
export class A \{\}
\end{DoxyCode}


\paragraph*{Target specific browsers via browserslist}

$\ast$$\ast$.babelrc$\ast$$\ast$


\begin{DoxyCode}
\{
  "presets": [
    ["env", \{
      "targets": \{
        "chrome": 52,
        "browsers": ["last 2 versions", "safari 7"]
      \}
    \}]
  ]
\}
\end{DoxyCode}


{\bfseries Out}


\begin{DoxyCode}
export var A = function A() \{
  \_classCallCheck(this, A);
\};
\end{DoxyCode}


\paragraph*{Target latest node via {\ttfamily node\+: true} or {\ttfamily node\+: \char`\"{}current\char`\"{}}}

$\ast$$\ast$.babelrc$\ast$$\ast$


\begin{DoxyCode}
\{
  "presets": [
    ["env", \{
      "targets": \{
        "node": "current"
      \}
    \}]
  ]
\}
\end{DoxyCode}


{\bfseries Out}


\begin{DoxyCode}
class A \{\}
exports.A = A;
\end{DoxyCode}


\subsubsection*{Show debug output}

$\ast$$\ast$.babelrc$\ast$$\ast$


\begin{DoxyCode}
\{
  "presets": [
    [ "env", \{
      "targets": \{
        "safari": 10
      \},
      "modules": false,
      "useBuiltIns": true,
      "debug": true
    \}]
  ]
\}
\end{DoxyCode}


{\bfseries stdout}


\begin{DoxyCode}
Using targets:
\{
  "safari": 10
\}

Modules transform: false

Using plugins:
  transform-exponentiation-operator \{\}
  transform-async-to-generator \{\}

Using polyfills:
  es7.object.values \{\}
  es7.object.entries \{\}
  es7.object.get-own-property-descriptors \{\}
  web.timers \{\}
  web.immediate \{\}
  web.dom.iterable \{\}
\end{DoxyCode}


\subsubsection*{Include and exclude specific plugins/built-\/ins}

\begin{quote}
always include arrow functions, explicitly exclude generators \end{quote}



\begin{DoxyCode}
\{
  "presets": [
    ["env", \{
      "targets": \{
        "browsers": ["last 2 versions", "safari >= 7"]
      \},
      "include": ["transform-es2015-arrow-functions", "es6.map"],
      "exclude": ["transform-regenerator", "es6.set"]
    \}]
  ]
\}
\end{DoxyCode}


\subsection*{Caveats}

If you get a {\ttfamily Syntax\+Error\+: Unexpected token ...} error when using the \href{https://github.com/babel/babel/tree/master/packages/babel-plugin-transform-object-rest-spread}{\tt object-\/rest-\/spread} transform then make sure the plugin has been updated to, at least, {\ttfamily v6.\+19.\+0}.

\subsection*{Other Cool Projects}


\begin{DoxyItemize}
\item \href{https://github.com/christophehurpeau/babel-preset-modern-browsers}{\tt babel-\/preset-\/modern-\/browsers}
\item ? 
\end{DoxyItemize}