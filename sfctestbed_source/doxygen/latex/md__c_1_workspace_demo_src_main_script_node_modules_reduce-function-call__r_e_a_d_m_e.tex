\begin{quote}
Reduce function calls in a string, using a callback \end{quote}


\subsection*{Installation}


\begin{DoxyCode}
npm install reduce-function-call
\end{DoxyCode}


\subsection*{Usage}


\begin{DoxyCode}
var reduceFunctionCall = require("reduce-function-call")

reduceFunctionCall("foo(1)", "foo", function(body) \{
  // body === "1"
  return parseInt(body, 10) + 1
\})
// "2"

var nothingOrUpper = function(body, functionIdentifier) \{
  // ignore empty value
  if (body === "") \{
    return functionIdentifier + "()"
  \}

  return body.toUpperCase()
\}

reduceFunctionCall("bar()", "bar", nothingOrUpper)
// "bar()"

reduceFunctionCall("upper(baz)", "upper", nothingOrUpper)
// "BAZ"

reduceFunctionCall("math(math(2 + 2) * 4 + math(2 + 2)) and other things", "math", function(body,
       functionIdentifier, call) \{
  try \{
    return eval(body)
  \}
  catch (e) \{
    return call
  \}
\})
// "20 and other things"

reduceFunctionCall("sha bla blah() blaa bla() abla() aabla() blaaa()", /\(\backslash\)b([a-z]?bla[a-z]?)\(\backslash\)(/,
       function(body, functionIdentifier) \{
  if (functionIdentifier === "bla") \{
    return "ABRACADABRA"
  \}
  return functionIdentifier.replace("bla", "!")
\}
// "sha bla !h blaa ABRACADABRA a! aabla() blaaa()"
\end{DoxyCode}


See \href{test/index.js}{\tt unit tests} for others examples.

\subsection*{Contributing}

Work on a branch, install dev-\/dependencies, respect coding style \& run tests before submitting a bug fix or a feature.


\begin{DoxyCode}
git clone https://github.com/MoOx/reduce-function-call.git
git checkout -b patch-1
npm install
npm test
\end{DoxyCode}


\subsection*{C\+H\+A\+N\+G\+E\+L\+O\+G.\+md \char`\"{}\+Changelog\char`\"{}}

\subsection*{\mbox{[}License\mbox{]}(L\+I\+C\+E\+N\+S\+E-\/\+M\+IT)}