\href{https://www.npmjs.com/package/html-minifier}{\tt } \href{https://travis-ci.org/kangax/html-minifier}{\tt } \href{https://david-dm.org/kangax/html-minifier}{\tt } \href{https://david-dm.org/kangax/html-minifier?type=dev}{\tt } \href{https://gitter.im/kangax/html-minifier}{\tt }

\href{http://kangax.github.io/html-minifier/}{\tt H\+T\+M\+L\+Minifier} is a highly {\bfseries configurable}, {\bfseries well-\/tested}, Java\+Script-\/based H\+T\+ML minifier.

See \href{http://perfectionkills.com/experimenting-with-html-minifier/}{\tt corresponding blog post} for all the gory details of \href{http://perfectionkills.com/experimenting-with-html-minifier/#how_it_works}{\tt how it works}, \href{http://perfectionkills.com/experimenting-with-html-minifier/#options}{\tt description of each option}, \href{http://perfectionkills.com/experimenting-with-html-minifier/#field_testing}{\tt testing results} and \href{http://perfectionkills.com/experimenting-with-html-minifier/#cost_and_benefits}{\tt conclusions}.

\href{http://kangax.github.io/html-minifier/tests/}{\tt Test suite is available online}.

Also see corresponding \href{https://github.com/stereobooster/html_minifier}{\tt Ruby wrapper}, and for Node.\+js, \href{https://github.com/gruntjs/grunt-contrib-htmlmin}{\tt Grunt plugin}, \href{https://github.com/jonschlinkert/gulp-htmlmin}{\tt Gulp module}, \href{https://github.com/koajs/html-minifier}{\tt Koa middleware wrapper} and \href{https://github.com/melonmanchan/express-minify-html}{\tt Express middleware wrapper}.

For lint-\/like capabilities take a look at \href{https://github.com/kangax/html-lint}{\tt H\+T\+M\+L\+Lint}.

\subsection*{Minification comparison}

How does H\+T\+M\+L\+Minifier compare to other solutions — \href{http://www.willpeavy.com/minifier/}{\tt H\+T\+ML Minifier from Will Peavy} (1st result in \href{https://www.google.com/#q=html+minifier}{\tt Google search for \char`\"{}html minifier\char`\"{}}) as well as \href{http://htmlcompressor.com}{\tt htmlcompressor.\+com} and \href{https://github.com/Swaagie/minimize}{\tt minimize}?

\tabulinesep=1mm
\begin{longtabu} spread 0pt [c]{*{6}{|X[-1]}|}
\hline
\rowcolor{\tableheadbgcolor}\textbf{ Site  }&\textbf{ Original size $\ast$(KB)$\ast$  }&\textbf{ H\+T\+M\+L\+Minifier  }&\textbf{ minimize  }&\textbf{ Will Peavy  }&\textbf{ htmlcompressor.\+com   }\\\cline{1-6}
\endfirsthead
\hline
\endfoot
\hline
\rowcolor{\tableheadbgcolor}\textbf{ Site  }&\textbf{ Original size $\ast$(KB)$\ast$  }&\textbf{ H\+T\+M\+L\+Minifier  }&\textbf{ minimize  }&\textbf{ Will Peavy  }&\textbf{ htmlcompressor.\+com   }\\\cline{1-6}
\endhead
\href{https://www.google.com/}{\tt Google}  &46  &{\bfseries 43}  &46  &48  &46   \\\cline{1-6}
\href{https://github.com/kangax/html-minifier}{\tt H\+T\+M\+L\+Minifier}  &129  &{\bfseries 100}  &108  &113  &108   \\\cline{1-6}
\href{http://www.cnn.com/}{\tt C\+NN}  &134  &{\bfseries 123}  &131  &132  &127   \\\cline{1-6}
\href{http://www.amazon.co.uk/}{\tt Amazon}  &200  &{\bfseries 168}  &192  &195  &n/a   \\\cline{1-6}
\href{http://stackoverflow.com/}{\tt Stack Overflow}  &220  &{\bfseries 170}  &178  &186  &176   \\\cline{1-6}
\href{http://www.bbc.co.uk/}{\tt B\+BC}  &228  &{\bfseries 188}  &221  &228  &216   \\\cline{1-6}
\href{http://www.nytimes.com/}{\tt New York Times}  &235  &{\bfseries 158}  &181  &178  &165   \\\cline{1-6}
\href{http://getbootstrap.com/css/}{\tt Bootstrap C\+SS}  &272  &{\bfseries 260}  &269  &229  &269   \\\cline{1-6}
\href{https://en.wikipedia.org/wiki/President_of_the_United_States}{\tt Wikipedia}  &550  &{\bfseries 502}  &530  &548  &529   \\\cline{1-6}
\href{http://www.nbc.com/}{\tt N\+BC}  &649  &{\bfseries 617}  &646  &649  &n/a   \\\cline{1-6}
\href{http://eloquentjavascript.net/1st_edition/print.html}{\tt Eloquent Javascript}  &870  &{\bfseries 815}  &840  &864  &n/a   \\\cline{1-6}
\href{http://kangax.github.io/compat-table/es6/}{\tt E\+S6 table}  &4105  &{\bfseries 3467}  &3871  &n/a  &n/a   \\\cline{1-6}
\href{https://tc39.github.io/ecma262/}{\tt E\+S6 draft}  &5512  &{\bfseries 4919}  &5066  &n/a  &n/a   \\\cline{1-6}
\end{longtabu}


\subsection*{Options Quick Reference}

Most of the options are disabled by default.

\tabulinesep=1mm
\begin{longtabu} spread 0pt [c]{*{3}{|X[-1]}|}
\hline
\rowcolor{\tableheadbgcolor}\textbf{ Option  }&\textbf{ Description  }&\textbf{ Default   }\\\cline{1-3}
\endfirsthead
\hline
\endfoot
\hline
\rowcolor{\tableheadbgcolor}\textbf{ Option  }&\textbf{ Description  }&\textbf{ Default   }\\\cline{1-3}
\endhead
{\ttfamily case\+Sensitive}  &Treat attributes in case sensitive manner (useful for custom H\+T\+ML tags)  &{\ttfamily false}   \\\cline{1-3}
{\ttfamily collapse\+Boolean\+Attributes}  &\href{http://perfectionkills.com/experimenting-with-html-minifier/#collapse_boolean_attributes}{\tt Omit attribute values from boolean attributes}  &{\ttfamily false}   \\\cline{1-3}
{\ttfamily collapse\+Inline\+Tag\+Whitespace}  &Don\textquotesingle{}t leave any spaces between {\ttfamily display\+:inline;} elements when collapsing. Must be used in conjunction with {\ttfamily collapse\+Whitespace=true}  &{\ttfamily false}   \\\cline{1-3}
{\ttfamily collapse\+Whitespace}  &\href{http://perfectionkills.com/experimenting-with-html-minifier/#collapse_whitespace}{\tt Collapse white space that contributes to text nodes in a document tree}  &{\ttfamily false}   \\\cline{1-3}
{\ttfamily conservative\+Collapse}  &Always collapse to 1 space (never remove it entirely). Must be used in conjunction with {\ttfamily collapse\+Whitespace=true}  &{\ttfamily false}   \\\cline{1-3}
{\ttfamily custom\+Attr\+Assign}  &Arrays of regex\textquotesingle{}es that allow to support custom attribute assign expressions (e.\+g. `'$<$div flex?=\char`\"{}\{\{mode != cover\}\}\char`\"{}$>$\textquotesingle{}{\ttfamily ) $<$/td$>$ $<$td class=\char`\"{}markdown\+Table\+Body\+None\char`\"{}$>$}\mbox{[} \mbox{]}\`{}   \\\cline{1-3}
{\ttfamily custom\+Attr\+Collapse}  &Regex that specifies custom attribute to strip newlines from (e.\+g. {\ttfamily /ng-\/class/})  &\\\cline{1-3}
{\ttfamily custom\+Attr\+Surround}  &Arrays of regex\textquotesingle{}es that allow to support custom attribute surround expressions (e.\+g. {\ttfamily $<$input \{\{\#if value\}\}checked=\char`\"{}checked\char`\"{}\{\{/if\}\}$>$})  &{\ttfamily \mbox{[} \mbox{]}}   \\\cline{1-3}
{\ttfamily custom\+Event\+Attributes}  &Arrays of regex\textquotesingle{}es that allow to support custom event attributes for {\ttfamily minify\+JS} (e.\+g. {\ttfamily ng-\/click})  &{\ttfamily \mbox{[} /$^\wedge$on\mbox{[}a-\/z\mbox{]}\{3,\}\$/ \mbox{]}}   \\\cline{1-3}
{\ttfamily decode\+Entities}  &Use direct Unicode characters whenever possible  &{\ttfamily false}   \\\cline{1-3}
{\ttfamily html5}  &Parse input according to H\+T\+M\+L5 specifications  &{\ttfamily true}   \\\cline{1-3}
{\ttfamily ignore\+Custom\+Comments}  &Array of regex\textquotesingle{}es that allow to ignore certain comments, when matched  &{\ttfamily \mbox{[} /$^\wedge$!/ \mbox{]}}   \\\cline{1-3}
{\ttfamily ignore\+Custom\+Fragments}  &Array of regex\textquotesingle{}es that allow to ignore certain fragments, when matched (e.\+g. {\ttfamily $<$?php ... ?$>$}, {\ttfamily \{\{ ... \}\}}, etc.)  &{\ttfamily \mbox{[} /$<$\%\mbox{[}\textbackslash{}s\textbackslash{}S\mbox{]}$\ast$?\%$>$/, /$<$\textbackslash{}?\mbox{[}\textbackslash{}s\textbackslash{}S\mbox{]}$\ast$?\textbackslash{}?$>$/ \mbox{]}}   \\\cline{1-3}
{\ttfamily include\+Auto\+Generated\+Tags}  &Insert tags generated by H\+T\+ML parser  &{\ttfamily true}   \\\cline{1-3}
{\ttfamily keep\+Closing\+Slash}  &Keep the trailing slash on singleton elements  &{\ttfamily false}   \\\cline{1-3}
\end{longtabu}
$\vert$ {\ttfamily max\+Line\+Length} $\vert$ Specify a maximum line length. Compressed output will be split by newlines at valid H\+T\+ML split-\/points $\vert$ $\vert$ {\ttfamily minify\+C\+SS} $\vert$ Minify C\+SS in style elements and style attributes (uses \href{https://github.com/jakubpawlowicz/clean-css}{\tt clean-\/css}) $\vert$ {\ttfamily false} (could be {\ttfamily true}, {\ttfamily Object}, {\ttfamily Function(text)}) $\vert$ $\vert$ {\ttfamily minify\+JS} $\vert$ Minify Java\+Script in script elements and event attributes (uses \href{https://github.com/mishoo/UglifyJS2}{\tt Uglify\+JS}) $\vert$ {\ttfamily false} (could be {\ttfamily true}, {\ttfamily Object}, {\ttfamily Function(text, inline)}) $\vert$ $\vert$ {\ttfamily minify\+U\+R\+Ls} $\vert$ Minify U\+R\+Ls in various attributes (uses \href{https://github.com/stevenvachon/relateurl}{\tt relateurl}) $\vert$ {\ttfamily false} (could be {\ttfamily String}, {\ttfamily Object}, {\ttfamily Function(text)}) $\vert$ $\vert$ {\ttfamily preserve\+Line\+Breaks} $\vert$ Always collapse to 1 line break (never remove it entirely) when whitespace between tags include a line break. Must be used in conjunction with {\ttfamily collapse\+Whitespace=true} $\vert$ {\ttfamily false} $\vert$ $\vert$ {\ttfamily prevent\+Attributes\+Escaping} $\vert$ Prevents the escaping of the values of attributes $\vert$ {\ttfamily false} $\vert$ $\vert$ {\ttfamily process\+Conditional\+Comments} $\vert$ Process contents of conditional comments through minifier $\vert$ {\ttfamily false} $\vert$ $\vert$ {\ttfamily process\+Scripts} $\vert$ Array of strings corresponding to types of script elements to process through minifier (e.\+g. {\ttfamily text/ng-\/template}, {\ttfamily text/x-\/handlebars-\/template}, etc.) $\vert$ {\ttfamily \mbox{[} \mbox{]}} $\vert$ $\vert$ {\ttfamily quote\+Character} $\vert$ Type of quote to use for attribute values (\textquotesingle{} or \char`\"{}) $\vert$ $\vert$
$\vert$ $<$tt$>$remove\+Attribute\+Quotes$<$/tt$>$        $\vert$ $<$a href=\char`\"{}\href{http://perfectionkills.com/experimenting-with-html-minifier/#remove_attribute_quotes}{\tt http\+://perfectionkills.\+com/experimenting-\/with-\/html-\/minifier/\#remove\+\_\+attribute\+\_\+quotes}\char`\"{}$>$\+Remove quotes around attributes when possible$<$/a$>$ $\vert$ $<$tt$>$false$<$/tt$>$ $\vert$
$\vert$ $<$tt$>$remove\+Comments$<$/tt$>$               $\vert$ $<$a href=\char`\"{}\href{http://perfectionkills.com/experimenting-with-html-minifier/#remove_comments}{\tt http\+://perfectionkills.\+com/experimenting-\/with-\/html-\/minifier/\#remove\+\_\+comments}\char`\"{}$>$\+Strip H\+T\+M\+L comments$<$/a$>$ $\vert$ $<$tt$>$false$<$/tt$>$ $\vert$
$\vert$ $<$tt$>$remove\+Empty\+Attributes$<$/tt$>$        $\vert$ $<$a href=\char`\"{}\href{http://perfectionkills.com/experimenting-with-html-minifier/#remove_empty_or_blank_attributes}{\tt http\+://perfectionkills.\+com/experimenting-\/with-\/html-\/minifier/\#remove\+\_\+empty\+\_\+or\+\_\+blank\+\_\+attributes}\char`\"{}$>$\+Remove all attributes with whitespace-\/only values$<$/a$>$ $\vert$ $<$tt$>$false$<$/tt$>$ (could be $<$tt$>$true$<$/tt$>$, $<$tt$>$\+Function(attr\+Name, tag)$<$/tt$>$) $\vert$
$\vert$ $<$tt$>$remove\+Empty\+Elements$<$/tt$>$          $\vert$ $<$a href=\char`\"{}\href{http://perfectionkills.com/experimenting-with-html-minifier/#remove_empty_elements}{\tt http\+://perfectionkills.\+com/experimenting-\/with-\/html-\/minifier/\#remove\+\_\+empty\+\_\+elements}\char`\"{}$>$\+Remove all elements with empty contents$<$/a$>$ $\vert$ $<$tt$>$false$<$/tt$>$ $\vert$
$\vert$ $<$tt$>$remove\+Optional\+Tags$<$/tt$>$           $\vert$ $<$a href=\char`\"{}\href{http://perfectionkills.com/experimenting-with-html-minifier/#remove_optional_tags}{\tt http\+://perfectionkills.\+com/experimenting-\/with-\/html-\/minifier/\#remove\+\_\+optional\+\_\+tags}\char`\"{}$>$\+Remove optional tags$<$/a$>$ $\vert$ $<$tt$>$false$<$/tt$>$ $\vert$
$\vert$ $<$tt$>$remove\+Redundant\+Attributes$<$/tt$>$    $\vert$ $<$a href=\char`\"{}\href{http://perfectionkills.com/experimenting-with-html-minifier/#remove_redundant_attributes}{\tt http\+://perfectionkills.\+com/experimenting-\/with-\/html-\/minifier/\#remove\+\_\+redundant\+\_\+attributes}\char`\"{}$>$\+Remove attributes when value matches default.$<$/a$>$ $\vert$ $<$tt$>$false$<$/tt$>$ $\vert$
$\vert$ $<$tt$>$remove\+Script\+Type\+Attributes$<$/tt$>$   $\vert$ Remove $<$tt$>$type=\char`\"{}text/javascript\char`\"{}$<$/tt$>$ from $<$tt$>$script$<$/tt$>$ tags. Other $<$tt$>$type$<$/tt$>$ attribute values are left intact $\vert$ $<$tt$>$false$<$/tt$>$ $\vert$
$\vert$ $<$tt$>$remove\+Style\+Link\+Type\+Attributes$<$/tt$>$$\vert$ Remove $<$tt$>$type=\char`\"{}text/css" from {\ttfamily style} and {\ttfamily link} tags. Other {\ttfamily type} attribute values are left intact $\vert$ {\ttfamily false} $\vert$ $\vert$ {\ttfamily remove\+Tag\+Whitespace} $\vert$ Remove space between attributes whenever possible. {\bfseries Note that this will result in invalid H\+T\+M\+L!} $\vert$ {\ttfamily false} $\vert$ $\vert$ {\ttfamily sort\+Attributes} $\vert$ \href{#sorting-attributes--style-classes}{\tt Sort attributes by frequency} $\vert$ {\ttfamily false} $\vert$ $\vert$ {\ttfamily sort\+Class\+Name} $\vert$ \href{#sorting-attributes--style-classes}{\tt Sort style classes by frequency} $\vert$ {\ttfamily false} $\vert$ $\vert$ {\ttfamily trim\+Custom\+Fragments} $\vert$ Trim white space around {\ttfamily ignore\+Custom\+Fragments}. $\vert$ {\ttfamily false} $\vert$ $\vert$ {\ttfamily use\+Short\+Doctype} $\vert$ \href{http://perfectionkills.com/experimenting-with-html-minifier/#use_short_doctype}{\tt Replaces the {\ttfamily doctype} with the short (H\+T\+M\+L5) doctype} $\vert$ {\ttfamily false} $\vert$

\subsubsection*{Sorting attributes / style classes}

Minifier options like {\ttfamily sort\+Attributes} and {\ttfamily sort\+Class\+Name} won\textquotesingle{}t impact the plain-\/text size of the output. However, they form long repetitive chains of characters that should improve compression ratio of gzip used in H\+T\+TP compression.

\subsection*{Special cases}

\subsubsection*{Ignoring chunks of markup}

If you have chunks of markup you would like preserved, you can wrap them \`{}\`{}.

\subsubsection*{Preserving S\+VG tags}

S\+VG tags are automatically recognized, and when they are minified, both case-\/sensitivity and closing-\/slashes are preserved, regardless of the minification settings used for the rest of the file.

\subsubsection*{Working with invalid markup}

H\+T\+M\+L\+Minifier {\bfseries can\textquotesingle{}t work with invalid or partial chunks of markup}. This is because it parses markup into a tree structure, then modifies it (removing anything that was specified for removal, ignoring anything that was specified to be ignored, etc.), then it creates a markup out of that tree and returns it.

Input markup (e.\+g. {\ttfamily $<$p id=\char`\"{}\char`\"{}$>$foo})

↓

Internal representation of markup in a form of tree (e.\+g. {\ttfamily \{ tag\+: \char`\"{}p\char`\"{}, attr\+: \char`\"{}id\char`\"{}, children\+: \mbox{[}\char`\"{}foo\char`\"{}\mbox{]} \}})

↓

Transformation of internal representation (e.\+g. removal of {\ttfamily id} attribute)

↓

Output of resulting markup (e.\+g. {\ttfamily $<$p$>$foo$<$/p$>$})

H\+T\+M\+L\+Minifier can\textquotesingle{}t know that original markup was only half of the tree; it does its best to try to parse it as a full tree and it loses information about tree being malformed or partial in the beginning. As a result, it can\textquotesingle{}t create a partial/malformed tree at the time of the output.

\subsection*{Installation Instructions}

From N\+PM for use as a command line app\+:


\begin{DoxyCode}
npm install html-minifier -g
\end{DoxyCode}


From N\+PM for programmatic use\+:


\begin{DoxyCode}
npm install html-minifier
\end{DoxyCode}


From Git\+:


\begin{DoxyCode}
git clone git://github.com/kangax/html-minifier.git
cd html-minifier
npm link .
\end{DoxyCode}


\subsection*{Usage}

For command line usage please see {\ttfamily html-\/minifier -\/-\/help}

\subsubsection*{Node.\+js}


\begin{DoxyCode}
var minify = require('html-minifier').minify;
var result = minify('<p title="blah" id="moo">foo</p>', \{
  removeAttributeQuotes: true
\});
result; // '<p title=blah id=moo>foo</p>'
\end{DoxyCode}


\subsection*{Running benchmarks}

Benchmarks for minified H\+T\+ML\+:


\begin{DoxyCode}
node benchmark.js
\end{DoxyCode}
 