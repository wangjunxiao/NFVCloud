\href{https://www.patreon.com/ionicabizau}{\tt } \href{http://amzn.eu/hRo9sIZ}{\tt } \href{https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=RVXDDLKKLQRJW}{\tt } \href{https://travis-ci.org/IonicaBizau/anser/}{\tt } \href{https://www.npmjs.com/package/anser}{\tt } \href{https://www.npmjs.com/package/anser}{\tt }

\begin{quote}
A low level parser for A\+N\+SI sequences. \end{quote}


\subsection*{\+:rocket\+: Features}


\begin{DoxyItemize}
\item Converts text containing \href{http://en.wikipedia.org/wiki/ANSI_escape_code#Colors}{\tt A\+N\+SI color escape codes} into equivalent H\+T\+ML elements.
\item Allows converting the input into J\+S\+ON output.
\item H\+T\+ML escaping
\item Converts links into H\+T\+ML elements
\item Friendly A\+P\+Is to use with virtual dom libraries
\end{DoxyItemize}

\subsection*{\+:cloud\+: Installation}


\begin{DoxyCode}
$ npm i --save anser
\end{DoxyCode}


\subsection*{\+:clipboard\+: Example}


\begin{DoxyCode}
const Anser = require("anser");

const txt = "\(\backslash\)u001b[38;5;196mHello\(\backslash\)u001b[39m \(\backslash\)u001b[48;5;226mWorld\(\backslash\)u001b[49m";

console.log(Anser.ansiToHtml(txt));
// <span style="color:rgb(255, 0, 0)">Hello</span> <span style="background-color:rgb(255, 255,
       0)">World</span>

console.log(Anser.ansiToHtml(txt, \{ use\_classes: true \}));
// <span class="ansi-palette-196-fg">Hello</span> <span class="ansi-palette-226-bg">World</span>

console.log(Anser.ansiToJson(txt));
// [ \{ content: '',
//     fg: null,
//     bg: null,
//     fg\_truecolor: null,
//     bg\_truecolor: null,
//     clearLine: undefined,
//     decoration: null,
//     was\_processed: false,
//     isEmpty: [Function: isEmpty] \},
//   \{ content: 'Hello',
//     fg: '255, 0, 0',
//     bg: null,
//     fg\_truecolor: null,
//     bg\_truecolor: null,
//     clearLine: false,
//     decoration: null,
//     was\_processed: true,
//     isEmpty: [Function: isEmpty] \},
//   \{ content: ' ',
//     fg: null,
//     bg: null,
//     fg\_truecolor: null,
//     bg\_truecolor: null,
//     clearLine: false,
//     decoration: null,
//     was\_processed: false,
//     isEmpty: [Function: isEmpty] \},
//   \{ content: 'World',
//     fg: null,
//     bg: '255, 255, 0',
//     fg\_truecolor: null,
//     bg\_truecolor: null,
//     clearLine: false,
//     decoration: null,
//     was\_processed: true,
//     isEmpty: [Function: isEmpty] \},
//   \{ content: '',
//     fg: null,
//     bg: null,
//     fg\_truecolor: null,
//     bg\_truecolor: null,
//     clearLine: false,
//     decoration: null,
//     was\_processed: false,
//     isEmpty: [Function: isEmpty] \} ]
\end{DoxyCode}


When using {\bfseries Typescript} you can do the following\+: 
\begin{DoxyCode}
import Anser from 'anser'; // make sure to NOT use curly braces!
const txt = "\(\backslash\)u001b[38;5;196mHello\(\backslash\)u001b[39m \(\backslash\)u001b[48;5;226mWorld\(\backslash\)u001b[49m";
console.log(Anser.ansiToHtml(txt));
// <span style="color:rgb(255, 0, 0)">Hello</span> <span style="background-color:rgb(255, 255,
       0)">World</span>
\end{DoxyCode}


\subsection*{\+:question\+: Get Help}

There are few ways to get help\+:


\begin{DoxyEnumerate}
\item Please \href{https://stackoverflow.com/questions/ask}{\tt post questions on Stack Overflow}. You can open issues with questions, as long you add a link to your Stack Overflow question.
\item For bug reports and feature requests, open issues. \+:bug\+:
\item For direct and quick help, you can \href{https://www.codementor.io/johnnyb}{\tt use Codementor}. \+:rocket\+:
\end{DoxyEnumerate}

\subsection*{\+:memo\+: Documentation}

\subsubsection*{{\ttfamily Anser.\+escape\+For\+Html(txt)}}

Escape the input H\+T\+ML.

This does the minimum escaping of text to make it compliant with H\+T\+ML. In particular, the \textquotesingle{}\&\textquotesingle{},\textquotesingle{}$<$\textquotesingle{}, and \textquotesingle{}$>$\textquotesingle{} characters are escaped. This should be run prior to {\ttfamily ansi\+To\+Html}.

\paragraph*{Params}


\begin{DoxyItemize}
\item {\bfseries String} {\ttfamily txt}\+: The input text (containing the A\+N\+SI snippets).
\end{DoxyItemize}

\paragraph*{Return}


\begin{DoxyItemize}
\item {\bfseries String} The escaped html.
\end{DoxyItemize}

\subsubsection*{{\ttfamily Anser.\+linkify(txt)}}

Adds the links in the H\+T\+ML.

This replaces any links in the text with anchor tags that display the link. The links should have at least one whitespace character surrounding it. Also, you should apply this after you have run {\ttfamily ansi\+To\+Html} on the text.

\paragraph*{Params}


\begin{DoxyItemize}
\item {\bfseries String} {\ttfamily txt}\+: The input text.
\end{DoxyItemize}

\paragraph*{Return}


\begin{DoxyItemize}
\item {\bfseries String} The H\+T\+ML containing the  tags (unescaped).
\end{DoxyItemize}

\subsubsection*{{\ttfamily Anser.\+ansi\+To\+Html(txt, options)}}

This replaces A\+N\+SI terminal escape codes with S\+P\+AN tags that wrap the content.

This function only interprets A\+N\+SI S\+GR (Select Graphic Rendition) codes that can be represented in H\+T\+ML. For example, cursor movement codes are ignored and hidden from output. The default style uses colors that are very close to the prescribed standard. The standard assumes that the text will have a black background. These colors are set as inline styles on the S\+P\+AN tags.

Another option is to set {\ttfamily use\+\_\+classes\+: true} in the options argument. This will instead set classes on the spans so the colors can be set via C\+SS. The class names used are of the format {\ttfamily ansi-\/$\ast$-\/fg/bg} and {\ttfamily ansi-\/bright-\/$\ast$-\/fg/bg} where {\ttfamily $\ast$} is the color name, i.\+e black/red/green/yellow/blue/magenta/cyan/white.

\paragraph*{Params}


\begin{DoxyItemize}
\item {\bfseries String} {\ttfamily txt}\+: The input text.
\item {\bfseries Object} {\ttfamily options}\+: The options passed to the ansi\+To\+H\+T\+ML method.
\end{DoxyItemize}

\paragraph*{Return}


\begin{DoxyItemize}
\item {\bfseries String} The H\+T\+ML output.
\end{DoxyItemize}

\subsubsection*{{\ttfamily Anser.\+ansi\+To\+Json(txt, options)}}

Converts A\+N\+SI input into J\+S\+ON output.

\paragraph*{Params}


\begin{DoxyItemize}
\item {\bfseries String} {\ttfamily txt}\+: The input text.
\item {\bfseries Object} {\ttfamily options}\+: The options passed to the ansi\+To\+H\+T\+ML method.
\end{DoxyItemize}

\paragraph*{Return}


\begin{DoxyItemize}
\item {\bfseries String} The H\+T\+ML output.
\end{DoxyItemize}

\subsubsection*{{\ttfamily Anser.\+ansi\+To\+Text(txt)}}

Converts A\+N\+SI input into text output.

\paragraph*{Params}


\begin{DoxyItemize}
\item {\bfseries String} {\ttfamily txt}\+: The input text.
\end{DoxyItemize}

\paragraph*{Return}


\begin{DoxyItemize}
\item {\bfseries String} The text output.
\end{DoxyItemize}

\subsubsection*{{\ttfamily Anser()}}

The {\ttfamily Anser} class.

\paragraph*{Return}


\begin{DoxyItemize}
\item {\bfseries Anser}
\end{DoxyItemize}

\subsubsection*{{\ttfamily setup\+Palette()}}

Sets up the palette.

\subsubsection*{{\ttfamily escape\+For\+Html(txt)}}

Escapes the input text.

\paragraph*{Params}


\begin{DoxyItemize}
\item {\bfseries String} {\ttfamily txt}\+: The input text.
\end{DoxyItemize}

\paragraph*{Return}


\begin{DoxyItemize}
\item {\bfseries String} The escpaed H\+T\+ML output.
\end{DoxyItemize}

\subsubsection*{{\ttfamily linkify(txt)}}

Adds H\+T\+ML link elements.

\paragraph*{Params}


\begin{DoxyItemize}
\item {\bfseries String} {\ttfamily txt}\+: The input text.
\end{DoxyItemize}

\paragraph*{Return}


\begin{DoxyItemize}
\item {\bfseries String} The H\+T\+ML output containing link elements.
\end{DoxyItemize}

\subsubsection*{{\ttfamily ansi\+To\+Html(txt, options)}}

Converts A\+N\+SI input into H\+T\+ML output.

\paragraph*{Params}


\begin{DoxyItemize}
\item {\bfseries String} {\ttfamily txt}\+: The input text.
\item {\bfseries Object} {\ttfamily options}\+: The options passed ot the {\ttfamily process} method.
\end{DoxyItemize}

\paragraph*{Return}


\begin{DoxyItemize}
\item {\bfseries String} The H\+T\+ML output.
\end{DoxyItemize}

\subsubsection*{{\ttfamily ansi\+To\+Json(txt, options)}}

Converts A\+N\+SI input into H\+T\+ML output.

\paragraph*{Params}


\begin{DoxyItemize}
\item {\bfseries String} {\ttfamily txt}\+: The input text.
\item {\bfseries Object} {\ttfamily options}\+: The options passed ot the {\ttfamily process} method.
\end{DoxyItemize}

\paragraph*{Return}


\begin{DoxyItemize}
\item {\bfseries String} The J\+S\+ON output.
\end{DoxyItemize}

\subsubsection*{{\ttfamily ansi\+To\+Text(txt)}}

Converts A\+N\+SI input into H\+T\+ML output.

\paragraph*{Params}


\begin{DoxyItemize}
\item {\bfseries String} {\ttfamily txt}\+: The input text.
\end{DoxyItemize}

\paragraph*{Return}


\begin{DoxyItemize}
\item {\bfseries String} The text output.
\end{DoxyItemize}

\subsubsection*{{\ttfamily process(txt, options, markup)}}

Processes the input.

\paragraph*{Params}


\begin{DoxyItemize}
\item {\bfseries String} {\ttfamily txt}\+: The input text.
\item {\bfseries Object} {\ttfamily options}\+: An object passed to {\ttfamily process\+Chunk} method, extended with\+:
\begin{DoxyItemize}
\item {\ttfamily json} (Boolean)\+: If {\ttfamily true}, the result will be an object.
\item {\ttfamily use\+\_\+classes} (Boolean)\+: If {\ttfamily true}, H\+T\+ML classes will be appended to the H\+T\+ML output.
\end{DoxyItemize}
\item {\bfseries Boolean} {\ttfamily markup}\+:
\end{DoxyItemize}

\subsubsection*{{\ttfamily process\+Chunk\+Json(text, options, markup)}}

Processes the current chunk into json output.

\paragraph*{Params}


\begin{DoxyItemize}
\item {\bfseries String} {\ttfamily text}\+: The input text.
\item {\bfseries Object} {\ttfamily options}\+: An object containing the following fields\+:
\begin{DoxyItemize}
\item {\ttfamily json} (Boolean)\+: If {\ttfamily true}, the result will be an object.
\item {\ttfamily use\+\_\+classes} (Boolean)\+: If {\ttfamily true}, H\+T\+ML classes will be appended to the H\+T\+ML output.
\end{DoxyItemize}
\item {\bfseries Boolean} {\ttfamily markup}\+: If false, the colors will not be parsed.
\end{DoxyItemize}

\paragraph*{Return}


\begin{DoxyItemize}
\item {\bfseries Object} The result object\+:
\begin{DoxyItemize}
\item {\ttfamily content} (String)\+: The text.
\item {\ttfamily fg} (String$\vert$null)\+: The foreground color.
\item {\ttfamily bg} (String$\vert$null)\+: The background color.
\item {\ttfamily fg\+\_\+truecolor} (String$\vert$null)\+: The foreground true color (if 16m color is enabled).
\item {\ttfamily bg\+\_\+truecolor} (String$\vert$null)\+: The background true color (if 16m color is enabled).
\item {\ttfamily clear\+Line} (Boolean)\+: {\ttfamily true} if a carriage\+Return  was fount at end of line.
\item {\ttfamily was\+\_\+processed} (Bolean)\+: {\ttfamily true} if the colors were processed, {\ttfamily false} otherwise.
\item {\ttfamily is\+Empty} (Function)\+: A function returning {\ttfamily true} if the content is empty, or {\ttfamily false} otherwise.
\end{DoxyItemize}
\end{DoxyItemize}

\subsubsection*{{\ttfamily process\+Chunk(text, options, markup)}}

Processes the current chunk of text.

\paragraph*{Params}


\begin{DoxyItemize}
\item {\bfseries String} {\ttfamily text}\+: The input text.
\item {\bfseries Object} {\ttfamily options}\+: An object containing the following fields\+:
\begin{DoxyItemize}
\item {\ttfamily json} (Boolean)\+: If {\ttfamily true}, the result will be an object.
\item {\ttfamily use\+\_\+classes} (Boolean)\+: If {\ttfamily true}, H\+T\+ML classes will be appended to the H\+T\+ML output.
\end{DoxyItemize}
\item {\bfseries Boolean} {\ttfamily markup}\+: If false, the colors will not be parsed.
\end{DoxyItemize}

\paragraph*{Return}


\begin{DoxyItemize}
\item {\bfseries Object$\vert$\+String} The result (object if {\ttfamily json} is wanted back or string otherwise).
\end{DoxyItemize}

\subsection*{\+:yum\+: How to contribute}

Have an idea? Found a bug? See /\+C\+O\+N\+T\+R\+I\+B\+U\+T\+I\+NG.md \char`\"{}how to contribute\char`\"{}.

\subsection*{\+:sparkling\+\_\+heart\+: Support my projects}

I open-\/source almost everything I can, and I try to reply everyone needing help using these projects. Obviously, this takes time. You can integrate and use these projects in your applications {\itshape for free}! You can even change the source code and redistribute (even resell it).

However, if you get some profit from this or just want to encourage me to continue creating stuff, there are few ways you can do it\+:


\begin{DoxyItemize}
\item Starring and sharing the projects you like \+:rocket\+:
\item \href{https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=RVXDDLKKLQRJW}{\tt }—\+You can make one-\/time donations via Pay\+Pal. I\textquotesingle{}ll probably buy a $\sim$$\sim$coffee$\sim$$\sim$ tea. \+:tea\+:
\item \href{https://www.patreon.com/ionicabizau}{\tt }—\+Set up a recurring monthly donation and you will get interesting news about what I\textquotesingle{}m doing (things that I don\textquotesingle{}t share with everyone).
\item $\ast$$\ast$\+Bitcoin$\ast$$\ast$—\+You can send me bitcoins at this address (or scanning the code below)\+: {\ttfamily 1\+P9\+B\+Rsmaz\+N\+Qcuy\+Tx\+Eqve\+Usnf5\+C\+E\+Rdq35\+V6}


\end{DoxyItemize}

Thanks! \+:heart\+:

\subsection*{\+:cake\+: Thanks}

This project is highly based on \href{https://github.com/drudru/ansi_up}{\tt {\ttfamily ansi\+\_\+up}}, by \href{https://github.com/drudru/}{\tt }. Thanks! \+:cake\+:

\subsection*{\+:dizzy\+: Where is this library used?}

If you are using this library in one of your projects, add it in this list. \+:sparkles\+:


\begin{DoxyItemize}
\item \href{https://npmjs.com/package/ansi-html-themed}{\tt {\ttfamily ansi-\/html-\/themed}} (by Joe Haddad)—\+Turns chalked code into pretty html.
\item \href{https://github.com/IonicaBizau/ansi-to-json#readme}{\tt {\ttfamily ansi-\/to-\/json}}—\+Convert A\+N\+SI strings into J\+S\+ON output.
\item \href{https://github.com/nteract/ansi-to-react#readme}{\tt {\ttfamily ansi-\/to-\/react}} (by Kyle Kelley)—\+A\+N\+SI to React Elements
\item \href{https://npmjs.com/package/ansi-to-react-with-classes}{\tt {\ttfamily ansi-\/to-\/react-\/with-\/classes}} (by Kyle Kelley)—\+A\+N\+SI to React Elements
\item \href{https://github.com/cyclejs-community/create-cycle-app#readme}{\tt {\ttfamily cycle-\/dev-\/utils}} (by Nick Balestra)—undefined
\item \href{https://github.com/infernojs/create-inferno-app#readme}{\tt {\ttfamily inferno-\/dev-\/utils}}—\+Webpack utilities used by Create Inferno App
\item \href{https://github.com/channl/create-lambda-app#readme}{\tt {\ttfamily lambda-\/dev-\/utils}}—\+Webpack utilities used by Create Lambda App
\item \href{https://github.com/dariushuntly/nterm/issues}{\tt {\ttfamily nterm}} (by Darius Huntly)—A Node Terminal
\item \href{https://github.com/facebookincubator/create-react-app#readme}{\tt {\ttfamily react-\/dev-\/utils}}—\+Webpack utilities used by Create React App
\item \href{https://github.com/facebookincubator/create-react-app-extra#readme}{\tt {\ttfamily react-\/dev-\/utils-\/extra}}—\+Webpack utilities used by Create React App
\item \href{https://github.com/facebookincubator/create-react-app#readme}{\tt {\ttfamily react-\/dev-\/utils-\/sebfl-\/update}}—\+Webpack utilities used by Create React App
\item \href{https://github.com/facebookincubator/create-react-app#readme}{\tt {\ttfamily react-\/error-\/overlay}} (by Joe Haddad)—\+An overlay for displaying stack frames.
\item \href{https://github.com/HubSpot/Singularity#readme}{\tt {\ttfamily singularityui-\/tailer}} (by Danny Wolf)—A robust log tailer
\item \href{https://npmjs.com/package/stack-frame-overlay}{\tt {\ttfamily stack-\/frame-\/overlay}} (by Joe Haddad)—\+An overlay for displaying stack frames.
\item \href{https://github.com/facebookincubator/create-react-app#readme}{\tt {\ttfamily timer-\/react-\/dev-\/utils}}—\+Webpack utilities used by Create React App
\item \href{https://github.com/nteract/transformime#readme}{\tt {\ttfamily transformime}} (by nteract)—\+Transforms M\+I\+M\+Etypes to H\+T\+ML Elements
\item \href{https://github.com/facebookincubator/create-react-app#readme}{\tt {\ttfamily uyun-\/react-\/dev-\/utils}}—\+Webpack utilities used by Create React App
\item \href{https://github.com/moxystudio/webpack-isomorphic-dev-middleware}{\tt {\ttfamily webpack-\/isomorphic-\/dev-\/middleware}} (by André Cruz)—\+The webpack-\/dev-\/middleware, but for isomorphic applications.
\end{DoxyItemize}

\subsection*{\+:scroll\+: License}

\href{http://showalicense.com/?fullname=Ionic%C4%83%20Biz%C4%83u%20%3Cbizauionica%40gmail.com%3E%20(https%3A%2F%2Fionicabizau.net)&year=2012#license-mit}{\tt M\+IT} © \href{https://ionicabizau.net}{\tt Ionică Bizău} 