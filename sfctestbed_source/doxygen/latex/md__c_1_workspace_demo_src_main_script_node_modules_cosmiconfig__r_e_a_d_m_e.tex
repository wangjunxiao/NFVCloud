\href{https://travis-ci.org/davidtheclark/cosmiconfig}{\tt } \href{https://ci.appveyor.com/project/davidtheclark/cosmiconfig/branch/master}{\tt }

Find and load a configuration object from
\begin{DoxyItemize}
\item a {\ttfamily package.\+json} property (anywhere down the file tree)
\item a J\+S\+ON or Y\+A\+ML \char`\"{}rc file\char`\"{} (anywhere down the file tree)
\item a {\ttfamily .config.\+js} Common\+JS module (anywhere down the file tree)
\item a C\+LI {\ttfamily -\/-\/config} argument
\end{DoxyItemize}

For example, if your module\textquotesingle{}s name is \char`\"{}soursocks,\char`\"{} cosmiconfig will search out configuration in the following places\+:
\begin{DoxyItemize}
\item a {\ttfamily soursocks} property in {\ttfamily package.\+json} (anywhere down the file tree)
\item a {\ttfamily .soursocksrc} file in J\+S\+ON or Y\+A\+ML format (anywhere down the file tree)
\item a {\ttfamily soursocks.\+config.\+js} file exporting a JS object (anywhere down the file tree)
\item a C\+LI {\ttfamily -\/-\/config} argument
\end{DoxyItemize}

cosmiconfig continues to search in these places all the way down the file tree until it finds acceptable configuration (or hits the home directory). And it does all this asynchronously, so it shouldn\textquotesingle{}t get in your way.

Additionally, all of these search locations are configurable\+: you can customize filenames or turn off any location.

You can also look for rc files with extensions, e.\+g. {\ttfamily .soursocksrc.\+json} or {\ttfamily .soursocksrc.\+yaml}. You may like extensions on your rc files because you\textquotesingle{}ll get syntax highlighting and linting in text editors.

\subsection*{Installation}


\begin{DoxyCode}
npm install cosmiconfig
\end{DoxyCode}


Tested in Node 0.\+12+.

\subsection*{Usage}


\begin{DoxyCode}
var cosmiconfig = require('cosmiconfig');

var explorer = cosmiconfig(yourModuleName[, options]);

explorer.load(yourSearchPath)
  .then((result) => \{
    // result.config is the parsed configuration object
    // result.filepath is the path to the config file that was found
  \})
  .catch((parsingError) => \{
    // do something constructive
  \});
\end{DoxyCode}


The function {\ttfamily cosmiconfig()} searches for a configuration object and returns a Promise, which resolves with an object containing the information you\textquotesingle{}re looking for.

So let\textquotesingle{}s say `var your\+Module\+Name = \textquotesingle{}goldengrahams'\`{} — here\textquotesingle{}s how cosmiconfig will work\+:


\begin{DoxyItemize}
\item Starting from {\ttfamily process.\+cwd()} (or some other directory defined by the {\ttfamily search\+Path} argument to {\ttfamily load()}), it looks for configuration objects in three places, in this order\+:
\begin{DoxyEnumerate}
\item A {\ttfamily goldengrahams} property in a {\ttfamily package.\+json} file (or some other property defined by {\ttfamily options.\+package\+Prop});
\item A {\ttfamily .goldengrahamsrc} file with J\+S\+ON or Y\+A\+ML syntax (or some other filename defined by {\ttfamily options.\+rc});
\item A {\ttfamily goldengrahams.\+config.\+js} JS file exporting the object (or some other filename defined by {\ttfamily options.\+js}).
\end{DoxyEnumerate}
\item If none of those searches reveal a configuration object, it moves down one directory and tries again. So the search continues in {\ttfamily ./}, {\ttfamily ../}, {\ttfamily ../../}, {\ttfamily ../../../}, etc., checking those three locations in each directory.
\item It continues searching until it arrives at your home directory (or some other directory defined by {\ttfamily options.\+stop\+Dir}).
\item If at any point a parseable configuration is found, the {\ttfamily cosmiconfig()} Promise resolves with its result object.
\item If no configuration object is found, the {\ttfamily cosmiconfig()} Promise resolves with {\ttfamily null}.
\item If a configuration object is found {\itshape but is malformed} (causing a parsing error), the {\ttfamily cosmiconfig()} Promise rejects and shares that error (so you should {\ttfamily .catch()} it).
\end{DoxyItemize}

All this searching can be short-\/circuited by passing {\ttfamily options.\+config\+Path} or a {\ttfamily -\/-\/config} C\+LI argument to specify a file. cosmiconfig will read that file and try parsing it as J\+S\+ON, Y\+A\+ML, or JS.

\subsection*{Caching}

As of v2, cosmiconfig uses a few caches to reduce the need for repetitious reading of the filesystem. Every new cosmiconfig instance (created with {\ttfamily cosmiconfig()}) has its own caches.

To avoid or work around caching, you can
\begin{DoxyItemize}
\item create separate instances of cosmiconfig, or
\item set {\ttfamily cache\+: false} in your options.
\item use the cache clearing methods documented below.
\end{DoxyItemize}

\subsection*{A\+PI}

\subsubsection*{{\ttfamily var explorer = cosmiconfig(module\+Name\mbox{[}, options\mbox{]})}}

Creates a cosmiconfig instance (i.\+e. explorer) configured according to the arguments, and initializes its caches.

\paragraph*{module\+Name}

Type\+: {\ttfamily string}

You module name. This is used to create the default filenames that cosmiconfig will look for.

\paragraph*{Options}

\subparagraph*{package\+Prop}

Type\+: {\ttfamily string} or {\ttfamily false} Default\+: `'\mbox{[}module\+Name\mbox{]}\textquotesingle{}\`{}

Name of the property in {\ttfamily package.\+json} to look for.

If {\ttfamily false}, cosmiconfig will not look in {\ttfamily package.\+json} files.

\subparagraph*{rc}

Type\+: {\ttfamily string} or {\ttfamily false} Default\+: `'.\mbox{[}module\+Name\mbox{]}rc\textquotesingle{}\`{}

Name of the \char`\"{}rc file\char`\"{} to look for, which can be formatted as J\+S\+ON or Y\+A\+ML.

If {\ttfamily false}, cosmiconfig will not look for an rc file.

If {\ttfamily rc\+Extensions\+: true}, the rc file can also have extensions that specify the syntax, e.\+g. {\ttfamily .\mbox{[}module\+Name\mbox{]}rc.\+json}. You may like extensions on your rc files because you\textquotesingle{}ll get syntax highlighting and linting in text editors. Also, with {\ttfamily rc\+Extensions\+: true}, you can use JS modules as rc files, e.\+g. {\ttfamily .\mbox{[}module\+Name\mbox{]}rc.\+js}.

\subparagraph*{js}

Type\+: {\ttfamily string} or {\ttfamily false} Default\+: `'\mbox{[}module\+Name\mbox{]}.config.\+js\textquotesingle{}\`{}

Name of a JS file to look for, which must export the configuration object.

If {\ttfamily false}, cosmiconfig will not look for a JS file.

\subparagraph*{argv}

Type\+: {\ttfamily string} or {\ttfamily false} Default\+: `\textquotesingle{}config'\`{}

Name of a {\ttfamily process.\+argv} argument to look for, whose value should be the path to a configuration file. cosmiconfig will read the file and try to parse it as J\+S\+ON, Y\+A\+ML, or JS. By default, cosmiconfig looks for {\ttfamily -\/-\/config}.

If {\ttfamily false}, cosmiconfig will not look for any {\ttfamily process.\+argv} arguments.

\subparagraph*{rc\+Strict\+Json}

Type\+: {\ttfamily boolean} Default\+: {\ttfamily false}

If {\ttfamily true}, cosmiconfig will expect rc files to be strict J\+S\+ON. No Y\+A\+ML permitted, and no sloppy J\+S\+ON.

By default, rc files are parsed with \href{https://github.com/nodeca/js-yaml}{\tt js-\/yaml}, which is more permissive with punctuation than standard strict J\+S\+ON.

\subparagraph*{rc\+Extensions}

Type\+: {\ttfamily boolean} Default\+: {\ttfamily false}

If {\ttfamily true}, cosmiconfig will look for rc files with extensions, in addition to rc files without.

This adds a few steps to the search process. Instead of {\itshape just} looking for {\ttfamily .goldengrahamsrc} (no extension), it will also look for the following, in this order\+:


\begin{DoxyItemize}
\item {\ttfamily .goldengrahamsrc.\+json}
\item {\ttfamily .goldengrahamsrc.\+yaml}
\item {\ttfamily .goldengrahamsrc.\+yml}
\item {\ttfamily .goldengrahamsrc.\+js}
\end{DoxyItemize}

\subparagraph*{stop\+Dir}

Type\+: {\ttfamily string} Default\+: Absolute path to your home directory

Directory where the search will stop.

\subparagraph*{cache}

Type\+: {\ttfamily boolean} Default\+: {\ttfamily true}

If {\ttfamily false}, no caches will be used.

\subparagraph*{transform}

Type\+: {\ttfamily Function} returning a Promise

A function that transforms the parsed configuration. Receives the result object with {\ttfamily config} and {\ttfamily filepath} properties, and must return a Promise that resolves with the transformed result.

The reason you might use this option instead of simply applying your transform function some other way is that {\itshape the transformed result will be cached}. If your transformation involves additional filesystem I/O or other potentially slow processing, you can use this option to avoid repeating those steps every time a given configuration is loaded.

\subsubsection*{Instance methods (on {\ttfamily explorer})}

\paragraph*{{\ttfamily load(\mbox{[}search\+Path, config\+Path\mbox{]})}}

Find and load a configuration file. Returns a Promise that resolves with {\ttfamily null}, if nothing is found, or an object with two properties\+:
\begin{DoxyItemize}
\item {\ttfamily config}\+: The loaded and parsed configuration.
\item {\ttfamily filepath}\+: The filepath where this configuration was found.
\end{DoxyItemize}

You should provide {\itshape either} {\ttfamily search\+Path} {\itshape or} {\ttfamily config\+Path}. Use {\ttfamily config\+Path} if you know the path of the configuration file you want to load. Otherwise, use {\ttfamily search\+Path}.


\begin{DoxyCode}
explorer.load('start/search/here');
explorer.load('start/search/at/this/file.css');

explorer.load(null, 'load/this/file.json');
\end{DoxyCode}


If you provide {\ttfamily search\+Path}, cosmiconfig will start its search at {\ttfamily search\+Path} and continue to search up the file tree, as documented above.

If you provide {\ttfamily config\+Path} (i.\+e. you already know where the configuration is that you want to load), cosmiconfig will try to read and parse that file.

\paragraph*{{\ttfamily clear\+File\+Cache()}}

Clears the cache used when you provide a {\ttfamily config\+Path} argument to {\ttfamily load}.

\paragraph*{{\ttfamily clear\+Directory\+Cache()}}

Clears the cache used when you provide a {\ttfamily search\+Path} argument to {\ttfamily load}.

\paragraph*{{\ttfamily clear\+Caches()}}

Performs both {\ttfamily clear\+File\+Cache()} and {\ttfamily clear\+Directory\+Cache()}.

\subsection*{Differences from \href{https://github.com/dominictarr/rc}{\tt rc}}

\href{https://github.com/dominictarr/rc}{\tt rc} serves its focused purpose well. cosmiconfig differs in a few key ways — making it more useful for some projects, less useful for others\+:


\begin{DoxyItemize}
\item Looks for configuration in some different places\+: in a {\ttfamily package.\+json} property, an rc file, a {\ttfamily .config.\+js} file, and rc files with extensions.
\item Built-\/in support for J\+S\+ON, Y\+A\+ML, and Common\+JS formats.
\item Stops at the first configuration found, instead of finding all that can be found down the filetree and merging them automatically.
\item Options.
\item Asynchronicity.
\end{DoxyItemize}

\subsection*{Contributing \& Development}

Please note that this project is released with a Contributor Code of Conduct. By participating in this project you agree to abide by its terms.

And please do participate! 