Throttle the parallelism of an asynchronous, promise returning, function / functions. This has special utility when you set the concurrency to {\ttfamily 1}. That way you get a mutually exclusive lock.

\href{https://travis-ci.org/ForbesLindesay/throat}{\tt } \href{https://coveralls.io/r/ForbesLindesay/throat?branch=master}{\tt } \href{https://david-dm.org/ForbesLindesay/throat}{\tt } \href{https://www.npmjs.com/package/throat}{\tt } \href{https://greenkeeper.io/}{\tt }

\href{https://saucelabs.com/u/throat}{\tt }

\subsection*{Installation}

\begin{DoxyVerb}npm install throat
\end{DoxyVerb}


\subsection*{A\+PI}

\subsubsection*{throat(concurrency)}

This returns a function that acts a bit like a lock (exactly as a lock if concurrency is 1).

Example, only 2 of the following functions will execute at any one time\+:


\begin{DoxyCode}
// with polyfill or in iojs
require('promise/polyfill')
var throat = require('throat')(2)
// alternatively provide your own promise implementation
var throat = require('throat')(require('promise'))(2)

var resA = throat(function () \{
  //async stuff
  return promise
\})
var resA = throat(function () \{
  //async stuff
  return promise
\})
var resA = throat(function () \{
  //async stuff
  return promise
\})
var resA = throat(function () \{
  //async stuff
  return promise
\})
var resA = throat(function () \{
  //async stuff
  return promise
\})
\end{DoxyCode}


\subsubsection*{throat(concurrency, worker)}

This returns a function that is an exact copy of {\ttfamily worker} except that it will only execute up to {\ttfamily concurrency} times in parallel before further requests are queued\+:


\begin{DoxyCode}
// with polyfill or in iojs
require('promise/polyfill')
var throat = require('throat')
// alternatively provide your own promise implementation
var throat = require('throat')(require('promise'))

var input = ['fileA.txt', 'fileB.txt', 'fileC.txt', 'fileD.txt']
var data = Promise.all(input.map(throat(2, function (fileName) \{
  return readFile(fileName)
\})))
\end{DoxyCode}


Only 2 files will be read at a time, sometimes limiting parallelism in this way can improve scalability.

\subsection*{License}

M\+IT 