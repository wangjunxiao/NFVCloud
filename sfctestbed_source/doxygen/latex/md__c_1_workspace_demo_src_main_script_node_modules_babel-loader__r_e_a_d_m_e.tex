\href{https://www.npmjs.com/package/babel-loader}{\tt } \href{https://travis-ci.org/babel/babel-loader}{\tt } \href{https://ci.appveyor.com/project/danez/babel-loader/branch/master}{\tt } \href{https://codecov.io/gh/babel/babel-loader}{\tt }

 \href{https://github.com/babel/babel/}{\tt } \href{https://github.com/webpack/webpack}{\tt } \section*{Babel Loader}

 

This package allows transpiling Java\+Script files using \href{https://github.com/babel/babel}{\tt Babel} and \href{https://github.com/webpack/webpack}{\tt webpack}.

{\bfseries Notes\+:} Issues with the output should be reported on the babel \href{https://github.com/babel/babel/issues}{\tt issue tracker};

\subsection*{Install}

\begin{quote}
webpack 1.\+x $\vert$ babel-\/loader $<$= 6.\+x

webpack 2.\+x $\vert$Â babel-\/loader $>$= 7.\+x (recommended) ($^\wedge$6.2.\+10 will also work, but with deprecation warnings) \end{quote}



\begin{DoxyCode}
yarn add babel-loader babel-core babel-preset-env webpack --dev
\end{DoxyCode}


We recommend using yarn, but you can also still use npm\+:


\begin{DoxyCode}
npm install --save-dev babel-loader babel-core babel-preset-env webpack
\end{DoxyCode}


\subsection*{Usage}

\href{https://webpack.js.org/loaders/}{\tt Documentation\+: Using loaders}

Within your webpack configuration object, you\textquotesingle{}ll need to add the babel-\/loader to the list of modules, like so\+:


\begin{DoxyCode}
module: \{
  rules: [
    \{
      test: /\(\backslash\).js$/,
      exclude: /(node\_modules|bower\_components)/,
      use: \{
        loader: 'babel-loader',
        options: \{
          presets: ['env']
        \}
      \}
    \}
  ]
\}
\end{DoxyCode}


\subsubsection*{Options}

See the {\ttfamily babel} \href{https://babeljs.io/docs/usage/api/#options}{\tt options}.

You can pass options to the loader by using the \href{https://webpack.js.org/configuration/module/#rule-options-rule-query}{\tt options property}\+:


\begin{DoxyCode}
module: \{
  rules: [
    \{
      test: /\(\backslash\).js$/,
      exclude: /(node\_modules|bower\_components)/,
      use: \{
        loader: 'babel-loader',
        options: \{
          presets: ['env'],
          plugins: [require('babel-plugin-transform-object-rest-spread')]
        \}
      \}
    \}
  ]
\}
\end{DoxyCode}


This loader also supports the following loader-\/specific option\+:


\begin{DoxyItemize}
\item {\ttfamily cache\+Directory}\+: Default {\ttfamily false}. When set, the given directory will be used to cache the results of the loader. Future webpack builds will attempt to read from the cache to avoid needing to run the potentially expensive Babel recompilation process on each run. If the value is blank (`loader\+: \textquotesingle{}babel-\/loader?cache\+Directory'{\ttfamily ) or}true{\ttfamily (}loader\+: babel-\/loader?cache\+Directory=true{\ttfamily ) the loader will use the default cache directory in}node\+\_\+modules/.cache/babel-\/loader{\ttfamily or fallback to the default OS temporary file directory if no}node\+\_\+modules\`{} folder could be found in any root directory.
\item {\ttfamily cache\+Identifier}\+: Default is a string composed by the babel-\/core\textquotesingle{}s version, the babel-\/loader\textquotesingle{}s version, the contents of .babelrc file if it exists and the value of the environment variable {\ttfamily B\+A\+B\+E\+L\+\_\+\+E\+NV} with a fallback to the {\ttfamily N\+O\+D\+E\+\_\+\+E\+NV} environment variable. This can be set to a custom value to force cache busting if the identifier changes.
\item {\ttfamily force\+Env}\+: Default will resolve B\+A\+B\+E\+L\+\_\+\+E\+NV then N\+O\+D\+E\+\_\+\+E\+NV. Allow you to override B\+A\+B\+E\+L\+\_\+\+E\+N\+V/\+N\+O\+D\+E\+\_\+\+E\+NV at the loader level. Useful for isomorphic applications with different babel configuration for client and server.
\end{DoxyItemize}

{\bfseries Note\+:} The {\ttfamily source\+Map} option is ignored, instead source\+Maps are automatically enabled when webpack is configured to use them (via the {\ttfamily devtool} config option).

\subsection*{Troubleshooting}

\subsubsection*{babel-\/loader is slow!}

Make sure you are transforming as few files as possible. Because you are probably matching {\ttfamily /\textbackslash{}.js\$/}, you might be transforming the {\ttfamily node\+\_\+modules} folder or other unwanted source.

To exclude {\ttfamily node\+\_\+modules}, see the {\ttfamily exclude} option in the {\ttfamily loaders} config as documented above.

You can also speed up babel-\/loader by as much as 2x by using the {\ttfamily cache\+Directory} option. This will cache transformations to the filesystem.

\subsubsection*{babel is injecting helpers into each file and bloating my code!}

babel uses very small helpers for common functions such as {\ttfamily \+\_\+extend}. By default this will be added to every file that requires it.

You can instead require the babel runtime as a separate module to avoid the duplication.

The following configuration disables automatic per-\/file runtime injection in babel, instead requiring {\ttfamily babel-\/plugin-\/transform-\/runtime} and making all helper references use it.

See the \href{http://babeljs.io/docs/plugins/transform-runtime/}{\tt docs} for more information.

{\bfseries N\+O\+TE\+:} You must run {\ttfamily npm install babel-\/plugin-\/transform-\/runtime -\/-\/save-\/dev} to include this in your project and {\ttfamily babel-\/runtime} itself as a dependency with {\ttfamily npm install babel-\/runtime -\/-\/save}.


\begin{DoxyCode}
rules: [
  // the 'transform-runtime' plugin tells babel to require the runtime
  // instead of inlining it.
  \{
    test: /\(\backslash\).js$/,
    exclude: /(node\_modules|bower\_components)/,
    use: \{
      loader: 'babel-loader',
      options: \{
        presets: ['env'],
        plugins: ['transform-runtime']
      \}
    \}
  \}
]
\end{DoxyCode}


\paragraph*{$\ast$$\ast$\+N\+O\+TE\+:$\ast$$\ast$ transform-\/runtime \& custom polyfills (e.\+g. Promise library)}

Since \href{https://github.com/babel/babel/tree/master/packages/babel-plugin-transform-runtime}{\tt babel-\/plugin-\/transform-\/runtime} includes a polyfill that includes a custom \href{https://github.com/facebook/regenerator/blob/master/packages/regenerator-runtime/runtime.js}{\tt regenerator runtime} and \href{https://github.com/zloirock/core-js}{\tt core.\+js}, the following usual shimming method using {\ttfamily webpack.\+Provide\+Plugin} will not work\+:


\begin{DoxyCode}
// ...
        new webpack.ProvidePlugin(\{
            'Promise': 'bluebird'
        \}),
// ...
\end{DoxyCode}


The following approach will not work either\+:


\begin{DoxyCode}
require('babel-runtime/core-js/promise').default = require('bluebird');

var promise = new Promise;
\end{DoxyCode}


which outputs to (using {\ttfamily runtime})\+:


\begin{DoxyCode}
'use strict';

var \_Promise = require('babel-runtime/core-js/promise')['default'];

require('babel-runtime/core-js/promise')['default'] = require('bluebird');

var promise = new \_Promise();
\end{DoxyCode}


The previous {\ttfamily Promise} library is referenced and used before it is overridden.

One approach is to have a \char`\"{}bootstrap\char`\"{} step in your application that would first override the default globals before your application\+:


\begin{DoxyCode}
// bootstrap.js

require('babel-runtime/core-js/promise').default = require('bluebird');

// ...

require('./app');
\end{DoxyCode}


\subsubsection*{The node A\+PI for {\ttfamily babel} has been moved to {\ttfamily babel-\/core}.}

If you receive this message it means that you have the npm package {\ttfamily babel} installed and use the short notation of the loader in the webpack config (which is not valid anymore as of webpack 2.\+x)\+: 
\begin{DoxyCode}
\{
  test: /\(\backslash\).js$/,
  loader: 'babel',
\}
\end{DoxyCode}


Webpack then tries to load the {\ttfamily babel} package instead of the {\ttfamily babel-\/loader}.

To fix this you should uninstall the npm package {\ttfamily babel} as it is deprecated in babel v6. (instead install {\ttfamily babel-\/cli} or {\ttfamily babel-\/core}) In the case one of your dependencies is installing {\ttfamily babel} and you cannot uninstall it yourself, use the complete name of the loader in the webpack config\+: 
\begin{DoxyCode}
\{
  test: /\(\backslash\).js$/,
  loader: 'babel-loader',
\}
\end{DoxyCode}


\subsection*{\href{http://couto.mit-license.org/}{\tt License}}