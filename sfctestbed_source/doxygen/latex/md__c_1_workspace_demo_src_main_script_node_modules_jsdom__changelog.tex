
\begin{DoxyItemize}
\item Added the {\ttfamily Option} named constructor. (N\+Alex\+Pear)
\item Added support for the {\ttfamily canvas-\/prebuilt} npm package as an alternative to {\ttfamily canvas}.
\item Fixed {\ttfamily set\+Timeout()} and {\ttfamily set\+Interval()} to always return a positive integer, instead of returning {\ttfamily 0} the first time were called. (yefremov)
\item Fixed {\ttfamily jsdom.\+env()} to preserve \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} fragments across redirects. (josephfrazier)
\item Fixed {\ttfamily option\+El.\+text} and {\ttfamily option\+El.\+value} to be more spec-\/compliant.
\item Fixed {\ttfamily event.\+stop\+Immediate\+Propagation()} to actually stop immediate propagation, not just propagation.
\item Fixed {\ttfamily clear\+Timeout()} and {\ttfamily clear\+Interval()} to work correctly when using jsdom browserified.
\end{DoxyItemize}

\subsection*{9.\+11.\+0}


\begin{DoxyItemize}
\item Added dummy properties {\ttfamily offset\+Top}, {\ttfamily offset\+Left}, {\ttfamily offset\+Width}, and {\ttfamily offset\+Height} that always return {\ttfamily 0}, and {\ttfamily offset\+Parent} which always returns {\ttfamily null}, for all H\+T\+ML elements. (yefremov)
\item Fixed various edge cases in our type conversions applied to method arguments and setters throughout the web platform A\+P\+Is implemented by jsdom.
\end{DoxyItemize}

\subsection*{9.\+10.\+0}


\begin{DoxyItemize}
\item Added {\ttfamily for\+Each}, {\ttfamily keys}, {\ttfamily values}, and {\ttfamily entries} methods to {\ttfamily Node\+List}.
\item Added {\ttfamily event.\+cancel\+Bubble}.
\item Added dummy properties {\ttfamily scroll\+Width}, {\ttfamily scroll\+Height}, {\ttfamily client\+Top}, {\ttfamily client\+Left}, {\ttfamily client\+Width}, and {\ttfamily client\+Height} that always return {\ttfamily 0} to all elements. (alistairjcbrown)
\item Updated many aspects of {\ttfamily Blob}, {\ttfamily File}, and {\ttfamily File\+Reader} to better match the File A\+PI specification. (Timothy\+Gu)
\item Fixed the progress and readystatechange events fired by {\ttfamily X\+M\+L\+Http\+Request} to match recent specification changes and test updates.
\item Fixed {\ttfamily element.\+get\+Client\+Rects()} to return an empty array, instead of an array containing a dummy bounding box. (alistairjcbrown)
\item Changed {\ttfamily navigator.\+vendor} to return {\ttfamily \char`\"{}\+Apple Computer, Inc.\char`\"{}} instead of {\ttfamily \char`\"{}\+Google Inc.\char`\"{}}, since we have chosen the Web\+Kit \href{https://html.spec.whatwg.org/multipage/webappapis.html#concept-navigator-compatibility-mode}{\tt navigator compatibility mode}.
\end{DoxyItemize}

\subsection*{9.\+9.\+1}


\begin{DoxyItemize}
\item Removed the use of {\ttfamily array.\+includes} to fix a compatibility issue with Node.\+js v4.
\end{DoxyItemize}

\subsection*{9.\+9.\+0}


\begin{DoxyItemize}
\item Added {\ttfamily C\+D\+A\+T\+A\+Section} nodes, including {\ttfamily document.\+create\+C\+D\+A\+T\+A\+Section}. (snuggs)
\item Added {\ttfamily node.\+whole\+Text}. (jdanyow)
\item Added a setter for {\ttfamily document.\+body}.
\item Added {\ttfamily document.\+embeds}, {\ttfamily document.\+plugsin}, and {\ttfamily document.\+scripts}. These were supposed to be added in 9.\+5.\+0 but were mistakenly omitted.
\item Fixed {\ttfamily element.\+insert\+Adjacent\+H\+T\+ML} to work when the element has null or the document as its parent node, as long as the insertion position is {\ttfamily \char`\"{}afterbegin\char`\"{}} or {\ttfamily \char`\"{}beforeend\char`\"{}}.
\item Fixed form submission to only hit the \char`\"{}not implemented\char`\"{} virtual console message when form submission is {\itshape not} canceled, instead of when it is.
\item Fixed an issue where the event listener was not being correctly removed when using the {\ttfamily \{ once\+: true \}} option to {\ttfamily add\+Event\+Listener}. (i8-\/pi)
\item Fixed an error that was thrown when using {\ttfamily X\+H\+T\+M\+L\+Http\+Request} and P\+O\+S\+Ting J\+S\+ON contents to an endpoint that requires C\+O\+RS while using an {\ttfamily Authorization} header. (dunnock)
\item Fixed {\ttfamily document.\+body} and {\ttfamily document.\+title} to act more correctly in various edge cases.
\item Fixed {\ttfamily H\+T\+M\+L\+Collection} named access to return the first element encountered, not the last.
\end{DoxyItemize}

\subsection*{9.\+8.\+3}


\begin{DoxyItemize}
\item Fixed syntax errors in Node.\+js v4.
\end{DoxyItemize}

\subsection*{9.\+8.\+2}


\begin{DoxyItemize}
\item Fixed {\ttfamily D\+O\+M\+Token\+List} and {\ttfamily get\+Elements\+By\+Class\+Name} to only split on A\+S\+C\+II whitespace, not all Unicode whitespace.
\end{DoxyItemize}

\subsection*{9.\+8.\+1}


\begin{DoxyItemize}
\item Fixed an error that occurred when passing no class names to {\ttfamily get\+Elements\+By\+Class\+Name}, e.\+g. {\ttfamily get\+Elements\+By\+Class\+Name(\char`\"{}\char`\"{})} or {\ttfamily get\+Elements\+By\+Class\+Name(\char`\"{} \char`\"{})}.
\end{DoxyItemize}

\subsection*{9.\+8.\+0}


\begin{DoxyItemize}
\item Added the {\ttfamily blob.\+is\+Closed} property. (Timothy\+Gu)
\item Fixed the {\ttfamily file.\+last\+Modified} property to be on {\ttfamily File} instead of on {\ttfamily Blob}. (Timothy\+Gu)
\item Fixed the {\ttfamily file.\+last\+Modified} property to default to the time of the {\ttfamily File} object\textquotesingle{}s creation, not the time that the property is accessed. (Timothy\+Gu)
\item Fixed a minor edge-\/case regression where non-\/\+H\+T\+ML elements with the name {\ttfamily \char`\"{}iframe\char`\"{}} became focusable in 9.\+7.\+0.
\end{DoxyItemize}

\subsection*{9.\+7.\+1}


\begin{DoxyItemize}
\item Fixed a performance regression introduced in 9.\+5.\+0 for modifying the D\+OM. It was particularly noticable during initial parsing of a document with many elements; for example, one test showed parsing ten thousand elements taking 36.\+4 seconds, whereas after this fix it is back to a more reasonable 0.\+4 seconds.
\end{DoxyItemize}

\subsection*{9.\+7.\+0}


\begin{DoxyItemize}
\item Added {\ttfamily Event\+Listener\+Options} support to {\ttfamily add\+Event\+Listener} and {\ttfamily remove\+Event\+Listener}, including both the {\ttfamily once} and {\ttfamily capture} options. (Gianluca\+Guarini)
\item Added {\ttfamily document.\+has\+Focus()} (acusti)
\item Fixed the focus management to ensure that focusing something inside an {\ttfamily iframe} will also focus the {\ttfamily iframe} itself. (acusti)
\end{DoxyItemize}

\subsection*{9.\+6.\+0}


\begin{DoxyItemize}
\item Added {\ttfamily H\+T\+M\+L\+Collection.\+prototype\mbox{[}Symbol.\+iterator\mbox{]}}, so you can use {\ttfamily for}-\/{\ttfamily of} loops over {\ttfamily H\+T\+M\+L\+Collection}s now. (i8-\/pi)
\item Fixed {\ttfamily file.\+last\+Modified} to return the current time as the default, instead of {\ttfamily 0}.
\item Fixed cloning of {\ttfamily Attr}s to properly clone the namespace prefix.
\item Tweaked {\ttfamily X\+M\+L\+Http\+Request} progress event ordering slightly to better match the spec and browsers.
\item Tweaked the behavior of calling {\ttfamily event.\+stop\+Propagation} and {\ttfamily event.\+stop\+Immediate\+Propagation} on already-\/dispatched events, per \href{https://github.com/whatwg/dom/commit/806d4aab584f6fc38c21f8e088b51b8ba3e27e20}{\tt the latest changes to the D\+OM Standard}.
\end{DoxyItemize}

\subsection*{9.\+5.\+0}


\begin{DoxyItemize}
\item Added {\ttfamily document.\+scripts}, {\ttfamily document.\+embeds}, and {\ttfamily document.\+plugins}.
\item Fixed {\ttfamily document.\+get\+Elements\+By\+Tag\+Name} and {\ttfamily document.\+get\+Elements\+By\+Tag\+Name\+NS} to return {\ttfamily H\+T\+M\+L\+Collection}s instead of {\ttfamily Node\+List}s, and to follow the spec algorithms more exactly.
\item Fixed various {\ttfamily H\+T\+M\+L\+Collection}-\/returning getters such as {\ttfamily document.\+applets} or {\ttfamily table.\+cells} to be more spec-\/compliant.
\item Fixed the resource loader to respect the {\ttfamily agent} and {\ttfamily agent\+Class} options, not just the {\ttfamily agent\+Options} one.
\item Fixed {\ttfamily console.\+group\+Collapse} to be {\ttfamily console.\+group\+Collapsed} (and changed the virtual console accordingly).
\end{DoxyItemize}

\subsection*{9.\+4.\+5}


\begin{DoxyItemize}
\item Fixed {\ttfamily \char`\"{}error\char`\"{}} events from failed resource loads going missing since 9.\+4.\+3. I really should have tested that release better.
\end{DoxyItemize}

\subsection*{9.\+4.\+4}


\begin{DoxyItemize}
\item Fixed a leftover {\ttfamily console.\+log} introduced in the error handling path in 9.\+4.\+3.
\end{DoxyItemize}

\subsection*{9.\+4.\+3}


\begin{DoxyItemize}
\item Fixed spurious {\ttfamily \char`\"{}jsdom\+Error\char`\"{}}s occuring when closing a window, due to aborted resource loads.
\end{DoxyItemize}

\subsection*{9.\+4.\+2}


\begin{DoxyItemize}
\item Fixed what would happen when inline event handlers (such as {\ttfamily element.\+onclick}) would return non-\/boolean values (such as {\ttfamily undefined}); it would previously erroneously cancel the event, in many cases. (dmethvin)
\item Upgraded the minimum tough-\/cookie version to ensure all installations are protected against \href{https://nodesecurity.io/advisories/130}{\tt a security advisory}.
\end{DoxyItemize}

\subsection*{9.\+4.\+1}


\begin{DoxyItemize}
\item Implemented the cloning steps for {\ttfamily $<$input$>$} elements, so that cloned inputs properly copy over their value, checkedness, dirty value flag, and dirty checkedness flag. (matthewp)
\end{DoxyItemize}

\subsection*{9.\+4.\+0}


\begin{DoxyItemize}
\item Added the {\ttfamily D\+O\+M\+Parser} A\+PI. It is spec-\/compliant, including producing {\ttfamily $<$parsererror$>$} elements, except that the produced documents do not have the same \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} as the creating document (they instead always have {\ttfamily \char`\"{}about\+:blank\char`\"{}}).
\item Added strict X\+ML parsing when using {\ttfamily parsing\+Mode\+: \char`\"{}xml\char`\"{}}. Creating documents will now fail, just like in a browser, when ill-\/formed X\+H\+T\+ML markup is used.
\item Added some rudimentary application of X\+ML {\ttfamily $<$!\+E\+N\+T\+I\+TY} declarations.
\item Added {\ttfamily window.\+frame\+Element}, although without appropriate cross-\/origin security checks.
\item Added the {\ttfamily jsdom.\+eval\+V\+M\+Script} public A\+PI.
\item Added more custom request agent support\+: you can now pass {\ttfamily agent} and {\ttfamily agent\+Class} in addition to {\ttfamily agent\+Options}. (frarees)
\item Updated our elements-\/being-\/disabled semantics to more closely match the spec, in particular with regard to being descendants of {\ttfamily $<$fieldset disabled$>$}.
\item Updated {\ttfamily Form\+Data} for \href{https://github.com/whatwg/xhr/commit/1a75845e67792418a7721d516266ad01a90f2062}{\tt recent spec fixes}\+: blobs, files, and filenames should now all work like you\textquotesingle{}d expect.
\item Updated the {\ttfamily Form\+Data} constructor to use the proper, rather-\/complex, \href{https://html.spec.whatwg.org/multipage/forms.html#constructing-form-data-set}{\tt constructing the form data set} algorithm.
\item Fixed all constructors that appears as globals on the jsdom {\ttfamily window} object to be non-\/enumerable.
\item Fixed {\ttfamily $<$script$>$} elements to load when they gain a {\ttfamily src} attribute while in a document.
\item Fixed {\ttfamily $<$link rel=\char`\"{}stylesheet\char`\"{}$>$} elements to load when their {\ttfamily href} attributes change while in a document.
\item Fixed the loading of external {\ttfamily $<$img$>$}s (when the {\ttfamily canvas} npm package is installed) that were specified via relative \mbox{\hyperlink{namespace_u_r_l}{U\+RL}}; this regressed in 9.\+2.\+1.
\item Fixed {\ttfamily $<$iframe$>$} documents to have the correct {\ttfamily referrer} value (viz. the \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} of their parent).
\item Fixed the value of {\ttfamily input.\+checked} inside {\ttfamily click} events on checkboxes.
\item Fixed the window object\textquotesingle{}s named properties to correctly return the {\ttfamily $<$iframe$>$} element or the {\ttfamily $<$iframe$>$}\textquotesingle{}s window in appropriate scenarios involving {\ttfamily name} vs. {\ttfamily id} attributes on the {\ttfamily $<$iframe$>$}. (matthewp)
\end{DoxyItemize}

\subsection*{9.\+3.\+0}


\begin{DoxyItemize}
\item Added the {\ttfamily Audio} named constructor.
\item Fixed the {\ttfamily Image} named constructor to follow the spec more closely (e.\+g. {\ttfamily Image.\+prototype} is now equal to {\ttfamily H\+T\+M\+L\+Image\+Element.\+prototype}).
\item Fixed the {\ttfamily tab\+Index} setter, which regressed in 9.\+1.\+0, to no longer cause errors.
\item Made submit buttons and labels respond to click event cancelation correctly, preventing form submission and re-\/dispatching to the relevant form control. (marcandre)
\item Fixed unhandled errors thrown in X\+HR event handlers being swallowed; they now properly are redirected to the virtual console.
\end{DoxyItemize}

\subsection*{9.\+2.\+1}


\begin{DoxyItemize}
\item Fixed {\ttfamily $<$input$>$}\textquotesingle{}s {\ttfamily selection\+Start}, {\ttfamily selection\+End}, and {\ttfamily selection\+Direction} getters to return null, instead of throwing, for elements that do not allow selection, per \href{https://github.com/whatwg/html/pull/1006}{\tt a recent spec change}.
\item Fixed {\ttfamily $<$base$>$}\textquotesingle{}s {\ttfamily href} getter logic to return the attribute value instead of the empty string for unparseable U\+R\+Ls, per \href{https://github.com/whatwg/html/pull/1064}{\tt a recent spec change}.
\item Fixed the referrer sent when retrieving external resources to be the document\textquotesingle{}s \mbox{\hyperlink{namespace_u_r_l}{U\+RL}}, not the document\textquotesingle{}s base \mbox{\hyperlink{namespace_u_r_l}{U\+RL}}.
\item Fixed suppression of all {\ttfamily error} events on {\ttfamily window} beyond the first one.
\item Fixed {\ttfamily new \mbox{\hyperlink{namespace_u_r_l}{U\+RL}}} to correctly throw for unparseable U\+R\+Ls, and all of {\ttfamily \mbox{\hyperlink{namespace_u_r_l}{U\+RL}}}\textquotesingle{}s setters to correctly ignore invalid input instead of throwing.
\item Fixed {\ttfamily Style\+Sheet\+List.\+prototype.\+item} to return {\ttfamily null} instead of {\ttfamily undefined} for out-\/of-\/bounds indices. (Ginden)
\item Updated {\ttfamily cssstyle} minimum version to ensure all jsdom installs (not just fresh ones) get the benefit of {\ttfamily cssstyle}\textquotesingle{}s recently-\/better {\ttfamily background} and {\ttfamily width} setters.
\end{DoxyItemize}

\subsection*{9.\+2.\+0}


\begin{DoxyItemize}
\item Added {\ttfamily jsdom.\+change\+U\+R\+L(window, new\+U\+R\+L)} for allowing you to override a window\textquotesingle{}s existing \mbox{\hyperlink{namespace_u_r_l}{U\+RL}}. (mummybot)
\item Fixed the {\ttfamily proxy} option to be applied to all requests; previously it was not always passed through. (nicolashenry)
\item Fixed {\ttfamily X\+M\+L\+Http\+Request} response header filtering for cross-\/origin requests; this also fixes {\ttfamily Progress\+Event}s fired from such X\+H\+Rs. (nicolashenry)
\end{DoxyItemize}

\subsection*{9.\+1.\+0}


\begin{DoxyItemize}
\item Added a somewhat-\/reasonable implementation of focus and focus events. Although the full complexity of focus is not implemented, the following improvements have been made\+:
\begin{DoxyItemize}
\item Only elements which are focusable can be focused.
\item Added the {\ttfamily Focus\+Event} class, and now {\ttfamily focus} and {\ttfamily blur} events are fired appropriately.
\item {\ttfamily tab\+Index} now returns {\ttfamily 0} by default for focusable elements.
\end{DoxyItemize}
\item Reimplemented {\ttfamily navigator} to be to-\/spec\+:
\begin{DoxyItemize}
\item Added {\ttfamily app\+Code\+Name}, {\ttfamily product}, {\ttfamily product\+Sub}, {\ttfamily vendor}, and {\ttfamily vendor\+Sub}; also changes {\ttfamily user\+Agent}, {\ttfamily app\+Name}, {\ttfamily platform}, and {\ttfamily version} to be more browser-\/like instead of based on various Node.\+js information.
\item Added {\ttfamily language} and {\ttfamily languages}.
\item Added {\ttfamily on\+Line}.
\item Added {\ttfamily java\+Enabled()}.
\item Removed {\ttfamily no\+UI}.
\end{DoxyItemize}
\item Fixed {\ttfamily form\+El.\+action} to return a value resolved relative to the document \mbox{\hyperlink{namespace_u_r_l}{U\+RL}}, or to return the document \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} if the corresponding attribute is missing or empty.
\item Sped up X\+Path execution. (vsemozhetbyt)
\item Fixed {\ttfamily window.\+close()} not correctly clearing event listeners on the document. (Ojek)
\item Fixed a regression introduced in 9.\+0.\+0 where invalid C\+SS would cause a crash while attempting to parse it. Instead, a {\ttfamily \char`\"{}jsdom\+Error\char`\"{}} will now be emitted to the virtual console.
\end{DoxyItemize}

\subsection*{9.\+0.\+0}

This major release removes jsdom\textquotesingle{}s support for mutation events. Mutation events were never well-\/specified, and the modern D\+OM Standard omits them in the hopes that they can be removed from browsers (although this has not yet happened in major browser engines). We had hoped to implement their modern alternative, mutation observers, before performing this removal, to give jsdom users the same capabilities.

However, recent performance investigations revealed that mutation events were the major bottleneck in most jsdom operations; tools like \href{https://github.com/bterlson/ecmarkup}{\tt ecmarkup} which make heavy use of jsdom had their running time halved by removing mutation events, which add serious overhead to every D\+OM mutation. As such, we are doing a major release with them removed, so that jsdom users can benefit from this massive performance gain.

Mutation observer support is \href{https://github.com/tmpvar/jsdom/issues/639}{\tt in progress}; please use the Git\+Hub reactions feature to vote on that issue if you are impacted by this removal and are hoping for mutation observer support to replace it.

Your normal change log follows\+:


\begin{DoxyItemize}
\item {\bfseries Removed mutation events}, as discussed above.
\item Added the {\ttfamily D\+O\+M\+Token\+List.\+prototype.\+replace} method. (nicolashenry)
\item Updated {\ttfamily D\+O\+M\+Token\+List.\+prototype.\+contains} to no longer validate its arguments, as per the latest spec. (nicolashenry)
\item Made various improvements to X\+M\+L\+Http\+Request (nicolashenry)\+:
\begin{DoxyItemize}
\item Added the {\ttfamily response\+U\+RL} property.
\item Updated methods, headers, and header values to use the {\ttfamily Byte\+String} algorithm.
\item Fixed the default {\ttfamily status\+Text} to be {\ttfamily \char`\"{}\char`\"{}} instead of {\ttfamily \char`\"{}\+O\+K\char`\"{}}.
\end{DoxyItemize}
\item Fixed the {\ttfamily Blob} constructor\textquotesingle{}s {\ttfamily type} validation. (nicolashenry)
\end{DoxyItemize}

\subsection*{8.\+5.\+0}


\begin{DoxyItemize}
\item Added encoding handling (nicolashenry)
\begin{DoxyItemize}
\item {\ttfamily jsdom.\+env}, when given a \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} or file, will decode the resulting bytes using signals like the {\ttfamily Content-\/\+Type} header, {\ttfamily $<$meta charset$>$} declaration, or presence of a B\+OM, in the same manner as web browsers.
\item Fetching external resources, via mechanisms such as X\+M\+L\+Http\+Request or {\ttfamily $<$script$>$}/{\ttfamily $<$link$>$}/{\ttfamily $<$iframe$>$} tags, will also account for such signals.
\item {\ttfamily jsdom.\+jsdom()}, which takes a string, still sets a \char`\"{}\+U\+T\+F-\/8\char`\"{} encoding by default, since there are no bytes or headers for it to sniff an encoding from.
\end{DoxyItemize}
\item Removed {\ttfamily iframe.\+sandbox} property, since it was not implemented and simply crashed when used.
\item Removed {\ttfamily element.\+source\+Index} property, since it was nonstandard (Internet Explorer only).
\item Fixed setting proxied inline event handlers, such as {\ttfamily doc.\+body}\textquotesingle{}s {\ttfamily onload=\char`\"{}\char`\"{}} attribute, for documents that do not have a browsing context.
\end{DoxyItemize}

\subsection*{8.\+4.\+1}


\begin{DoxyItemize}
\item Fixed an issue where setting {\ttfamily selected} on an multi-\/select would clear all other selectedness.
\end{DoxyItemize}

\subsection*{8.\+4.\+0}


\begin{DoxyItemize}
\item Added an implementation of the {\ttfamily Tree\+Walker} class (and {\ttfamily document.\+create\+Tree\+Walker}). (garycourt)
\item Fixed a few minor bugs in \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} parsing and the {\ttfamily \mbox{\hyperlink{namespace_u_r_l}{U\+RL}}} A\+PI, by upgrading to {\ttfamily whatwg-\/url} 2.\+0.\+1.
\item Fixed a few issues with generated files in the published package, which seem to have impacted webpack users.
\end{DoxyItemize}

\subsection*{8.\+3.\+1}


\begin{DoxyItemize}
\item Fixed an issue where if you modified {\ttfamily Object.\+prototype}, spurious attributes would show up on your jsdom nodes. (deckar01)
\end{DoxyItemize}

\subsection*{8.\+3.\+0}


\begin{DoxyItemize}
\item Added image loading and decoding, when the {\ttfamily canvas} npm package is installed (lehni). In practice, this means that if you enable fetching {\ttfamily \char`\"{}img\char`\"{}} external resources, then\+:
\begin{DoxyItemize}
\item {\ttfamily img.\+natural\+Width}, {\ttfamily img.\+natural\+Height}, {\ttfamily img.\+width}, {\ttfamily img.\+height}, {\ttfamily img.\+complete}, and {\ttfamily img.\+current\+Src} will update themselves correctly as the image loads
\item {\ttfamily load} and {\ttfamily error} events will fire on the {\ttfamily $<$img$>$} element, according to how well image decoding goes.
\item You can draw images onto canvases, using the newly-\/enabled {\ttfamily canvas\+Context.\+draw\+Image} A\+PI.
\end{DoxyItemize}
\item Added {\ttfamily canvas\+Context.\+create\+Pattern} and {\ttfamily canvas\+Context.\+to\+Blob}, when the {\ttfamily canvas} npm package is installed. (lehni)
\item Added a basic implementation of the \href{https://w3c.github.io/page-visibility/}{\tt Page Visibility A\+PI}, in particular a {\ttfamily document.\+hidden} property that always returns {\ttfamily true}, and a {\ttfamily document.\+visibility\+State} property that always returns {\ttfamily \char`\"{}prerender\char`\"{}}. This is a more standard alternative to our proprietary {\ttfamily navigator.\+no\+UI}, which will be removed whenever we release 9.\+0.\+0. (kapouer)
\end{DoxyItemize}

\subsection*{8.\+2.\+0}


\begin{DoxyItemize}
\item Added correct click behavior for inputs (jeffcarp)\+:
\begin{DoxyItemize}
\item {\ttfamily change} and {\ttfamily input} events now fire appropriately
\item The \char`\"{}click in progress\char`\"{} flag is implemented, so you cannot click while a click is in progress
\item Canceling a click event appropriately resets radio buttons and checkboxes
\end{DoxyItemize}
\item Updated our X\+M\+L\+Http\+Request implementation with a variety of fixes and features, including preliminary C\+O\+RS support. (nicolashenry)
\item Added a {\ttfamily strict\+S\+SL} top-\/level option to govern all requests jsdom makes. (nicolashenry)
\item X\+H\+T\+ML frames and iframes are now parsed as X\+ML instead of H\+T\+ML. (nicolashenry)
\item Added {\ttfamily document.\+origin} and {\ttfamily document.\+last\+Modified}. (nicolashenry)
\item Fixed the {\ttfamily script\+El.\+text} getter and setter to follow the spec.
\item Fixed script execution to check against the canonical list of Java\+Script M\+I\+ME types and only execute those scripts as Java\+Script.
\end{DoxyItemize}

\subsection*{8.\+1.\+1}


\begin{DoxyItemize}
\item Fixed input selection methods and properties to properly differentiate between inputs that can be selected outright vs. textual inputs which allow variable-\/length selection. (yaycmyk)
\end{DoxyItemize}

\subsection*{8.\+1.\+0}


\begin{DoxyItemize}
\item Added {\ttfamily attr.\+node\+Name}, which was \href{https://github.com/whatwg/dom/issues/171}{\tt recently re-\/added to the spec}.
\item Added click-\/proxying behavior from {\ttfamily $<$label$>$}s to their labeled form elements. (yaycmyk)
\item Added a setter for {\ttfamily element.\+class\+List} per recent spec changes (it forwards to {\ttfamily element.\+class\+List.\+value}).
\item Updated our attributes implementation in a few ways for recent spec changes and to fix discovered bugs\+:
\begin{DoxyItemize}
\item Added {\ttfamily element.\+get\+Attribute\+Names()}. (\href{https://github.com/whatwg/dom/issues/115}{\tt spec addition})
\item {\ttfamily set\+Attribute\+Node} and {\ttfamily set\+Attribute\+Node\+NS} can now replace an attribute node, instead of removing the old one and adding a new one; this avoids changing the order in the attribute list. (\href{https://github.com/whatwg/dom/issues/116}{\tt spec change})
\item {\ttfamily Named\+Node\+Map} named properties are now lowercase (except in edge cases involving X\+ML documents or non-\/\+H\+T\+ML elements). (\href{https://github.com/whatwg/dom/issues/141}{\tt spec change})
\item {\ttfamily Named\+Node\+Map} named properties are now non-\/enumerable.
\item The {\ttfamily \char`\"{}\+D\+O\+M\+Attr\+Modified\char`\"{}} mutation event\textquotesingle{}s {\ttfamily related\+Node} is now the new {\ttfamily Attr} object, not the {\ttfamily Node}, as per spec.
\end{DoxyItemize}
\item Updated {\ttfamily D\+O\+M\+Token\+List} to have a {\ttfamily value} property per \href{https://github.com/whatwg/dom/issues/119}{\tt recent spec changes}; its {\ttfamily to\+String} serialization also changed slightly.
\item Updated {\ttfamily tc.\+headers} to be a {\ttfamily D\+O\+M\+Token\+List} that simply reflects the {\ttfamily headers} attribute; previously it was a string, with its computation doing some weird stuff.
\item Fixed {\ttfamily document.\+implementation.\+create\+Document()} to create a document with its parsing mode set to X\+ML, which affects a variety of D\+OM A\+P\+Is in small ways.
\item Fixed {\ttfamily Event\+Target.\+prototype.\+constructor} to be correct; it was previously {\ttfamily Window}.
\item Fixed {\ttfamily option.\+index} for {\ttfamily $<$option$>$}s not inside a {\ttfamily $<$select$>$} to no longer error.
\item Fixed {\ttfamily tc.\+cell\+Index} for {\ttfamily $<$td$>$}s and {\ttfamily $<$th$>$}s not inside a {\ttfamily $<$tr$>$} to no longer error.
\item Fixed {\ttfamily tr.\+section\+Row\+Index} for {\ttfamily $<$tr$>$}s not inside a {\ttfamily $<$table$>$}, {\ttfamily $<$tbody$>$}, {\ttfamily $<$thead$>$}, or {\ttfamily $<$tfoot$>$} to no longer error.
\item Removed the {\ttfamily \char`\"{}keyevents\char`\"{}} alias for {\ttfamily \char`\"{}keyboardevent\char`\"{}} when using {\ttfamily document.\+create\+Event}, \href{https://github.com/whatwg/dom/issues/148}{\tt per recent spec changes}.
\end{DoxyItemize}

\subsection*{8.\+0.\+4}


\begin{DoxyItemize}
\item Fixed the {\ttfamily this} value when you pass a {\ttfamily \{ handle\+Event() \{ ... \} \}} object to {\ttfamily add\+Event\+Listener}. (thetalecrafter)
\end{DoxyItemize}

\subsection*{8.\+0.\+3}


\begin{DoxyItemize}
\item Fixed {\ttfamily H\+T\+M\+L\+Option\+Element.\+prototype.\+label}; a typo was causing it to not work at all. (karlhorky)
\item Updated {\ttfamily cssstyle} minimum version to ensure all jsdom installs (not just fresh ones) get the benefit of {\ttfamily cssstyle}\textquotesingle{}s recently-\/better {\ttfamily padding} and {\ttfamily margin} parsing/\+C\+S\+S\+OM.
\end{DoxyItemize}

\subsection*{8.\+0.\+2}


\begin{DoxyItemize}
\item Fixed an issue where custom user agents would not propagate to {\ttfamily navigator.\+user\+Agent} in frames and iframes.
\item Improved our {\ttfamily document.\+active\+Element} implementation to be a bit smarter; we still don\textquotesingle{}t have full focus/blur/active element semantics, but at least now it falls back to the {\ttfamily $<$body$>$} element when the active element is removed from the document or when no element has been focused yet.
\end{DoxyItemize}

\subsection*{8.\+0.\+1}


\begin{DoxyItemize}
\item Fixed an issue where the {\ttfamily this} inside event handler callbacks was not equal to the event\textquotesingle{}s current target. (Surprisingly there were no tests for this!)
\end{DoxyItemize}

\subsection*{8.\+0.\+0}

This major release includes a large rewrite of most of the D\+OM and H\+T\+ML classes exposed in jsdom. A lot of their behavior is generated from their specs\textquotesingle{} I\+DL syntax, taking care of many type conversions, attribute/property reflections, and much more. Many properties that were previously not present are now available, and almost everything behaves in a more spec-\/compliant way. Additionally, for these classes all of their implementation details are no longer available as underscore-\/prefixed properties, but instead are hidden behind a single symbol.

Although normally jsdom does not mark a new major release for changes that simply update us to the latest specs or hide internal implementation details better, the magnitude of the changes is so extensive that we want to bump the major version in order to ensure that consumers perform adequate testing before upgrading. But, you should definitely upgrade! The new stuff is really awesome!


\begin{DoxyItemize}
\item Reimplemented {\ttfamily Location}, {\ttfamily \mbox{\hyperlink{interface_history}{History}}}, and {\ttfamily H\+T\+M\+L\+Hyperlink\+Element\+Utils} (used by both {\ttfamily H\+T\+M\+L\+Anchor\+Element} and {\ttfamily H\+T\+M\+L\+Area\+Element}) according to the latest specs, and using the latest \href{https://github.com/jsdom/whatwg-url}{\tt whatwg-\/url} package. This greatly improves our correctness on \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} resolution and navigation (to the extent we support navigation, i.\+e. {\ttfamily push\+State} and changing the hash). It should also improve parsing speed as we no longer parse and resolve U\+R\+Ls during parsing.
\item Added {\ttfamily Element.\+prototype.\+insert\+Adjacent\+H\+T\+ML}. (kasperisager)
\item Added {\ttfamily Node.\+prototype.\+adopt\+Node}, and adopt nodes during insertion instead of throwing {\ttfamily \char`\"{}\+Wrong\+Document\+Error\char`\"{}}s. (dmethvin)
\item Added a stub {\ttfamily Element.\+prototype.\+get\+Client\+Rects} to match our stub {\ttfamily get\+Bounding\+Client\+Rect}.
\item Fixed {\ttfamily set\+Timeout} and {\ttfamily set\+Interval} to return numeric I\+Ds, instead of objects. (alvarorahul)
\item Fixed {\ttfamily set\+Timeout} and {\ttfamily set\+Interval} to accept string arguments to eval, and to pass along extra arguments after the first two.
\item Fixed certain style shorthand properties not updating their component properties or parsing correctly. (dpvc)
\item Fixed {\ttfamily Event} object creation to always initialize the event objects, unless using {\ttfamily document.\+create\+Event}, even for events with name {\ttfamily \char`\"{}\char`\"{}}.
\item Fixed iframes to go through the custom resource loader. (chrmarti)
\item Removed \href{http://www.w3.org/TR/2003/CR-DOM-Level-3-LS-20031107/load-save.html}{\tt \char`\"{}\+D\+O\+M Load and Save\char`\"{}} stub implementation. That spec was never implemented in browsers, and jsdom only contained stubs.
\item Removed other minor unimplemented, stub, or no-\/longer-\/standard A\+P\+Is from \char`\"{}\+D\+O\+M Level 3\char`\"{}, like the user-\/data A\+PI, {\ttfamily D\+O\+M\+Exception}, {\ttfamily D\+O\+M\+Configuration}, and {\ttfamily D\+O\+M\+String\+List}.
\end{DoxyItemize}

\subsection*{7.\+2.\+2}


\begin{DoxyItemize}
\item Fixed {\ttfamily canvas\+El.\+to\+Data\+U\+R\+L()}, with the {\ttfamily canvas} npm package installed; a recent update to the {\ttfamily canvas} package broke how we were passing arguments to do.
\item Fixed {\ttfamily data\+:} \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} parsing to allow empty contents, e.\+g. {\ttfamily data\+:text/css;base64,}. (sebmck)
\end{DoxyItemize}

\subsection*{7.\+2.\+1}


\begin{DoxyItemize}
\item Fixed a regression in X\+ML parsing of attributes with a namespace \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} but no prefix (e.\+g. {\ttfamily $<$math xmlns=\char`\"{}http\+://www.\+w3.\+org/1998/\+Math/\+Math\+M\+L\char`\"{}$>$}).
\end{DoxyItemize}

\subsection*{7.\+2.\+0}


\begin{DoxyItemize}
\item Added support for text selection A\+P\+Is on {\ttfamily $<$input$>$} and {\ttfamily $<$textarea$>$}! (sjelin and yaycmyk)
\item Replaced our default X\+ML parser with \href{https://www.npmjs.com/package/sax}{\tt sax}, thus fixing many (but not all) issues with X\+ML and X\+H\+T\+ML parsing. To get a flavor of the issues fixed, check out these now-\/closed bugs\+: \href{https://github.com/tmpvar/jsdom/issues/393}{\tt \#393}, \href{https://github.com/tmpvar/jsdom/issues/651}{\tt \#651}, \href{https://github.com/tmpvar/jsdom/issues/415}{\tt \#415}, \href{https://github.com/tmpvar/jsdom/issues/1276}{\tt \#1276}.
\item Fixed the {\ttfamily $<$canvas$>$} tag to reset its contents when its width or height changed, including the change from the default 300 Ã— 150 canvas. (Applies only when using the {\ttfamily canvas} npm package.)
\item Fixed an issue where {\ttfamily H\+T\+M\+L\+Collection}s would get confused when they contained elements with numeric {\ttfamily id}s or {\ttfamily name}s.
\item Fixed an issue with doctype parsing confusing the system ID and public ID.
\item Made the task posted by {\ttfamily post\+Message} use the inside-\/jsdom timer queue, instead of the Node.\+js one. This allows easier mocking. (cpojer)
\end{DoxyItemize}

\subsection*{7.\+1.\+1}


\begin{DoxyItemize}
\item When {\ttfamily $<$iframe$>$}s have unresolvable U\+R\+Ls, jsdom will no longer crash, but will instead just load {\ttfamily about\+:blank} into them. (This is the spec behavior.)
\item Fixed {\ttfamily document.\+writeln} to correctly handle multiple arguments; previously it ignored all after the first.
\item Fixed {\ttfamily File\+List} objects to no longer have a property named {\ttfamily \char`\"{}undefined\char`\"{}}. (jfremy)
\end{DoxyItemize}

\subsection*{7.\+1.\+0}

This is a rather large release bringing with it several important re-\/implementations of D\+OM and H\+T\+ML A\+P\+Is.


\begin{DoxyItemize}
\item Our {\ttfamily Event\+Target} implementation has been rewritten from scratch to follow the spec exactly. This should improve any edge case misbehaviors.
\item Our {\ttfamily Event} class hierarchy has been rewritten and fleshed out, fixing many gaps in functionality.
\begin{DoxyItemize}
\item Previously missing classes {\ttfamily Keyboard\+Event} and {\ttfamily Touch\+Event} are now implemented.
\item Almost all supported {\ttfamily Event} subclasses now have constructors. ({\ttfamily Touch\+Event} does not yet, and {\ttfamily Mutation\+Event} is specified to not have one.)
\item All classes now have correct public A\+P\+Is, e.\+g. getters instead of data properties, missing properties added, and constructors that correctly allow setting all the supported properties.
\item {\ttfamily document.\+create\+Event(\char`\"{}customevent\char`\"{}, ...)} now correctly creates a {\ttfamily Custom\+Event} instead of an {\ttfamily Event}, and {\ttfamily Custom\+Event.\+prototype.\+init\+Progress\+Event} has been replaced with {\ttfamily Custom\+Event.\+prototype.\+init\+Custom\+Event}.
\end{DoxyItemize}
\item The {\ttfamily Attr} class and related attribute-\/manipulating methods has been rewritten to follow the latest specification. In particular, {\ttfamily Attr} is no longer a subclass of {\ttfamily Node}, and no longer has child text nodes.
\item The {\ttfamily $<$template$>$} element implementation has been greatly improved, now passing most web platform tests. Its {\ttfamily .content} property no longer has an extra intermediate document fragment; it no longer has child nodes; and related parts of the parser and serializer have been fixed, including {\ttfamily inner\+H\+T\+ML} and {\ttfamily outer\+H\+T\+ML}, to now work as specified.
\item {\ttfamily query\+Selector}, {\ttfamily query\+Selector\+All}, and {\ttfamily matches} now correctly throw {\ttfamily \char`\"{}\+Syntax\+Error\char`\"{}} {\ttfamily D\+O\+M\+Exception}s for invalid selectors, instead of just {\ttfamily Error} instances.
\item {\ttfamily Node.\+prototype}\textquotesingle{}s {\ttfamily insert\+Before}, {\ttfamily replace\+Child}, and {\ttfamily append\+Child} methods now check their arguments more correctly.
\item The browser builds now have regained the ability to fetch U\+R\+Ls for content and the like; this had been broken due to an issue with the browser-\/request package, which is no longer necessary anyway.
\end{DoxyItemize}

\subsection*{7.\+0.\+2}


\begin{DoxyItemize}
\item Fixed an issue where inside jsdom {\ttfamily $<$script$>$} code, {\ttfamily /regexpliteral/ instanceof Reg\+Exp} would be {\ttfamily false}.
\end{DoxyItemize}

\subsection*{7.\+0.\+1}


\begin{DoxyItemize}
\item Fixed two bugs with {\ttfamily Node.\+prototype.\+is\+Equal\+Node}\+:
\begin{DoxyItemize}
\item It would previously always return {\ttfamily true} for comparing any two doctypes.
\item It would throw an error when trying to compare two elements that had attributes.
\end{DoxyItemize}
\item Enforced that {\ttfamily document.\+implementation.\+create\+Document\+Type} requires all three of its arguments.
\end{DoxyItemize}

\subsection*{7.\+0.\+0}

This major release has as its headlining feature a completely re-\/written {\ttfamily X\+M\+L\+Http\+Request} implementation, in a heroic effort by \href{https://github.com/nicolashenry}{\tt }. It includes a number of other smaller improvements and fixes. The breaking changes are highlighted in bold below.


\begin{DoxyItemize}
\item {\bfseries Node.\+js 4.\+0 onward is now required}, as we have begun using E\+S2015 features only present there.
\item Completely re-\/implemented {\ttfamily X\+M\+L\+Http\+Request} and related classes (nicolashenry)\+:
\begin{DoxyItemize}
\item Includes support for {\ttfamily Blob}, {\ttfamily File}, {\ttfamily File\+List}, {\ttfamily File\+Reader}, {\ttfamily Form\+Data}, {\ttfamily Progress\+Event}, and the supporting {\ttfamily X\+M\+L\+Http\+Request\+Upload}, and {\ttfamily X\+M\+L\+Http\+Request\+Event\+Target} interfaces.
\item Includes support for synchronous X\+H\+Rs.
\item Adds some new request-\/management abilities, documented in the readme. In short, the {\ttfamily pool}, {\ttfamily agent\+Options}, and {\ttfamily user\+Agent} options are new, and resource loads can now be aborted.
\item These implementations are extremely complete and standards-\/compliant, passing 136 newly-\/introduced web platform tests.
\end{DoxyItemize}
\item Added {\ttfamily document.\+charset}, an alias for {\ttfamily document.\+character\+Set}.
\item Added {\ttfamily H\+T\+M\+L\+Template\+Element.\+prototype.\+content}, for getting the contents of a {\ttfamily $<$template$>$} element as a document fragment. (rickychien)
\item Implemented \char`\"{}loose\char`\"{} cookie parsing, giving correct execution of code like {\ttfamily document.\+cookie = \char`\"{}foo\char`\"{}}.
\item Several fixes related to event dispatching and creation, including the addition of {\ttfamily Event.\+prototype.\+stop\+Immediate\+Propagation} and the constants {\ttfamily N\+O\+NE}, {\ttfamily C\+A\+P\+T\+U\+R\+I\+N\+G\+\_\+\+P\+H\+A\+SE}, {\ttfamily A\+T\+\_\+\+T\+A\+R\+G\+ET}, and {\ttfamily B\+U\+B\+B\+L\+I\+N\+G\+\_\+\+P\+H\+A\+SE}. This accounted for another 15 newly-\/passing web platform tests. (nicolashenry)
\item Fixed {\ttfamily document.\+style\+Sheets} to correctly track the removal of stylesheets from the document. (A\+V\+GP)
\item Fixed the {\ttfamily created} jsdom lifecycle callback receiving a different {\ttfamily window} object than the {\ttfamily loaded} or {\ttfamily done} callbacks when scripting was enabled.
\item {\bfseries Invalid U\+R\+Ls are no longer allowed when creating a jsdom document}; the \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} must be parseable, or an error will be thrown.
\item {\bfseries The {\ttfamily \{ omit\+Jsdom\+Errors \}} option of the virtual console has moved}; it is no longer provided when creating the virtual console, but instead when calling {\ttfamily send\+To}.
\end{DoxyItemize}

\subsection*{6.\+5.\+1}


\begin{DoxyItemize}
\item Fixed an issue where with {\ttfamily jsdom.\+jsdom}, you had to pass {\ttfamily referrer} and {\ttfamily cookie} options as top-\/level, whereas with {\ttfamily jsdom.\+env}, you had to nest them under a {\ttfamily document} option. This was unnecessarily confusing. Now both possibilities are allowed for both functions. (The readme only documents the top-\/level version, though.)
\end{DoxyItemize}

\subsection*{6.\+5.\+0}


\begin{DoxyItemize}
\item Added {\ttfamily Node\+List.\+prototype\mbox{[}Symbol.\+iterator\mbox{]}}, so you can now use {\ttfamily for}-\/{\ttfamily of} loops with {\ttfamily Node\+List}s.
\end{DoxyItemize}

\subsection*{6.\+4.\+0}


\begin{DoxyItemize}
\item Added {\ttfamily jsdom.\+node\+Location(node)} to get the location within the source text of a given node.
\item Added {\ttfamily jsdom.\+reconfigure\+Window(window, \{ top \})} to allow changing the value of a window\textquotesingle{}s {\ttfamily top} property.
\item Added the {\ttfamily element} argument to the custom resource loader, so you can customize resource loads depending on which element loaded them.
\item Updated {\ttfamily get\+Elements\+By\+Class\+Name} to match the spec. It now correctly splits on whitespace to try to find elements with all the given classes; it returns a {\ttfamily H\+T\+M\+L\+Collection} instead of a {\ttfamily Node\+List}; and it memoizes the result.
\item Updated {\ttfamily Node\+List} and {\ttfamily H\+T\+M\+L\+Collection} to match the spec. The most noticable change is that {\ttfamily H\+T\+M\+L\+Collection} no longer inherits from {\ttfamily Node\+List}.
\end{DoxyItemize}

\subsection*{6.\+3.\+0}


\begin{DoxyItemize}
\item Added a fully spec-\/compliant implementation of {\ttfamily window.\+atob} and {\ttfamily window.\+btoa}. (jeffcarp)
\item Fixed many issues with our {\ttfamily $<$canvas$>$} implementation\+:
\begin{DoxyItemize}
\item With the {\ttfamily canvas} npm package installed, {\ttfamily $<$canvas$>$} elements are now properly {\ttfamily instanceof H\+T\+M\+L\+Canvas\+Element} and {\ttfamily instanceof H\+T\+M\+L\+Element}.
\item {\ttfamily $<$canvas$>$} elements now present the same uniform spec-\/compliant A\+PI both with and without the {\ttfamily canvas} npm package installed. If the package is not installed, some of the methods will cause not-\/implemented {\ttfamily \char`\"{}jsdom\+Error\char`\"{}} events to be emitted on the virtual console.
\item The {\ttfamily width} and {\ttfamily height} properties now correctly reflect the {\ttfamily width} and {\ttfamily height} attributes, and have the appropriate default values of {\ttfamily 300} and {\ttfamily 150}.
\item With the {\ttfamily canvas} npm package installed, {\ttfamily $<$canvas$>$} elements now generally play better with other parts of jsdom, e.\+g., {\ttfamily document.\+get\+Element\+By\+Id} actually works with them.
\end{DoxyItemize}
\item Introduced and upated many of our element classes, so that at least every tag name/element class pair is now correct, even if some of the classes are stubs. In particular\+:
\begin{DoxyItemize}
\item Complete implementations were added for {\ttfamily H\+T\+M\+L\+Data\+Element}, {\ttfamily H\+T\+M\+L\+Span\+Element}, and {\ttfamily H\+T\+M\+L\+Time\+Element}.
\item Stubs were added for {\ttfamily H\+T\+M\+L\+Data\+List\+Element}, {\ttfamily H\+T\+M\+L\+Dialog\+Element}, {\ttfamily H\+T\+M\+L\+Embed\+Element}, {\ttfamily H\+T\+M\+L\+Meter\+Element}, {\ttfamily H\+T\+M\+L\+Output\+Element}, {\ttfamily H\+T\+M\+L\+Progress\+Element}, {\ttfamily H\+T\+M\+L\+Source\+Element}, {\ttfamily H\+T\+M\+L\+Template\+Element}, and {\ttfamily H\+T\+M\+L\+Track\+Element}.
\item {\ttfamily H\+T\+M\+L\+Audio\+Element} was implemented in full, although its {\ttfamily H\+T\+M\+L\+Media\+Element} base, where most of its functionality is, is still largely a stub.
\item {\ttfamily H\+T\+M\+L\+Table\+Section\+Element}, {\ttfamily H\+T\+M\+L\+Table\+Row\+Element}, {\ttfamily H\+T\+M\+L\+Table\+Cell\+Element}, {\ttfamily H\+T\+M\+L\+Table\+Data\+Cell\+Element}, and {\ttfamily H\+T\+M\+L\+Table\+Header\+Cell\+Element} were updated to the latest spec.
\item {\ttfamily H\+T\+M\+L\+Is\+Index\+Element} was removed; it has never been produced by the parser since 1.\+0.\+0-\/pre.\+1, and so it has been just a vestigial global property.
\item Appropriate constants were added to {\ttfamily H\+T\+M\+L\+Media\+Element}.
\end{DoxyItemize}
\item Updated everything having to do with base U\+R\+Ls to be per-\/spec\+:
\begin{DoxyItemize}
\item Added {\ttfamily Node.\+prototype.\+base\+U\+RI} property to get the node\textquotesingle{}s owner document\textquotesingle{}s base \mbox{\hyperlink{namespace_u_r_l}{U\+RL}}.
\item {\ttfamily H\+T\+M\+L\+Base\+Element}\textquotesingle{}s {\ttfamily href} getter now contains appropriate fallbacks and always returns an absolute \mbox{\hyperlink{namespace_u_r_l}{U\+RL}}, per spec.
\item If there are no {\ttfamily base} elements in an {\ttfamily \char`\"{}about\+:blank\char`\"{}} iframe document, the base \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} correctly falls back to the parent window\textquotesingle{}s base \mbox{\hyperlink{namespace_u_r_l}{U\+RL}}.
\end{DoxyItemize}
\item When you provide a {\ttfamily url\+: ...} option to {\ttfamily jsdom.\+jsom()} or {\ttfamily jsdom.\+env()}, the given string is now attempted to be resolved as a \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} before it is installed as {\ttfamily document.\+U\+RL}.
\begin{DoxyItemize}
\item So for example, providing {\ttfamily url\+: \char`\"{}http\+://example.\+com\char`\"{}} will mean {\ttfamily document.\+U\+RL} returns {\ttfamily \char`\"{}http\+://example.\+com/\char`\"{}}, with a trailing slash.
\item In a future major release, we will start throwing if strings that cannot be parsed as valid absolute \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} are provided for this option.
\end{DoxyItemize}
\end{DoxyItemize}

\subsection*{6.\+2.\+0}


\begin{DoxyItemize}
\item Added a full-\/featured, spec-\/compliant {\ttfamily Element.\+prototype.\+class\+List}, closing out a three-\/year old issue! (wacii)
\item Made {\ttfamily virtual\+Console.\+send\+To(console)} forward {\ttfamily \char`\"{}jsdom\+Error\char`\"{}}s to {\ttfamily console} by calling {\ttfamily console.\+error}. This can be turned off by doing {\ttfamily virtual\+Console.\+send\+To(console, \{ omit\+Jsdom\+Errors\+: true \})}.
\item Fixed errors when trying to parse invalid doctype declarations, like {\ttfamily $<$!\+D\+O\+C\+T\+Y\+PE$>$}.
\item Fixed spurious {\ttfamily \char`\"{}jsdom\+Error\char`\"{}}s that were emitted after calling {\ttfamily window.\+close()}.
\item Fixed the {\ttfamily \char`\"{}\+D\+O\+M\+Subtree\+Modified\char`\"{}} event to fire in more cases. Note that our mutation events implementation remains incomplete, and will eventually be removed (in a major release) once we implement mutation observers. (selam)
\end{DoxyItemize}

\subsection*{6.\+1.\+0}


\begin{DoxyItemize}
\item Added basic implementations of {\ttfamily H\+T\+M\+L\+Media\+Element} and {\ttfamily H\+T\+M\+L\+Video\+Element}, back-\/ported from Facebook\textquotesingle{}s Jest project. (cpojer)
\end{DoxyItemize}

\subsection*{6.\+0.\+1}


\begin{DoxyItemize}
\item Fixed {\ttfamily X\+M\+L\+Http\+Request.\+prototype.\+get\+All\+Response\+Headers} to not crash when used with {\ttfamily file\+:} U\+R\+Ls. (justinmchase)
\item Fixed {\ttfamily X\+M\+L\+Http\+Request.\+prototype.\+response} to correctly return the response text even when {\ttfamily response\+Type} was unset. (justinmchase)
\end{DoxyItemize}

\subsection*{6.\+0.\+0}

This major release is focused on massive improvements in speed, \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} parsing, and error handling. The potential breaking changes are highlighted in bold below; the largest ones are around the {\ttfamily jsdom.\+env} error-\/handling paradigm.

This release also welcomes \href{https://github.com/tmpvar/jsdom/commits/master?author=Joris-van-der-Wel}{\tt long-\/time contributer} \href{https://github.com/Joris-van-der-Wel/}{\tt -\/van-\/der-\/\+Wel} to the core team. You may recognize him from earlier changelogs. We\textquotesingle{}re very happy to have his help in making jsdom awesome!


\begin{DoxyItemize}
\item {\bfseries io.\+js 2.\+0 onward is now required}, as we have begun using E\+S2015 features only present there.
\item Improved performance dramatically, by $\sim$10000x in some cases, due to the following changes\+:
\begin{DoxyItemize}
\item Overhauled the named properties tracker to not walk the entire tree, thus greatly speeding up the setting of {\ttfamily id} and {\ttfamily name} attributes (including during parsing).
\item Overhauled everything dealing with tree traversal to use a new library, \href{https://github.com/jsdom/js-symbol-tree}{\tt symbol-\/tree}, to turn many operations that were previously O(n$^\wedge$2) or O(n) into O(n) or O(1).
\item Sped up {\ttfamily node.\+compare\+Document\+Position} and anything that used it (like {\ttfamily node.\+contains}) by doing more intelligent tree traversal instead of directly implementing the specced algorithm.
\end{DoxyItemize}
\item Overhauled how error handling works in jsdom\+:
\begin{DoxyItemize}
\item {\ttfamily window.\+onerror} (or {\ttfamily window.\+add\+Event\+Listener(\char`\"{}error\char`\"{}, ...)}) now work, and will catch all script errors, similar to in browsers. This also introduces the {\ttfamily Error\+Event} class, incidentally.
\item The virtual console is now the destination for several types of errors from jsdom, using \href{https://github.com/tmpvar/jsdom#virtual-console-jsdomerror-error-reporting}{\tt the new event {\ttfamily \char`\"{}jsdom\+Error\char`\"{}}}. This includes\+: errors loading external resources; script execution errors unhandled by {\ttfamily window.\+onerror}; and not-\/implemented warnings resulting from calling methods like {\ttfamily window.\+alert} which jsdom explicitly does not support.
\item Since script errors are now handled by {\ttfamily window.\+onerror} and the virtual console, they are no longer included in the initialization process. This results in two changes to {\ttfamily jsdom.\+env} and the initialization lifecycle\+:
\begin{DoxyItemize}
\item {\bfseries The {\ttfamily load(errors, window)} callback was changed to {\ttfamily onload(window)}}, to reflect that it is now just sugar for setting a {\ttfamily window.\+onload} handler.
\item {\bfseries The {\ttfamily done(errors, window)} callback (i.\+e., the default callback for {\ttfamily jsdom.\+env}) has become {\ttfamily done(error, window)}}, and like every other io.\+js callback now simply gives you a single error object, instead of an array of them.
\end{DoxyItemize}
\item Nodes no longer have a nonstandard {\ttfamily errors} array, or a {\ttfamily raise} method used to put things in that array.
\end{DoxyItemize}
\item \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} parsing and resolution was entirely overhauled to follow \href{http://url.spec.whatwg.org/}{\tt the U\+RL standard}!
\begin{DoxyItemize}
\item This fixes several long-\/standing bugs and hacks in the jsdom \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} parser, which already had a mess of gross patches on top of the built-\/in io.\+js parser to be more web-\/compatible.
\item The new \href{https://url.spec.whatwg.org/#url}{\tt {\ttfamily U\+RL} class} has been added to {\ttfamily window}
\item The interfaces for {\ttfamily H\+T\+M\+L\+Anchor\+Element.\+prototype} and {\ttfamily document.\+location} (as well as {\ttfamily \mbox{\hyperlink{namespace_u_r_l}{U\+RL}}}, of course) are now uniformized to follow the \href{https://url.spec.whatwg.org/#api}{\tt {\ttfamily U\+R\+L\+Utils} A\+PI} (minus {\ttfamily search\+Params} for now).
\item {\bfseries As part of this change, you may need to start passing in {\ttfamily file\+:} U\+R\+Ls to {\ttfamily jsdom.\+env} where previously you were able to get away with passing in filenames.}
\end{DoxyItemize}
\item Added the {\ttfamily X\+M\+L\+Http\+Request.\+prototype.\+response} getter.
\item Fixed {\ttfamily Style\+Sheet\+List.\+prototype.\+item} to actually work. (chad3814)
\item Fixed the browser {\ttfamily vm} shim to properly add the built-\/in global properties ({\ttfamily Object}, {\ttfamily Array}, etc.) to the sandbox. If you were running jsdom inside a web worker and most of your scripts were broken, this should fix that.
\item Fixed the {\ttfamily \char`\"{}hashchange\char`\"{}} event to correctly fire {\ttfamily Hash\+Change\+Event} instances, with correct properties {\ttfamily new\+U\+RL} and {\ttfamily old\+U\+RL} (instead of the incorrect {\ttfamily new\+Url} and {\ttfamily old\+Url} used previously).
\item Removed usage of the setimmediate library, as it required {\ttfamily eval} and thus did not work in C\+SP scenarios.
\end{DoxyItemize}

Finally, if you\textquotesingle{}re a loyal jsdom fan whose made it this far into the changelog, I\textquotesingle{}d urge you to come join us in \href{https://github.com/tmpvar/jsdom/issues/1139}{\tt \#1139}, where we are brainstorming a modernized jsdom A\+PI that could get rid of many of the warts in the current one.

\subsection*{5.\+6.\+1}


\begin{DoxyItemize}
\item Fixed an accidentally-\/created global {\ttfamily attribute} variable if you ever called {\ttfamily create\+Attribute\+NS}.
\item Dependency upgrades fixed a couple of bugs, although you would have gotten these anyway with a clean jsdom 5.\+6.\+0 install\+:
\begin{DoxyItemize}
\item Parsing of C\+SS properties that use {\ttfamily url(\char`\"{}quoted string\char`\"{})} now works correctly, as of {\ttfamily cssstyle} 0.\+2.\+29.
\item Selectors for the empty string, like {\ttfamily div\mbox{[}title=\char`\"{}\char`\"{}\mbox{]}}, now work correctly, as of {\ttfamily nwmatcher} 1.\+3.\+6.
\end{DoxyItemize}
\end{DoxyItemize}

\subsection*{5.\+6.\+0}


\begin{DoxyItemize}
\item {\ttfamily virtual\+Console.\+send\+To} now returns {\ttfamily this}, allowing for \href{https://github.com/tmpvar/jsdom/tree/60ccb9b318d0bae8fe37e19af5af444b9c98ddac#forward-a-windows-console-output-to-the-iojs-console}{\tt a nice shorthand}. (jeffcarp)
\end{DoxyItemize}

\subsection*{5.\+5.\+0}


\begin{DoxyItemize}
\item Added {\ttfamily post\+Message} support, for communicating between parent windows, iframes, and combinations thereof. It\textquotesingle{}s missing a few semantics, especially around origins, as well as Message\+Event source. Objects are not yet structured cloned, but instead passed by reference. But it\textquotesingle{}s working, and awesome! (jeffcarp)
\item Rewrote cloning code (underlying {\ttfamily clone\+Node} and {\ttfamily import\+Node}), fixing a number of issues\+:
\begin{DoxyItemize}
\item Elements with weird tag names, of the type that only the parser can normally create, can now be cloned (\href{https://github.com/tmpvar/jsdom/issues/1142}{\tt \#1142})
\item Doctypes can now be cloned, per the latest spec.
\item Attrs cannot be cloned, per the latest spec (although they still have a {\ttfamily clone\+Node} method for now due to legacy).
\item Document clones now correctly copy over the \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} and content-\/type.
\end{DoxyItemize}
\item Fixed any virtual console output from iframes to be proxied to the parent window\textquotesingle{}s virtual console. (jeffcarp)
\item Fixed the {\ttfamily type} property of {\ttfamily $<$button$>$} elements to correctly default to {\ttfamily submit}, and to stay within the allowed range.
\item Fixed clicking on submit {\ttfamily $<$button$>$}s to submit their containing form; previously only {\ttfamily $<$input type=\char`\"{}submit\char`\"{}$>$} worked. (rxgx)
\item Fixed {\ttfamily document.\+open()} to return {\ttfamily this}, per spec. (ryanseddon)
\end{DoxyItemize}

Additionally, Joris-\/van-\/der-\/\+Wel added \href{https://github.com/tmpvar/jsdom/blob/master/Contributing.md#running-the-benchmarks}{\tt a benchmarking framework}, and a number of benchmarks, which should help us avoid performance regressions going forward, and also make targeted performance fixes. We\textquotesingle{}re already investigating \href{https://github.com/tmpvar/jsdom/issues/1156}{\tt some real-\/world issues} using this framework. Very exciting!

\subsection*{5.\+4.\+3}


\begin{DoxyItemize}
\item Incorporated upstream fix for setting {\ttfamily el.\+style.\+css\+Text} to an invalid value, which should be ignored instead of causing an error to be thrown. This same bug has also caused an error while setting the style attribute to an invalid value, ever since 5.\+4.\+0. (Joris-\/van-\/der-\/\+Wel; chad3814 upstream)
\end{DoxyItemize}

\subsection*{5.\+4.\+2}


\begin{DoxyItemize}
\item Fixed license metadata to conform to latest npm standards.
\end{DoxyItemize}

\subsection*{5.\+4.\+1}


\begin{DoxyItemize}
\item Fixed to work with browserify again (regression introduced in 5.\+4.\+0).
\end{DoxyItemize}

\subsection*{5.\+4.\+0}

This is a pretty exciting release! It includes a couple features I never really anticipated jsdom being awesome enough to have, but our wonderful contributors powered through and made them happen anyway\+:


\begin{DoxyItemize}
\item Added support for the default H\+T\+ML stylesheet when using {\ttfamily window.\+get\+Computed\+Style}! (akhaku)
\begin{DoxyItemize}
\item Notably, this makes j\+Query\textquotesingle{}s {\ttfamily show()} and {\ttfamily hide()} methods now work correctly; see \href{https://github.com/tmpvar/jsdom/issues/994}{\tt \#994}.
\end{DoxyItemize}
\item Added support for named properties on {\ttfamily window}\+: any elements with an {\ttfamily id} attribute, or certain elements with a {\ttfamily name} attribute, will cause properties to show up on the {\ttfamily window}, and thus as global variables within the jsdom. (Joris-\/van-\/der-\/\+Wel)
\begin{DoxyItemize}
\item Although this is fairly unfortunate browser behavior, it\textquotesingle{}s standardized and supported everywhere, so the fact that jsdom now supports this too means we can run a lot of scripts that would previously fail.
\item Previously, we only supported this for {\ttfamily $<$iframe$>$}s, and our implementation was quite buggy\+: e.\+g., {\ttfamily $<$iframe name=\char`\"{}add\+Event\+Listener\char`\"{}$>$} would override {\ttfamily window.\+add\+Event\+Listener}.
\item Now that we have the infrastructure in place, we anticipate expanding our support so that this works on e.\+g. {\ttfamily H\+T\+M\+L\+Form\+Element}s as well in the future.
\end{DoxyItemize}
\end{DoxyItemize}

We also have a bunch more fixes and additions\+:


\begin{DoxyItemize}
\item Implemented the \href{https://dom.spec.whatwg.org/#nondocumenttypechildnode}{\tt {\ttfamily Non\+Document\+Type\+Child\+Node}} mixin. Practically, this means adding {\ttfamily next\+Element\+Sibling} and {\ttfamily previous\+Element\+Sibling} to {\ttfamily Element} and the various types of {\ttfamily Character\+Data}. (brandon-\/bethke-\/neudesic)
\item Updated {\ttfamily Style\+Sheet\+List} to inherit from {\ttfamily Array}, as per the latest C\+S\+S\+OM spec.
\item Overhauled the handling of attributes throughout the D\+OM, to follow the spec more exactly.
\begin{DoxyItemize}
\item Our {\ttfamily Named\+Node\+Map} implementation is up to date, as are the various {\ttfamily Element} methods; other places in the code that deal with attributes now all go through a spec-\/compliant set of helpers.
\item Some weirdnesses around the {\ttfamily style} attribute were fixed along the way; see e.\+g. \href{https://github.com/tmpvar/jsdom/issues/1109}{\tt \#1109}.
\item However, {\ttfamily Attr} objects themselves are not yet spec-\/compliant (e.\+g., they still inherit from {\ttfamily Node}). That\textquotesingle{}s coming soon.
\end{DoxyItemize}
\item Fixed an unfortunate bug where {\ttfamily get\+Element\+By\+Id} would fail to work correctly on {\ttfamily $<$img$>$} elements whose {\ttfamily id} attributes were modified. (Joris-\/van-\/der-\/\+Wel)
\item Fixed the {\ttfamily virtual\+Console} option to work with {\ttfamily jsdom.\+env}, not just {\ttfamily jsdom.\+jsdom}. (jeffcarp)
\item Removed a few functions that were erroneously added to {\ttfamily window}\+: {\ttfamily mapper}, {\ttfamily map\+D\+O\+M\+Nodes}, and {\ttfamily visit\+Tree}. (Joris-\/van-\/der-\/\+Wel)
\end{DoxyItemize}

\subsection*{5.\+3.\+0}


\begin{DoxyItemize}
\item Added a {\ttfamily virtual\+Console} option to the document creation methods, along with the {\ttfamily jsdom.\+create\+Virtual\+Console} factory. (See \href{https://github.com/tmpvar/jsdom/blob/dbf88666d1152576237ed1c741263f5516bb4005/README.md#capturing-console-output}{\tt examples in the readme}.) With this option you can install a virtual console before the document is even created, thus allowing you to catch any virtual console events that occur during initialization. (jeffcarp)
\end{DoxyItemize}

\subsection*{5.\+2.\+0}


\begin{DoxyItemize}
\item Implemented much of the \href{https://dom.spec.whatwg.org/#interface-parentnode}{\tt {\ttfamily Parent\+Node}} mixin (Joris-\/van-\/der-\/\+Wel)\+:
\begin{DoxyItemize}
\item Moved {\ttfamily children} from {\ttfamily Node} to {\ttfamily Parent\+Node}, i.\+e., made it available on {\ttfamily Document}, {\ttfamily Document\+Fragment}, and {\ttfamily Element}, but not other types of nodes.
\item Made {\ttfamily children} a {\ttfamily H\+T\+M\+L\+Collection} instead of a {\ttfamily Node\+List}.
\item Implemented {\ttfamily first\+Element\+Child}, {\ttfamily last\+Element\+Child}, and {\ttfamily child\+Element\+Count}.
\end{DoxyItemize}
\item Implemented the {\ttfamily outer\+H\+T\+ML} setter. (Joris-\/van-\/der-\/\+Wel)
\item Fixed the {\ttfamily outer\+H\+T\+ML} getter for {\ttfamily $<$select$>$} and {\ttfamily $<$form$>$}. (Joris-\/van-\/der-\/\+Wel)
\item Fixed various issues with window-\/less documents, so that they no longer give incorrect results or blow up in strange ways. You can create such documents with e.\+g. {\ttfamily document.\+implementation.\+create\+H\+T\+M\+L\+Document()}. (Joris-\/van-\/der-\/\+Wel)
\item Fixed relative stylesheet resolution when using {\ttfamily @import}. (dbo)
\end{DoxyItemize}

\subsection*{5.\+1.\+0}


\begin{DoxyItemize}
\item Added support for the {\ttfamily Node\+Iterator} class from the D\+OM Standard. (Joris-\/van-\/der-\/\+Wel)
\item Fixed an issue with the initial request where it was not sharing its cookie jar with the subsequent requests, sometimes leading to a \char`\"{}possible Event\+Emitter memory leak detected\char`\"{} warning. (inikulin)
\item Updated tough-\/cookie to 0.\+13.\+0, bringing along many spec compliance fixes. (inikulin)
\item Added a fast failure in Node.\+jsâ„¢ with a clear error message, so that people don\textquotesingle{}t get confused by syntax errors.
\end{DoxyItemize}

\subsection*{5.\+0.\+1}


\begin{DoxyItemize}
\item Fixed {\ttfamily document.\+cookie} setter to no longer ignore {\ttfamily null}; instead it correctly sets a cookie of {\ttfamily \char`\"{}null\char`\"{}}. (Chrome is not compliant to the spec in this regard.)
\item Fixed documents created with {\ttfamily parsing\+Mode\+: \char`\"{}xml\char`\"{}} to no longer get {\ttfamily \char`\"{}$<$html$>$$<$head$>$$<$/head$>$$<$body$>$$<$/body$>$$<$/html$>$\char`\"{}} automatically inserted when calling {\ttfamily jsdom.\+jsdom()} with no arguments.
\item Fixed the {\ttfamily inner\+H\+T\+ML} setter to no longer ignore {\ttfamily undefined}; instead it correctly sets the inner\+H\+T\+ML to {\ttfamily \char`\"{}undefined\char`\"{}}.
\item Fixed {\ttfamily document.\+write} to throw for X\+ML documents as per the spec.
\item Fixed {\ttfamily document.\+write} to accept more than one argument (they get concatenated).
\item Fixed {\ttfamily document.\+write(\char`\"{}\char`\"{})} to no longer try to write {\ttfamily \char`\"{}$<$html$>$$<$head$>$$<$/head$>$$<$body$>$$<$/body$>$$<$/html$>$\char`\"{}}.
\end{DoxyItemize}

\subsection*{5.\+0.\+0}

This release overhauls how cookies are handled in jsdom to be less fiddly and more like-\/a-\/browser. The work for this was done by \href{https://github.com/inikulin}{\tt }, who is also our beloved parse5 maintainer.

You should only need to worry about upgrading to this release if you use jsdom\textquotesingle{}s cookie handling capabilities beyond the basics of reading and writing to {\ttfamily document.\+cookie}. If that describes you, here\textquotesingle{}s what changed\+:


\begin{DoxyItemize}
\item Removed {\ttfamily options.\+jar} and {\ttfamily options.\+document.\+cookie\+Domain} from the configuration for creating jsdom documents.
\item Instead, there is now a new option, {\ttfamily options.\+cookie\+Jar}, which accepts cookie jars created by the new {\ttfamily jsdom.\+create\+Cookie\+Jar()} A\+PI. You should use this if you intend to share cookie jars among multiple jsdom documents.
\item Within a given cookie jar, cookie access is now automatically handled on a domain basis, as the browser does, with the domain calculated from the document\textquotesingle{}s \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} (supplied as {\ttfamily options.\+url} when creating a document). This supplants the former {\ttfamily options.\+document.\+cookie\+Domain}.
\end{DoxyItemize}

In addition to these changes to the public A\+PI, the following new cookie-\/related features came along for the ride\+:


\begin{DoxyItemize}
\item Implemented automatic cookie-\/jar sharing with descendant {\ttfamily $<$iframe$>$}s. (So, if the iframe is same-\/domain, it can automatically access the appropriate cookies.)
\item Let {\ttfamily options.\+document.\+cookie} accept arrays, instead of just strings, for if you want to set multiple cookies at once.
\end{DoxyItemize}

Finally, it\textquotesingle{}s worth noting that we now delegate our cookie handling in general to the \href{https://www.npmjs.com/package/tough-cookie}{\tt tough-\/cookie} package, which should hopefully mean that it now captures many of the behaviors that were previously missing (for example \href{https://github.com/tmpvar/jsdom/issues/1027}{\tt \#1027}).  is working on \href{https://github.com/goinstant/tough-cookie/pull/30}{\tt a large pull request to fix tough-\/cookie to be more spec compliant}, which should automatically be picked up by jsdom installs once it is merged.

\subsection*{4.\+5.\+1}


\begin{DoxyItemize}
\item Removed unnecessary browserify dependency that was erroneously included in 4.\+5.\+0.
\end{DoxyItemize}

\subsection*{4.\+5.\+0}


\begin{DoxyItemize}
\item Added {\ttfamily document.\+current\+Script}. (jeffcarp)
\end{DoxyItemize}

\subsection*{4.\+4.\+0}


\begin{DoxyItemize}
\item All resources are now loaded with the \href{https://www.npmjs.com/package/request}{\tt request} package, which means that e.\+g. G\+Z\+I\+Pped resources will be properly uncompressed, redirects will be followed, and more. This was previously the case only for U\+R\+Ls passed directly to {\ttfamily jsdom.\+env}, and not for sub-\/resources inside the resulting page. (ssesha)
\end{DoxyItemize}

\subsection*{4.\+3.\+0}


\begin{DoxyItemize}
\item Made the click behavior for radio buttons and checkboxes work when doing {\ttfamily el.\+dispatch\+Event(click\+Event)}, not just when doing {\ttfamily el.\+click()}. (brandon-\/bethke-\/neudesic)
\item Added {\ttfamily default\+Prevented} property to {\ttfamily Event} instances, reflecting whether {\ttfamily ev.\+prevent\+Default()} has been called. (brandon-\/bethke-\/neudesic)
\item Moved the {\ttfamily click()} method from {\ttfamily H\+T\+M\+L\+Input\+Element.\+prototype} to {\ttfamily H\+T\+M\+L\+Element.\+prototype}, per the latest spec.
\item Made the {\ttfamily click()} method trigger a {\ttfamily Mouse\+Event} instead of just an {\ttfamily Event}.
\end{DoxyItemize}

\subsection*{4.\+2.\+0}


\begin{DoxyItemize}
\item Added a second parameter to {\ttfamily U\+I\+Event}, {\ttfamily Mouse\+Event}, and {\ttfamily Mutation\+Event}, which for now just behaves the same as that for {\ttfamily Event}. (Rich-\/\+Harris)
\end{DoxyItemize}

\subsection*{4.\+1.\+0}


\begin{DoxyItemize}
\item Added a second parameter to the {\ttfamily Event} constructor, which allows you to set the {\ttfamily bubbles} and {\ttfamily cancelable} properties. (brandon-\/bethke-\/neudesic)
\end{DoxyItemize}

\subsection*{4.\+0.\+5}


\begin{DoxyItemize}
\item Added {\ttfamily H\+T\+M\+L\+Unknown\+Element} and fix the parser/{\ttfamily document.\+create\+Element} to create those instead of {\ttfamily H\+T\+M\+L\+Element} for unknown elements.
\item Fixed issues with named and indexed properties on {\ttfamily window}, as well as {\ttfamily window.\+length}, with regard to {\ttfamily $<$frame$>$}s/{\ttfamily $<$iframe$>$}s being added and removed from the document.
\end{DoxyItemize}

{\itshape Note\+:} this probably should have been a minor version number increment (i.\+e. 4.\+1.\+0 instead of 4.\+0.\+5), since it added {\ttfamily H\+T\+M\+L\+Unknown\+Element}. We apologize for the deviation from semver.

\subsection*{4.\+0.\+4}


\begin{DoxyItemize}
\item Fixed parsing of doctypes by relying on the information provided by the html parser if possible.
\end{DoxyItemize}

\subsection*{4.\+0.\+3}


\begin{DoxyItemize}
\item Fixed events fired from {\ttfamily Event\+Target}s to execute their handlers in F\+I\+FO order, as per the spec.
\item Fixed a case where {\ttfamily child\+Nodes} would not be correctly up to date in some cases. (medikoo)
\item Sped up window creation with {\ttfamily jsdom.\+env} by $\sim$600\%, for the special case when no scripts are to be executed.
\end{DoxyItemize}

\subsection*{4.\+0.\+2}


\begin{DoxyItemize}
\item {\ttfamily Event\+Target} is now correctly in the prototype chain of {\ttfamily Window}.
\item {\ttfamily Event\+Target} argument validation is now correct according to the D\+OM Standard.
\item {\ttfamily D\+O\+M\+Exception} now behaves more like it should per Web I\+DL. In particular it has a more comprehensive set of constants, and instances now have {\ttfamily name} properties.
\item {\ttfamily new Event(\char`\"{}click\char`\"{})} can now be dispatched. (lovebear)
\item {\ttfamily document.\+create\+Event} now behaves more like it should according to the D\+OM Standard\+: it accepts a wider range of arguments, but will throw if an invalid one is given. (lovebear)
\item Fixed a regression in our browser support that required Chrome 41 as of 4.\+0.\+1; now Chrome 40 will work, as well as (in theory, although less well-\/tested) the latest stable versions of Firefox and IE.
\end{DoxyItemize}

\subsection*{4.\+0.\+1}


\begin{DoxyItemize}
\item Fixed\+: {\ttfamily Node.\+prototype.\+contains} to always return a boolean. This was a regression in 3.\+1.\+1. (Joris-\/van-\/der-\/\+Wel)
\item Fixed\+: {\ttfamily Document.\+prototype} no longer contains its own {\ttfamily owner\+Document} getter, instead correctly delegating to {\ttfamily Node.\+prototype}.
\item Fixed\+: some edge cases regarding running {\ttfamily $<$script$>$}s in browserified jsdom.
\item A couple fixes from updated dependencies (although you would have gotten these anyway with a fresh install, due to floating version specifiers)\+:
\begin{DoxyItemize}
\item csstyle minimum version bumped from 0.\+2.\+21 to 0.\+2.\+23, fixing handling of {\ttfamily 0} when setting numeric C\+SS properties and parsing of shorthand {\ttfamily font} declarations.
\item parse5 minimum version bumped from 1.\+3.\+1 to 1.\+3.\+2 to, fixing the parsing of {\ttfamily $<$form$>$} elements inside {\ttfamily $<$template$>$} elements.
\end{DoxyItemize}
\end{DoxyItemize}

\subsection*{4.\+0.\+0}

This release relies on the newly-\/overhauled {\ttfamily vm} module of io.\+js to eliminate the Contextify native module dependency. jsdom should now be much easier to use and install, without requiring a C++ compiler toolchain!

Note that as of this release, jsdom no longer works with Node.\+jsâ„¢, and instead requires io.\+js. You are still welcome to install a release in \href{https://github.com/tmpvar/jsdom/tree/3.x}{\tt the 3.\+x series} if you are stuck on legacy technology like Node.\+jsâ„¢.

In the process of rewriting parts of jsdom to use {\ttfamily vm}, a number of related fixes were made regarding the {\ttfamily Window} object\+:


\begin{DoxyItemize}
\item In some cases, state was implicitly shared between {\ttfamily Window} instancesâ€”especially parser-\/ and serializer-\/related state. This is no longer the case, thankfully.
\item A number of properties of {\ttfamily Window} were updated for spec compliance\+: some data properties became accessors, and all methods moved from the prototype to the instance.
\item The non-\/standard {\ttfamily document.\+parent\+Window} was removed, in favor of the standard {\ttfamily document.\+default\+View}. Our apologies for encouraging use of {\ttfamily parent\+Window} in our R\+E\+A\+D\+ME, tests, and examples.
\end{DoxyItemize}

\subsection*{3.\+1.\+2}


\begin{DoxyItemize}
\item Some fixes to the {\ttfamily N\+O\+T\+\_\+\+I\+M\+P\+L\+E\+M\+E\+N\+T\+ED} internal helper, which should eliminate the cases where calling e.\+g. {\ttfamily window.\+alert} crashes your application.
\item Fixed a global variable leak when triggering {\ttfamily N\+O\+T\+\_\+\+I\+M\+P\+L\+E\+M\+E\+N\+T\+ED} methods, like {\ttfamily window.\+location.\+reload}.
\item Fixed the \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} resolution algorithm to handle {\ttfamily about\+:blank} properly on all systems (previously it only worked on Windows). This is especially important since as of 3.\+0.\+0 the default \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} is {\ttfamily about\+:blank}.
\item Fixed, at least partially, the ability to run {\ttfamily $<$script$>$}s inside a browserified jsdom instance. This is done by dynamically rewriting the source code so that global variable references become explicit references to {\ttfamily window.\+variable\+Name}, so it is not foolproof.
\end{DoxyItemize}

\subsection*{3.\+1.\+1}


\begin{DoxyItemize}
\item Updated {\ttfamily Node.\+prototype.\+is\+Equal\+Node} to the algorithm of the D\+OM Standard, fixing a bug where it would throw an error along the way.
\item Removed {\ttfamily Node.\+prototype.\+is\+Same\+Node}, which is not present in the D\+OM Standard (and was just a verbose {\ttfamily ===} check anyway).
\item Fixed a couple small issues while browserifying, mainly around {\ttfamily jsdom.\+env}. However, while doing so discovered that {\ttfamily $<$script$>$}s in general don\textquotesingle{}t work too well in a browserified jsdom; see \href{https://github.com/tmpvar/jsdom/issues/1023}{\tt \#1023}.
\end{DoxyItemize}

\subsection*{3.\+1.\+0}


\begin{DoxyItemize}
\item Added support for \href{https://github.com/tmpvar/jsdom#custom-external-resource-loader}{\tt custom external resource loading}. (tobie)
\end{DoxyItemize}

\subsection*{3.\+0.\+3}


\begin{DoxyItemize}
\item Fixed some stray byte-\/order marks in a couple files, which incidentally \href{https://github.com/substack/node-browserify/issues/1095}{\tt break Browserify}. (sterpe)
\end{DoxyItemize}

\subsection*{3.\+0.\+2}


\begin{DoxyItemize}
\item Fixed another edge case where unchecking a radio button would incorrectly uncheck radio buttons outside the containing form. (zpao)
\end{DoxyItemize}

\subsection*{3.\+0.\+1}


\begin{DoxyItemize}
\item Fixed errors when serializing text nodes (possibly only occurred when inside {\ttfamily $<$template$>$}).
\item Handle null bytes being passed to {\ttfamily jsdom.\+env}\textquotesingle{}s autodetecting capabilities. (fluffybunnies)
\item Handle empty H\+T\+ML strings being passed to {\ttfamily jsdom.\+env}\textquotesingle{}s {\ttfamily html} option. (fluffybunnies)
\end{DoxyItemize}

\subsection*{3.\+0.\+0}

This release updates large swathes of the D\+OM A\+P\+Is to conform to the standard, mostly by removing old stuff. It also fixes a few bugs, introduces a couple new features, and changes some defaults.

3.\+0.\+x will be the last release of jsdom to support Node.\+js. All future releases (starting with 4.\+0.\+0) will require \href{https://iojs.org/}{\tt io.\+js}, whose \href{https://github.com/iojs/io.js/blob/v1.x/CHANGELOG.md#vm}{\tt new {\ttfamily vm} module} will allow us to remove our contextify native-\/module dependency. (Given that I submitted the relevant patch to joyent/node \href{https://github.com/joyent/node/commit/7afdba6e0bc3b69c2bf5fdbd59f938ac8f7a64c5}{\tt 1.\+5 years ago}, I\textquotesingle{}m very excited that we can finally use it!)


\begin{DoxyItemize}
\item By default documents now use {\ttfamily about\+:blank} as their \mbox{\hyperlink{namespace_u_r_l}{U\+RL}}, instead of trying to infer some type of file \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} from the call site (in Node.\+js) or using {\ttfamily location.\+href} (in browsers).
\item Introduced a new \char`\"{}virtual console\char`\"{} abstraction for capturing console output from inside the page. \href{https://github.com/tmpvar/jsdom#capturing-console-output}{\tt See the readme for more information.} Note that {\ttfamily console.\+error} will no longer contribute to the (non-\/standard, and likely dying in the future) {\ttfamily window.\+errors} array. (jeffcarp)
\item Added the named {\ttfamily new Image(width, height)} constructor. (vinothkr)
\item Fixed an exception when using {\ttfamily query\+Selector} with selectors like {\ttfamily div\+:last-\/child $>$ span\mbox{[}title\mbox{]}}.
\item Removed all traces of entities, entity types, notations, default attributes, and C\+D\+A\+TA sections.
\item Differentiated between X\+ML and H\+T\+ML documents better, for example in how they handle the casing of tag names and attributes.
\item Updated {\ttfamily D\+O\+M\+Implementation} to mostly work per-\/spec, including removing {\ttfamily add\+Feature} and {\ttfamily remove\+Feature} methods, the {\ttfamily owner\+Document} property, and making {\ttfamily has\+Feature} always return {\ttfamily true}.
\item Re-\/did the {\ttfamily Character\+Data} implementation to follow the algorithms in the D\+OM Standard; this notably removes a few exceptions that were previously thrown.
\item Re-\/did {\ttfamily Comment}, {\ttfamily Text}, and {\ttfamily Processing\+Instruction} to follow the D\+OM Standard and derive from {\ttfamily Character\+Data}.
\item Re-\/did {\ttfamily Document\+Type} to follow the D\+OM Standard and be much simpler, notably removing notations, entities, and default attributes.
\item Fixed a variety of accessors on {\ttfamily Node}, {\ttfamily Element}, {\ttfamily Attr}, and {\ttfamily Document}; some were removed that were nonstandard (especially setters); others were updated to reflect the spec; etc.
\item Re-\/did name/qname validation, which is done by various A\+P\+Is, to work with the xml-\/name-\/validator package and some centralized algorithms.
\item Made the X\+ML parser at least somewhat aware of processing instructions.
\item Cleaned up doctype parsing and association between doctypes and documents. More exotic doctypes should parse better now.
\item {\ttfamily document.\+content\+Type} now is generally inferred from the parsing mode of the document.
\item Moved some properties to {\ttfamily Document.\+prototype} and {\ttfamily Window.\+prototype} instead of setting them as own properties during the document/window creation. This should improve memory usage (as well as spec compliance).
\end{DoxyItemize}

\subsection*{2.\+0.\+0}

This release is largely a refactoring release to remove the defunct concept of \char`\"{}levels\char`\"{} from jsdom, in favor of the \href{https://wiki.whatwg.org/wiki/FAQ#What_does_.22Living_Standard.22_mean.3F}{\tt living standard model} that browsers follow. Although the code is still organized that way, that\textquotesingle{}s now https\+://github.com/tmpvar/jsdom/blob/2ff5747488ad4b518fcef97a026c82eab42a0a14/lib/\+R\+E\+A\+D\+M\+E.\+md \char`\"{}noted as a historical artifact\char`\"{}. The public A\+PI changes while doing so were fairly minimal, but this sets the stage for a cleaner jsdom code structure going forward.


\begin{DoxyItemize}
\item Removed\+: {\ttfamily jsdom.\+level}, and the {\ttfamily level} option from {\ttfamily jsdom.\+jsdom}.
\item Change\+: the nonstandard {\ttfamily Element.\+prototype.\+matches\+Selector} method was replaced with the standard {\ttfamily Element.\+prototype.\+matches}. (Ken\+Powers)
\item Fix\+: {\ttfamily query\+Selector} correctly coerces its argument to a string (1.\+2.\+2 previously fixed this for {\ttfamily query\+Selector\+All}).
\end{DoxyItemize}

\subsection*{1.\+5.\+0}


\begin{DoxyItemize}
\item Add\+: missing {\ttfamily window.\+console} methods, viz. {\ttfamily assert}, {\ttfamily clear}, {\ttfamily count}, {\ttfamily debug}, {\ttfamily group}, {\ttfamily group\+Collapse}, {\ttfamily group\+End}, {\ttfamily table}, {\ttfamily time}, {\ttfamily time\+End}, and {\ttfamily trace}. All except {\ttfamily assert} do nothing for now, but see \href{https://github.com/tmpvar/jsdom/issues/979}{\tt \#979} for future plans. (jeffcarp)
\item Tweak\+: make {\ttfamily child\+Nodes}, and the many places in jsdom that use it, much faster. (Joris-\/van-\/der-\/\+Wel)
\end{DoxyItemize}

\subsection*{1.\+4.\+1}


\begin{DoxyItemize}
\item Tweak\+: faster implementation of {\ttfamily Node\+List.\+prototype.\+length}, which should speed up common operations like {\ttfamily append\+Child} and similar. (Joris-\/van-\/der-\/\+Wel)
\end{DoxyItemize}

\subsection*{1.\+4.\+0}


\begin{DoxyItemize}
\item Fix\+: {\ttfamily H\+T\+M\+L\+Input\+Element.\+prototype.\+checked} and {\ttfamily default\+Checked} now behave per the spec. (Joris-\/van-\/der-\/\+Wel)
\item Fix\+: {\ttfamily H\+T\+M\+L\+Option\+Element.\+prototype.\+selected} now behaves per the spec. (Joris-\/van-\/der-\/\+Wel)
\item Fix\+: {\ttfamily H\+T\+M\+L\+Input\+Element.\+prototype.\+value} now behaves per the spec. (Joris-\/van-\/der-\/\+Wel)
\item Fix\+: {\ttfamily H\+T\+M\+L\+Text\+Area\+Element.\+prototype.\+value} and {\ttfamily default\+Value} now behave per the spec. (Joris-\/van-\/der-\/\+Wel)
\item Add\+: {\ttfamily H\+T\+M\+L\+Text\+Area\+Element.\+prototype.\+default\+Value} now has a setter, and {\ttfamily H\+T\+M\+L\+Text\+Area\+Element.\+prototype.\+text\+Length} now exists. (Joris-\/van-\/der-\/\+Wel)
\item Fix\+: resetting a {\ttfamily $<$form$>$} now behaves per spec for all different types of form elements. (Joris-\/van-\/der-\/\+Wel)
\item Fix\+: radio buttons reset other radio buttons correctly now per the spec. (Joris-\/van-\/der-\/\+Wel)
\item Fix\+: {\ttfamily document.\+clone\+Node} now works. (A\+V\+GP)
\item Fix\+: {\ttfamily has\+Attribute} is now case-\/insensitive, as it should be. (A\+V\+GP)
\item Fix\+: {\ttfamily div.\+to\+String()} now returns {\ttfamily \mbox{[}object H\+T\+M\+L\+Div\+Element\mbox{]}}. (A\+V\+GP)
\end{DoxyItemize}

\subsection*{1.\+3.\+2}


\begin{DoxyItemize}
\item Fix\+: check if {\ttfamily module.\+parent} exists before using it to construct a document\textquotesingle{}s initial \mbox{\hyperlink{namespace_u_r_l}{U\+RL}}. Apparently some testing frameworks like Jest do not correctly emulate the module environment; this compensates. (Seg\+Faultx64)
\end{DoxyItemize}

\subsection*{1.\+3.\+1}


\begin{DoxyItemize}
\item Fix\+: changing attributes on {\ttfamily $<$option$>$} elements will now have the correct consequences. For example changing the {\ttfamily id} attribute now interacts correctly with {\ttfamily document.\+get\+Element\+By\+Id}. (Joris-\/van-\/der-\/\+Wel)
\end{DoxyItemize}

\subsection*{1.\+3.\+0}


\begin{DoxyItemize}
\item Add\+: moved {\ttfamily focus} and {\ttfamily blur} methods to {\ttfamily H\+T\+M\+L\+Element.\+prototype}, instead of having them only be present on certain element prototypes. Our focus story is still not very spec-\/compliant, but this is a step in the right direction. (vincentsiao)
\end{DoxyItemize}

\subsection*{1.\+2.\+3}


\begin{DoxyItemize}
\item Tweak\+: improve performance of {\ttfamily Node.\+prototype.\+insert\+Before}, {\ttfamily Node.\+prototype.\+remove\+Child}, and several {\ttfamily Attribute\+List} methods. (Joris-\/van-\/der-\/\+Wel)
\end{DoxyItemize}

\subsection*{1.\+2.\+2}


\begin{DoxyItemize}
\item Fix\+: {\ttfamily query\+Selector\+All} correctly coerces its argument to a string; notably this allows you to pass arrays. (jeffcarp)
\item Fix\+: the {\ttfamily data} setter on text nodes correctly coerces the new value to a string. (medikoo)
\item Fix\+: {\ttfamily document.\+to\+String()} now returns {\ttfamily \mbox{[}object H\+T\+M\+L\+Document\mbox{]}}. (jeffcarp)
\end{DoxyItemize}

\subsection*{1.\+2.\+1}


\begin{DoxyItemize}
\item Fix\+: handling of {\ttfamily $<$template$>$} element parsing and serialization, now that it is supported by parse5. (inikulin)
\end{DoxyItemize}

\subsection*{1.\+2.\+0}


\begin{DoxyItemize}
\item Add\+: {\ttfamily Node\+Filter}, in particular its constants. (fhemberger)
\item Fix\+: initial {\ttfamily history.\+length} should be {\ttfamily 1}, not {\ttfamily 0}. (rgrove)
\item Fix\+: {\ttfamily history.\+push\+State} and {\ttfamily history.\+replace\+State} should not fire the {\ttfamily popstate} event. (rgrove)
\end{DoxyItemize}

\subsection*{1.\+1.\+0}


\begin{DoxyItemize}
\item Add\+: {\ttfamily document.\+implementation.\+create\+H\+T\+M\+L\+Document()}. (fhemberger)
\item Fix\+: {\ttfamily local\+Name} was sometimes {\ttfamily null} for elements when it should not be. (fhemberger)
\end{DoxyItemize}

\subsection*{1.\+0.\+3}


\begin{DoxyItemize}
\item Update\+: no longer requiring separate {\ttfamily cssstyle} and {\ttfamily cssstyle-\/browserify} dependencies; now {\ttfamily cssstyle} can be used directly. This also un-\/pins the {\ttfamily cssstyle} dependency so that future fixes arrive as they appear upstream.
\end{DoxyItemize}

\subsection*{1.\+0.\+2}


\begin{DoxyItemize}
\item Fix\+: temporarily pin {\ttfamily cssstyle} dependency to at most 0.\+2.\+18 until \href{https://github.com/chad3814/CSSStyleDeclaration/issues/20}{\tt chad3814/\+C\+S\+S\+Style\+Declaration\#20} is fixed.
\item Fix\+: browserifying jsdom should work better now that the required packages are included as {\ttfamily dependencies} instead of {\ttfamily dev\+Dependencies}. (Sebmaster)
\item Fix\+: using {\ttfamily jsom.\+env} in a browser environment now correctly defaults {\ttfamily options.\+url} to {\ttfamily location.\+href} instead of trying to infer a reasonable {\ttfamily fil\+://} \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} using techniques that fail in the browser. (rattrayalex)
\end{DoxyItemize}

\subsection*{1.\+0.\+1}


\begin{DoxyItemize}
\item Fix\+: the return value of {\ttfamily Event\+Target.\+prototype.\+dispatch\+Event} should be {\ttfamily true} when the default is {\itshape not} prevented; previously it was the opposite. (eventualbuddha)
\end{DoxyItemize}

\subsection*{1.\+0.\+0}

For a consolidated list of changes from 0.\+11.\+1 to 1.\+0.\+0, see \href{https://github.com/tmpvar/jsdom/wiki/Changes-from-0.11.1-to-1.0.0}{\tt this wiki page}.


\begin{DoxyItemize}
\item Remove\+: nonstandard {\ttfamily Event\+Target.\+get\+Listeners}; {\ttfamily Event\+Target.\+forward\+Iterator}; {\ttfamily Event\+Target.\+backward\+Iterator}; {\ttfamily Event\+Target.\+single\+Iterator}.
\item Remove\+: nonstandard {\ttfamily document.\+inner\+H\+T\+ML}. (jorendorff)
\item Fix\+: {\ttfamily value} and {\ttfamily default\+Value} properties of a {\ttfamily H\+T\+M\+L\+Input\+Element} are now correctly synced to the {\ttfamily value=\char`\"{}\char`\"{}} attribute. (Sebmaster)
\end{DoxyItemize}

\subsection*{1.\+0.\+0-\/pre.\+7}


\begin{DoxyItemize}
\item Remove\+: support for old, untested H\+T\+ML and X\+ML parsers, namely davglass/node-\/htmlparser and isaacs/sax-\/js. In the future we plan to work toward a standardized parsing interface that other parsers can implement, instead of adding custom code to jsdom for various parsers. This interface still is being decided though, as it needs to support complex things like pausing the parse stream (for {\ttfamily document.\+write}) and parsing disconnected fragments (for {\ttfamily document.\+inner\+H\+T\+ML}). (Sebmaster)
\item Add\+: new {\ttfamily parsing\+Mode} configuration, to allow you to manually specify X\+ML or H\+T\+ML. (Sebmaster)
\item Change\+: jsdom will no longer use the presence of {\ttfamily $<$?xml} or similar to attempt to auto-\/detect X\+H\+T\+ML documents. Instead, it will by default treat them the same as browsers do, with the {\ttfamily $<$?xml} declaration just being a bogus comment. If you need your document interpreted as X\+H\+T\+ML instead of H\+T\+ML, use the {\ttfamily parsing\+Mode} option. (Sebmaster)
\item Tweak\+: memoize various D\+O\+M-\/querying functions (e.\+g. {\ttfamily get\+Elements\+By\+Tag\+Name}, {\ttfamily query\+Selector}, etc.) to improve performance. (ccarpita)
\end{DoxyItemize}

\subsection*{1.\+0.\+0-\/pre.\+6}


\begin{DoxyItemize}
\item Fix\+: another parsing issues with void elements and {\ttfamily inner\+H\+T\+ML}, this time related to disconnected nodes. This was a regression between 0.\+11.\+1 and 1.\+0.\+0-\/pre.\+1. (paton)
\item Fix\+: same-\/named radio inputs should not be mutually exclusive unless they are in the same form. (stof)
\end{DoxyItemize}

\subsection*{1.\+0.\+0-\/pre.\+5}


\begin{DoxyItemize}
\item Fix\+: sometimes calling {\ttfamily window.\+close()} would cause a segfault. (paton)
\end{DoxyItemize}

\subsection*{1.\+0.\+0-\/pre.\+4}


\begin{DoxyItemize}
\item Fix\+: attributes and elements now have their {\ttfamily prefix}, {\ttfamily local\+Name}, and {\ttfamily namespace\+U\+RI} properties set correctly in all cases. (Excepting {\ttfamily application/xhtml+xml} mode, which jsdom does not support yet.) (Sebmaster)
\end{DoxyItemize}

\subsection*{1.\+0.\+0-\/pre.\+3}


\begin{DoxyItemize}
\item Fix\+: void elements no longer parsed correctly when using {\ttfamily inner\+H\+T\+ML}. This was a regression between 0.\+11.\+1 and 1.\+0.\+0-\/pre.\+1. (Sebmaster)
\end{DoxyItemize}

\subsection*{1.\+0.\+0-\/pre.\+2}


\begin{DoxyItemize}
\item Fix\+: parsing and serialization of attributes in the form {\ttfamily x\+:y}, e.\+g. {\ttfamily xmlns\+:xlink} or {\ttfamily xlink\+:href}. This was a regression between 0.\+11.\+1 and 1.\+0.\+0-\/pre.\+1. (Sebmaster)
\end{DoxyItemize}

\subsection*{1.\+0.\+0-\/pre.\+1}

This is a prerelease of jsdom\textquotesingle{}s first major version. It incorporates several great additions, as well as a general cleanup of the A\+PI surface, which make it more backward-\/incompatible than usual. Starting with the 1.\+0.\+0 release, we will be following semantic versioning, so that you can depend on stability within major version ranges. But we still have \href{https://github.com/tmpvar/jsdom/issues?q=is%3Aopen+is%3Aissue+milestone%3A1.0}{\tt a few more issues} before we can get there, so I don\textquotesingle{}t want to do 1.\+0.\+0 quite yet.

This release owes a special thanks to \href{https://github.com/Sebmaster}{\tt }, for his amazing work taking on some of the hardest problems in jsdom and solving them with gusto.

\subsubsection*{Major changes}


\begin{DoxyItemize}
\item jsdom now can be browserified into a bundle that works in web workers! This is highly experimental, but also highly exciting! (lawnsea)
\item An overhaul of the \href{https://github.com/tmpvar/jsdom#initialization-lifecycle}{\tt initialization lifecycle}, to bring more control and address common use cases. (Sebmaster)
\item The excellent \href{https://npmjs.org/package/parse5}{\tt parse5} H\+T\+ML parser is now the default parser, fixing many parsing bugs and giving us full, official-\/test-\/suite-\/passing H\+T\+ML parsing support. This especially impacts documents that didn\textquotesingle{}t include optional tags like {\ttfamily $<$html$>$}, {\ttfamily $<$head$>$}, or {\ttfamily $<$body$>$} in their source. We also use parse5 for serialization, fixing many bugs there. (Sebmaster)
\item As part of the new parser story, we are not supporting X\+ML for now. It might work if you switch to a different parser (e.\+g. htmlparser2), but in the end, H\+T\+ML and X\+ML are very different, and we are not attempting to be an X\+ML D\+OM. That said, we eventually want to support X\+ML to the same extent browsers do (i.\+e., support X\+H\+T\+ML and S\+VG, with an appropriate M\+I\+ME type switch); this is being planned in \href{https://github.com/tmpvar/jsdom/issues/820}{\tt \#820}.
\end{DoxyItemize}

\subsubsection*{Removed jsdom A\+P\+Is}


\begin{DoxyItemize}
\item {\ttfamily jsdom.\+create\+Window}\+: use {\ttfamily document.\+parent\+Window} after creating a document
\item {\ttfamily jsdom.\+html}\+: use {\ttfamily jsdom.\+jsdom}
\item {\ttfamily jsdom.\+version}\+: use {\ttfamily require(\char`\"{}jsdom/package.\+json\char`\"{}).version}
\item {\ttfamily jsdom.\+level}\+: levels are deprecated and will probably be removed in 2.\+0.\+0
\item {\ttfamily jsdom.\+dom}
\item {\ttfamily jsdom.\+browser\+Augmentation}
\item {\ttfamily jsdom.\+window\+Augmentation}
\end{DoxyItemize}

\subsubsection*{Changed jsdom A\+P\+Is}


\begin{DoxyItemize}
\item {\ttfamily jsdom.\+jsdom} no longer takes a level as its second argument.
\item {\ttfamily jsdom.\+j\+Queryify} now requires a j\+Query \mbox{\hyperlink{namespace_u_r_l}{U\+RL}}, since \href{http://blog.jquery.com/2014/07/03/dont-use-jquery-latest-js/}{\tt always picking the latest was a bad idea}.
\end{DoxyItemize}

\subsubsection*{Removed non-\/standard D\+OM A\+P\+Is}


\begin{DoxyItemize}
\item {\ttfamily document.\+create\+Window}\+: use {\ttfamily document.\+parent\+Window}
\item {\ttfamily document.\+inner\+H\+T\+ML} and {\ttfamily document.\+outer\+H\+T\+ML}\+: use the new {\ttfamily jsdom.\+serialize\+Document} to include the D\+O\+C\+T\+Y\+PE, or use {\ttfamily document.\+document\+Element.\+outer\+H\+T\+ML} to omit it.
\end{DoxyItemize}

\subsubsection*{Other fixes}


\begin{DoxyItemize}
\item Allow empty strings to be passed to {\ttfamily jsdom.\+env}. (michaelmior)
\item Fix for a memory leak in {\ttfamily Event\+Target.\+prototype.\+dispatch\+Event}. (Joris-\/van-\/der-\/\+Wel)
\item Make event listeners in the capture phase also fire on the event target. (Joris-\/van-\/der-\/\+Wel)
\item Correctly reset {\ttfamily event\+Phase} and {\ttfamily current\+Target} on events, before and after a dispatch. (Joris-\/van-\/der-\/\+Wel)
\item Fix {\ttfamily document.\+cookie = null} to not throw, but instead just do nothing. (kapouer)
\end{DoxyItemize}

\subsection*{0.\+11.\+1}


\begin{DoxyItemize}
\item Add\+: {\ttfamily Node.\+prototype.\+parent\+Element}. (lukasbuenger)
\item Fix\+: attributes that are reflected as properties should be `'\textquotesingle{}{\ttfamily when not present, instead of}null{\ttfamily . (Note that}get\+Attribute{\ttfamily still returns}null{\ttfamily for them). (thejameskyle)}
\item {\ttfamily Fix\+:}text\+Content{\ttfamily now works for nodes that do not have children, like text nodes for example. (hayes)}
\item {\ttfamily Fix\+:}jsdom.\+j\+Queryify\`{} was using the wrong \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} for j\+Query by default. (lukasbuenger)
\end{DoxyItemize}

\subsection*{0.\+11.\+0}


\begin{DoxyItemize}
\item Add\+: new default level, {\ttfamily living}, reflecting our focus on the \href{http://dom.spec.whatwg.org/}{\tt D\+OM Living Standard} and the \href{http://www.whatwg.org/specs/web-apps/current-work/multipage/}{\tt H\+T\+ML Living Standard}, which are what browsers actually implement. This should open the door for more features of the modern D\+OM and H\+T\+ML specs to be implemented in jsdom. (robotlovesyou)
\item Add\+: {\ttfamily Node.\+prototype.\+contains} now implemented. (robotlovesyou)
\item Add\+: {\ttfamily navigator.\+cookie\+Enabled} now implemented; it always returns {\ttfamily true}. (Sebmaster)
\item Change\+: D\+O\+C\+T\+Y\+P\+Es no longer have their {\ttfamily name} property uppercased during parsing, and appear in the output of {\ttfamily document.\+inner\+H\+T\+ML}.
\item Fix\+: {\ttfamily Node.\+prototype.\+compare\+Document\+Position} implemented correctly; various document position constants added to the {\ttfamily Node} constructor. (robotlovesyou)
\item Fix\+: {\ttfamily Document\+Type.\+prototype.\+parent\+Node} now returns the document node, not {\ttfamily null}. (robotlovesyou)
\item Fix\+: various {\ttfamily navigator} properties are now getters, not data properties. (Sebmaster)
\item Fix\+: a bug involving invalid script paths and {\ttfamily jsdom.\+j\+Queryify}. (Sebmaster)
\end{DoxyItemize}

\subsection*{0.\+10.\+6}


\begin{DoxyItemize}
\item Add\+: remaining \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} properties to {\ttfamily window.\+location} and {\ttfamily H\+T\+M\+L\+Anchor\+Element}.
\item Fix\+: the presence of {\ttfamily String.\+prototype.\+normalize}, which is available by default in Node 0.\+11.\+13 onwards, caused reflected attributes to break. (brock8503)
\item Fix\+: iframes now correctly load {\ttfamily about\+:blank} when the {\ttfamily src} attribute is empty or missing. (mcmathja)
\item Fix\+: documents containing only whitespace now correctly generate wrapper documents, just like blank documents do. (nikolas)
\item Tweak\+: lazy-\/load the request module, to improve overall jsdom loading time. (tantaman)
\end{DoxyItemize}

\subsection*{0.\+10.\+5}


\begin{DoxyItemize}
\item Fix\+: the list of void elements has been updated to match the latest H\+T\+ML spec.
\item Fix\+: when serializing void elements, don\textquotesingle{}t include a {\ttfamily /}\+: i.\+e. the result is now {\ttfamily $<$br$>$} instead of {\ttfamily $<$br /$>$}.
\end{DoxyItemize}

\subsection*{0.\+10.\+4}


\begin{DoxyItemize}
\item Fix\+: another case was found where j\+Query 1.\+11\textquotesingle{}s {\ttfamily show()} method would cause errors.
\item Add\+: {\ttfamily query\+Selector} and {\ttfamily query\+Selector\+All} methods to {\ttfamily Document\+Fragment}s. (Joris-\/van-\/der-\/\+Wel)
\end{DoxyItemize}

\subsection*{0.\+10.\+3}


\begin{DoxyItemize}
\item Fix\+: various defaults on {\ttfamily H\+T\+M\+L\+Anchor\+Element} and {\ttfamily window.\+location} should not be {\ttfamily null}; they should usually be the empty string.
\end{DoxyItemize}

\subsection*{0.\+10.\+2}


\begin{DoxyItemize}
\item Fix\+: Using j\+Query 1.\+11\textquotesingle{}s {\ttfamily show()} method would cause an error to be thrown.
\item Fix\+: {\ttfamily window.\+location} properties were not updating correctly after using {\ttfamily push\+State} or {\ttfamily replace\+State}. (toomanydaves)
\end{DoxyItemize}

\subsection*{0.\+10.\+1}


\begin{DoxyItemize}
\item Fix\+: {\ttfamily window.\+location.\+port} should default to {\ttfamily \char`\"{}\char`\"{}}, not {\ttfamily null}. (bpeacock)
\end{DoxyItemize}

\subsection*{0.\+10.\+0}


\begin{DoxyItemize}
\item Add\+: a more complete {\ttfamily document.\+cookie} implementation, that supports multiple cookies. Note that options like {\ttfamily path}, {\ttfamily max-\/age}, etc. are still ignored. (dai-\/shi)
\end{DoxyItemize}

\subsection*{0.\+9.\+0}


\begin{DoxyItemize}
\item Add\+: implement attribute ordering semantics from W\+H\+A\+T\+WG D\+OM spec, and in general overhaul attribute storage implementation to be much more awesome and accurate. (lddubeau)
\item Add\+: {\ttfamily port} and {\ttfamily protocol} to {\ttfamily H\+T\+M\+L\+Anchor\+Element}. (sporchia)
\item Fix\+: make {\ttfamily H\+T\+M\+L\+Input\+Element} not have a {\ttfamily type} {\itshape attribute} by default. It still has a default value for the {\ttfamily type} {\itshape property}, viz. {\ttfamily \char`\"{}text\char`\"{}}. (aredridel)
\item Fix\+: treat empty namespace U\+RI as meaning \char`\"{}no namespace\char`\"{} with the {\ttfamily get\+Attribute\+NS}, {\ttfamily has\+Attribute\+NS}, and {\ttfamily set\+Attribute\+NS} functions. (lddubeau)
\item Fix\+: reference typed arrays in a way that doesn\textquotesingle{}t immediately break on Node 0.\+6. Node 0.\+6 isn\textquotesingle{}t supported in general, though. (kangax)
\end{DoxyItemize}

\subsection*{0.\+8.\+11}


\begin{DoxyItemize}
\item Add\+: store and use cookies between requests; customizable cookie jars also possible. (stockholmux)
\item Fix\+: attributes named the same as prototype properties of {\ttfamily Named\+Node\+Map} no longer break jsdom. (papandreou)
\item Fix\+: {\ttfamily remove\+Attribute\+NS} should not throw on missing attributes. (lddubeau)
\item Change\+: remove {\ttfamily \+\_\+\+\_\+proto\+\_\+\+\_\+}, {\ttfamily \+\_\+\+\_\+define\+Getter\+\_\+\+\_\+}, and {\ttfamily \+\_\+\+\_\+define\+Setter\+\_\+\+\_\+} usage, as part of a project to make jsdom work better across multiple environments. (lawnsea)
\end{DoxyItemize}

\subsection*{0.\+8.\+10}


\begin{DoxyItemize}
\item Add\+: {\ttfamily hash} property to {\ttfamily H\+T\+M\+L\+Anchor\+Element}. (fr0z3nk0)
\end{DoxyItemize}

\subsection*{0.\+8.\+9}


\begin{DoxyItemize}
\item Upgrade\+: {\ttfamily cssom} to 0.\+3.\+0, adding support for {\ttfamily @-\/moz-\/document} and fixing a few other issues.
\item Upgrade\+: {\ttfamily cssstyle} to 0.\+2.\+6, adding support for many shorthand properties and better unit handling.
\end{DoxyItemize}

\subsection*{0.\+8.\+8}


\begin{DoxyItemize}
\item Fix\+: avoid repeated {\ttfamily Node\+List.\+prototype.\+length} calculation, for a speed improvement. (peller)
\end{DoxyItemize}

\subsection*{0.\+8.\+7}


\begin{DoxyItemize}
\item Add\+: {\ttfamily host} property to {\ttfamily H\+T\+M\+L\+Anchor\+Element}. (sporchia)
\end{DoxyItemize}

\subsection*{0.\+8.\+6}


\begin{DoxyItemize}
\item Fix\+: stop accidentally modifying {\ttfamily Error.\+prototype}. (mitar)
\item Add\+: a dummy {\ttfamily get\+Bounding\+Client\+Rect} method, that returns {\ttfamily 0} for all properties of the rectangle, is now implemented. (F1\+L\+T3R)
\end{DoxyItemize}

\subsection*{0.\+8.\+5}


\begin{DoxyItemize}
\item Add\+: {\ttfamily href} property on {\ttfamily C\+S\+S\+Style\+Sheet} instances for external C\+SS files. (Frozen\+Cow)
\end{DoxyItemize}

\subsection*{0.\+8.\+4}


\begin{DoxyItemize}
\item Add\+: typed array constructors on the {\ttfamily window}. (nlacasse)
\item Fix\+: {\ttfamily query\+Selector} and {\ttfamily query\+Selector\+All} should be on the prototypes of {\ttfamily Element} and {\ttfamily Document}, not own-\/properties. (mbostock)
\end{DoxyItemize}

\subsection*{0.\+8.\+3}


\begin{DoxyItemize}
\item Fix\+: when auto-\/detecting whether the first parameter to {\ttfamily jsdom.\+env} is a H\+T\+ML string or a filename, deal with long strings correctly instead of erroring. (baryshev)
\end{DoxyItemize}

\subsection*{0.\+8.\+2}


\begin{DoxyItemize}
\item Add\+: basic {\ttfamily window.\+history} support, including {\ttfamily back}, {\ttfamily forward}, {\ttfamily go}, {\ttfamily push\+State}, and {\ttfamily replace\+State}. (ralphholzmann)
\item Add\+: if an {\ttfamily $<$?xml?$>$} declaration starts the document, will try to parse as X\+ML, e.\+g. not lowercasing the tags. (robdodson)
\item Fix\+: tag names passed to {\ttfamily create\+Element} are coerced to strings before evaluating.
\end{DoxyItemize}

\subsection*{0.\+8.\+1 (hotfix)}


\begin{DoxyItemize}
\item Fix\+: a casing issue that prevented jsdom from loading on Unix and Solaris systems. (dai-\/shi)
\item Fix\+: {\ttfamily window.\+location.\+replace} was broken. (dai-\/shi)
\item Fix\+: update minimum htmlparser2 version, to ensure you get the latest parsing-\/related bugfixes.
\end{DoxyItemize}

\subsection*{0.\+8.\+0}


\begin{DoxyItemize}
\item Add\+: working {\ttfamily X\+M\+L\+Http\+Request} support, including cookie passing! (dai-\/shi)
\item Add\+: there is now a {\ttfamily window.\+navigator.\+no\+UI} property that evaluates to true, if you want to specifically distinguish jsdom in your tests.
\end{DoxyItemize}

\subsection*{0.\+7.\+0}


\begin{DoxyItemize}
\item Change\+: the logic when passing {\ttfamily jsdom.\+env} a string is more accurate, and you can be explicit by using the {\ttfamily html}, {\ttfamily url}, or {\ttfamily file} properties. This is a breaking change in the behavior of {\ttfamily html}, which used to do the same auto-\/detection logic as the string-\/only version.
\item Fix\+: errors raised in scripts are now passed to {\ttfamily jsdom.\+env}\textquotesingle{}s callback. (airportyh)
\item Fix\+: set {\ttfamily window.\+location.\+href} correctly when using {\ttfamily jsdom.\+env} to construct a window from a \mbox{\hyperlink{namespace_u_r_l}{U\+RL}}, when that \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} causes a redirect. (fegs)
\item Add\+: a more complete and accurate {\ttfamily window.\+location} object, which includes firing {\ttfamily hashchange} events when the hash is changed. (dai-\/shi)
\item Add\+: when using a non-\/implemented feature, mention exactly what it was that is not implemented in the error message. (papandreou)
\end{DoxyItemize}

\subsection*{0.\+6.\+5}


\begin{DoxyItemize}
\item Fix\+: custom attributes whose names were the same as properties of {\ttfamily Object.\+prototype}, e.\+g. {\ttfamily \char`\"{}constructor\char`\"{}}, would confuse jsdom massively.
\end{DoxyItemize}

\subsection*{0.\+6.\+4}


\begin{DoxyItemize}
\item Fix\+: C\+SS selectors which contain commas inside quotes are no longer misinterpreted. (chad3814)
\item Add\+: {\ttfamily $<$img$>$} elements now fire {\ttfamily \char`\"{}load\char`\"{}} events when their {\ttfamily src} attributes are changed. (kapouer)
\end{DoxyItemize}

\subsection*{0.\+6.\+3}


\begin{DoxyItemize}
\item Fix\+: better automatic detection of U\+R\+Ls vs. H\+T\+ML fragments when using {\ttfamily jsdom.\+env}. (jden)
\end{DoxyItemize}

\subsection*{0.\+6.\+2}


\begin{DoxyItemize}
\item Fix\+: \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} resolution to be amazing and extremely browser-\/compatible, including the interplay between the document\textquotesingle{}s original \mbox{\hyperlink{namespace_u_r_l}{U\+RL}}, any {\ttfamily $<$base$>$} tags that were set, and any relative {\ttfamily href}s. This impacts many parts of jsdom having to do with external resources or accurate {\ttfamily href} and {\ttfamily src} attributes. (deitch)
\item Add\+: access to frames and iframes via named properties. (adrianlang)
\item Fix\+: node-\/canvas integration, which had been broken since 0.\+5.\+7.
\end{DoxyItemize}

\subsection*{0.\+6.\+1}


\begin{DoxyItemize}
\item Make the code parseable with Esprima. (squarooticus)
\item Use the correct {\ttfamily package.\+json} field {\ttfamily \char`\"{}repository\char`\"{}} instead of {\ttfamily \char`\"{}repositories\char`\"{}} to prevent npm warnings. (jonathanong)
\end{DoxyItemize}

\subsection*{0.\+6.\+0}

Integrated a new H\+T\+ML parser, \href{https://npmjs.org/package/htmlparser2}{\tt htmlparser2}, from fb55. This is an actively maintained and much less buggy parser, fixing many of our parsing issues, including\+:


\begin{DoxyItemize}
\item Parsing elements with optional closing tags, like {\ttfamily $<$p$>$} or {\ttfamily $<$td$>$}.
\item The {\ttfamily inner\+H\+T\+ML} of {\ttfamily $<$script$>$} tags no longer cuts off the first character.
\item Empty attributes now have {\ttfamily \char`\"{}\char`\"{}} as their value instead of the attribute name.
\item Multiline attributes no longer get horribly mangled.
\item Attribute names can now be any value allowed by H\+T\+M\+L5, including crazy things like {\ttfamily $^\wedge$}.
\item Attribute values can now contain any value allowed by H\+T\+M\+L5, including e.\+g. {\ttfamily $>$} and {\ttfamily $<$}.
\end{DoxyItemize}

\subsection*{0.\+5.\+7}


\begin{DoxyItemize}
\item Fix\+: make event handlers attached via {\ttfamily on$<$event$>$} more spec-\/compatible, supporting {\ttfamily return false} and passing the {\ttfamily event} argument. (adrianlang)
\item Fix\+: make the getter for {\ttfamily text\+Content} more accurate, e.\+g. in cases involving comment nodes or processing instruction nodes. (adrianlang)
\item Fix\+: make {\ttfamily $<$canvas$>$} behave like a {\ttfamily $<$div$>$} when the {\ttfamily node-\/canvas} package isn\textquotesingle{}t available, instead of crashing. (stepheneb)
\end{DoxyItemize}

\subsection*{0.\+5.\+6}


\begin{DoxyItemize}
\item Fix\+: {\ttfamily on$<$event$>$} properties are correctly updated when using {\ttfamily set\+Attribute\+Node}, {\ttfamily attribute\+Node.\+value =}, {\ttfamily remove\+Attribute}, and {\ttfamily remove\+Attribute\+Node}; before it only worked with {\ttfamily set\+Attribute}. (adrianlang)
\item Fix\+: {\ttfamily H\+T\+M\+L\+Collection}s now have named properties based on their members\textquotesingle{} {\ttfamily id} and {\ttfamily name} attributes, e.\+g. {\ttfamily form.\+elements.\+input\+Id} is now present. (adrianlang)
\end{DoxyItemize}

\subsection*{0.\+5.\+5}


\begin{DoxyItemize}
\item Fix\+: {\ttfamily read\+Only} and {\ttfamily selected} properties were not correct when their attribute values were falsy, e.\+g. {\ttfamily $<$option selected=\char`\"{}\char`\"{}$>$}. (adrianlang)
\end{DoxyItemize}

\subsection*{0.\+5.\+4}

This release, and all future releases, require at least Node.\+js 0.\+8.


\begin{DoxyItemize}
\item Add\+: parser can now be set via {\ttfamily jsdom.\+env} configuration. (xavi-\/)
\item Fix\+: accessing {\ttfamily row\+Index} for table rows that are not part of a table would throw. (medikoo)
\item Fix\+: several places in the code accidentally created global variables, or referenced nonexistant values. (xavi-\/)
\item Fix\+: {\ttfamily $<$img$>$} elements\textquotesingle{} {\ttfamily src} properties now evaluate relative to {\ttfamily location.\+href}, just like {\ttfamily $<$a$>$} elements\textquotesingle{} {\ttfamily href} properties. (brianmaissy)
\end{DoxyItemize}

\subsection*{0.\+5.\+3}

This release is compatible with Node.\+js 0.\+6, whereas all future releases will require at least Node.\+js 0.\+8.


\begin{DoxyItemize}
\item Fix\+: {\ttfamily get\+Attribute\+NS} now returns {\ttfamily null} for attributes that are not present, just like {\ttfamily get\+Attribute}. (mbostock)
\item Change\+: {\ttfamily \char`\"{}request\char`\"{}} dependency pinned to version 2.\+14 for Node.\+js 0.\+6 compatibility.
\end{DoxyItemize}

\subsection*{0.\+5.\+2}


\begin{DoxyItemize}
\item Fix\+: stylesheets with {\ttfamily @-\/webkit-\/keyframes} rules were crashing calls to {\ttfamily get\+Computed\+Style}.
\item Fix\+: handling of {\ttfamily features} option to {\ttfamily jsdom.\+env}.
\item Change\+: retain the value of the {\ttfamily style} attribute until the element\textquotesingle{}s {\ttfamily style} property is touched. (papandreou)
\end{DoxyItemize}

\subsection*{0.\+5.\+1}


\begin{DoxyItemize}
\item Fix\+: {\ttfamily selected\+Index} now changes correctly in response to {\ttfamily $<$option$>$} elements being selected. This makes {\ttfamily $<$select$>$} elements actually work like you would want, especially with j\+Query. (xcoderzach)
\item Fix\+: {\ttfamily checked} works correctly on radio buttons, i.\+e. only one can be checked and clicking on one does not uncheck it. Previously they worked just like checkboxes. (xcoderzach)
\item Fix\+: {\ttfamily click()} on {\ttfamily $<$input$>$} elements now fires a click event. (xcoderzach)
\end{DoxyItemize}

\subsection*{0.\+5.\+0}


\begin{DoxyItemize}
\item Fix\+: Make {\ttfamily contextify} a non-\/optional dependency. jsdom never worked without it, really, so this just caused confusion.
\end{DoxyItemize}

\subsection*{0.\+4.\+2}


\begin{DoxyItemize}
\item Fix\+: {\ttfamily selected} now returns true for the first {\ttfamily $<$option$>$} in a {\ttfamily $<$select$>$} if nothing is explicitly set.
\item Fix\+: tweaks to accuracy and speed of the {\ttfamily query\+Selector\+All} implementation.
\end{DoxyItemize}

\subsection*{0.\+4.\+1 (hotfix)}


\begin{DoxyItemize}
\item Fix\+: crashes when loading H\+T\+ML files with {\ttfamily $<$a$>$} tags with no {\ttfamily href} attribute. (eleith)
\end{DoxyItemize}

\subsection*{0.\+4.\+0}


\begin{DoxyItemize}
\item Fix\+: {\ttfamily get\+Attribute} now returns {\ttfamily null} for attributes that are not present, as per D\+O\+M4 (but in contradiction to D\+O\+M1 through D\+O\+M3).
\item Fix\+: static {\ttfamily Node\+List}-\/returning methods (such as {\ttfamily query\+Selector\+All}) now return a real {\ttfamily Node\+List} instance.
\item Change\+: {\ttfamily Node\+List}s no longer expose nonstandard properties to the world, like {\ttfamily to\+Array}, without first prefixing them with an underscore.
\item Change\+: {\ttfamily Node\+List}s no longer inconsistently have array methods. Previously, live node lists would have {\ttfamily index\+Of}, while static node lists would have them all. Now, they have no array methods at all, as is correct per the specification.
\end{DoxyItemize}

\subsection*{0.\+3.\+4}


\begin{DoxyItemize}
\item Fix\+: stylesheets with {\ttfamily @media} rules were crashing calls to {\ttfamily get\+Computed\+Style}, e.\+g. those in j\+Query\textquotesingle{}s initialization.
\end{DoxyItemize}

\subsection*{0.\+3.\+3}


\begin{DoxyItemize}
\item Fix\+: make {\ttfamily document.\+write} calls insert new elements correctly. (johanoverip, kblomquist).
\item Fix\+: {\ttfamily $<$input$>$} tags with no {\ttfamily type} attribute now return a default value of {\ttfamily \char`\"{}text\char`\"{}} when calling {\ttfamily input\+El.\+get\+Attribute(\char`\"{}type\char`\"{})}.
\end{DoxyItemize}

\subsection*{0.\+3.\+2}


\begin{DoxyItemize}
\item Fix\+: stylesheets with \char`\"{}joining\char`\"{} rules (i.\+e. those containing comma-\/separated selectors) now apply when using {\ttfamily get\+Computed\+Style}. (chad3814, godmar)
\item Add\+: support for running the tests using \textquotesingle{}s \href{https://npmjs.org/package/html5}{\tt html5} parser, as a prelude toward maybe eventually making this the default and fixing various parsing bugs.
\end{DoxyItemize}

\subsection*{0.\+3.\+1 (hotfix)}


\begin{DoxyItemize}
\item Fix\+: crashes when invalid selectors were present in stylesheets.
\end{DoxyItemize}

\subsection*{0.\+3.\+0}


\begin{DoxyItemize}
\item Fix\+: a real {\ttfamily query\+Selector} implementation, courtesy of the nwmatcher project, solves many outstanding {\ttfamily query\+Selector} bugs.
\item Add\+: {\ttfamily matches\+Selector}, again via nwmatcher.
\item Add\+: support for styles coming from {\ttfamily $<$style$>$} and {\ttfamily $<$link rel=\char`\"{}stylesheet\char`\"{}$>$} elements being applied to the results of {\ttfamily window.\+get\+Computed\+Style}. (chad3814)
\item Add\+: basic implementation of {\ttfamily focus()} and {\ttfamily blur()} methods on appropriate elements. More work remains.
\item Fix\+: script filenames containing spaces will now work when passed to {\ttfamily jsdom.\+env}. (Tom\+Nom\+Nom)
\item Fix\+: elements with I\+Ds {\ttfamily to\+String}, {\ttfamily has\+Own\+Property}, etc. could cause lots of problems.
\item Change\+: A window\textquotesingle{}s {\ttfamily load} event always fires asynchronously now, even if no external resources are necessary.
\item Change\+: turning off mutation events is not supported, since doing so breaks external-\/resource fetching.
\end{DoxyItemize}

\subsection*{0.\+2.\+19}


\begin{DoxyItemize}
\item Fix\+: \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} resolution was broken on pages that included {\ttfamily href}-\/less {\ttfamily $<$base$>$} tags.
\item Fix\+: avoid putting {\ttfamily attr} in the global scope when using node-\/canvas. (starsquare)
\item Add\+: New {\ttfamily Skip\+External\+Resources} feature accepts a regular expression. (fgalassi)
\end{DoxyItemize}

\subsection*{0.\+2.\+18}


\begin{DoxyItemize}
\item Un-\/revert\+: cssstyle has fixed its memory problems, so we get back accurate {\ttfamily css\+Text} and {\ttfamily style} properties again.
\end{DoxyItemize}

\subsection*{0.\+2.\+17 (hotfix)}


\begin{DoxyItemize}
\item Revert\+: had to revert the use of the cssstyle package. {\ttfamily css\+Text} and {\ttfamily style} properties are no longer as accurate.
\item Fix\+: cssstyle was causing out-\/of-\/memory errors on some larger real-\/world pages, e.\+g. reddit.\+com.
\end{DoxyItemize}

\subsection*{0.\+2.\+16}


\begin{DoxyItemize}
\item Update\+: Sizzle version updated to circa September 2012.
\item Fix\+: when setting a text node\textquotesingle{}s value to a falsy value, convert it to a string instead of coercing it to {\ttfamily \char`\"{}\char`\"{}}.
\item Fix\+: Use the cssstyle package for {\ttfamily C\+S\+S\+Style\+Declaration}, giving much more accurate {\ttfamily css\+Text} and {\ttfamily style} properties on all elements. (chad3814)
\item Fix\+: the {\ttfamily checked} property on checkboxes and radiobuttons now reflects the attribute correctly.
\item Fix\+: {\ttfamily H\+T\+M\+L\+Option\+Element}\textquotesingle{}s {\ttfamily text} property should return the option\textquotesingle{}s text, not its value.
\item Fix\+: make the {\ttfamily name} property only exist on certain specific tags, and accurately reflect the corresponding {\ttfamily name} attribute.
\item Fix\+: don\textquotesingle{}t format {\ttfamily outer\+H\+T\+ML} (especially important for {\ttfamily $<$pre$>$} elements).
\item Fix\+: remove the {\ttfamily value} property from {\ttfamily Text} instances (e.\+g. text nodes).
\item Fix\+: don\textquotesingle{}t break in the presence of a {\ttfamily String.\+prototype.\+normalize} method, like that of sugar.\+js.
\item Fix\+: include level3/xpath correctly.
\item Fix\+: many more tests passing, especially related to \href{file:///}{\tt file\+:///} U\+R\+Ls on Windows. Tests can now be run with {\ttfamily npm test}.
\end{DoxyItemize}

\subsection*{0.\+2.\+15}


\begin{DoxyItemize}
\item Fix\+: make sure that doctypes don\textquotesingle{}t get set as the document\+Element (Aria Stewart)
\item Add\+: H\+T\+TP proxy support for jsdom.\+env (Eugene Ware)
\item Add\+: .hostname and .pathname properties to Anchor elements to comply with W\+H\+A\+T\+WG standard (Avi Deitcher)
\item Fix\+: Only decode H\+T\+ML entities in text when not inside a {\ttfamily $<$script$>$} or {\ttfamily $<$style$>$} tag. (Andreas Lind Petersen)
\item Fix\+: H\+T\+M\+L\+Select\+Element single selection implemented its type incorrectly as \textquotesingle{}select\textquotesingle{} instead of \textquotesingle{}select-\/one\textquotesingle{} (John Roberts)
\end{DoxyItemize}

\subsection*{0.\+2.\+14}


\begin{DoxyItemize}
\item Fix\+: when serializing single tags use \textquotesingle{} /$>$\textquotesingle{} instead of \textquotesingle{}/$>$\textquotesingle{} (kapouer)
\item Fix\+: support for contextify simulation using vm.\+run\+In\+Context (trodrigues)
\item Fix\+: allow jsdom.\+env\textquotesingle{}s config.\+html to handle file paths which contain spaces (shinuza)
\item Fix\+: Isolate Query\+Selector from prototype (Nao Iizuka)
\item Add\+: setting text\+Content to \textquotesingle{}\textquotesingle{} or clears children (Jason Davies)
\item Fix\+: jsdom.\+env swallows exceptions that occur in the callback (Xavi)
\end{DoxyItemize}

\subsection*{0.\+2.\+13}


\begin{DoxyItemize}
\item Fix\+: remove unused style property which was causing explosions in 0.\+2.\+12 and node 0.\+4.\+7
\end{DoxyItemize}

\subsection*{0.\+2.\+12}


\begin{DoxyItemize}
\item Fix\+: do not include gmon.\+out/v8.log/tests in npm distribution
\end{DoxyItemize}

\subsection*{0.\+2.\+11}


\begin{DoxyItemize}
\item Add\+: allow non-\/unique element ids (Avi Deitcher)
\item Fix\+: make contexify an optional dependency (Isaac Schlueter)
\item Add\+: scripts injected by jsdom are now marked with a \textquotesingle{}jsdom\textquotesingle{} class for serialization\textquotesingle{}s sake (Peter Lyons)
\item Fix\+: definition for ldquo entity (Andrew Morton)
\item Fix\+: access Named\+Node\+Map items via property (Brian Mc\+Daniel)
\item Add\+: upgrade sizzle from 1.\+0 to \href{https://github.com/jquery/sizzle/commit/fe2f618106bb76857b229113d6d11653707d0b22}{\tt fe2f6181} which is roughly 1.\+5.\+1
\item Add\+: documentation now includes `jsdom.\+level(x, \textquotesingle{}feature'){\ttfamily }
\item {\ttfamily Fix\+: make}to\+Array{\ttfamily and}item{\ttfamily on}Node\+List{\ttfamily objects non-\/enumerable properties}
\item {\ttfamily Add\+: a reference to}window.\+close\`{} in the readme
\item Fix\+: Major performance boost (Felix Gnass)
\item Fix\+: Using query\+Selector {\ttfamily \+:not()} throws a {\ttfamily Reference\+Error} (Felix Gnass)
\end{DoxyItemize}

\subsection*{0.\+2.\+10}


\begin{DoxyItemize}
\item Fix\+: problems with lax dependency versions
\item Fix\+: C\+S\+S\+OM constructors are hung off of the dom (Brian Mc\+Daniel)
\item Fix\+: move away from deprecated \textquotesingle{}sys\textquotesingle{} module
\item Fix\+: attribute event handlers on bubbling path aren\textquotesingle{}t called (Brian Mc\+Daniel)
\item Fix\+: setting textarea.\+value to markup should not be parsed (Andreas Lind Petersen)
\item Fix\+: content of script tags should not be escaped (Ken Sternberg)
\item Fix\+: Document\+Features for iframes with no src attribute. (Brian Mc\+Daniel) Closes \#355
\item Fix\+: \textquotesingle{}trigger\textquotesingle{} to \textquotesingle{}raise\textquotesingle{} to be a bit more descriptive
\item Fix\+: When `Process\+External\+Resources\mbox{[}\textquotesingle{}script'\mbox{]}\`{} is disabled, do {\itshape not} run inline event handlers. \#355
\item Add\+: verbose flag to test runner (to show tests as they are running and finishing)
\end{DoxyItemize}

\subsection*{0.\+2.\+9}


\begin{DoxyItemize}
\item Fix\+: ensure features are properly reset after a jsdom.\+env invocation. Closes \#239
\item Fix\+: Reference\+Error in the scan\+For\+Import\+Rules helper function
\item Fix\+: bug in append\+Html\+To\+Element with H\+T\+M\+L5 parser (Brian Mc\+Daniel)
\item Add\+: jsonp support (lheiskan)
\item Fix\+: for setting script element\textquotesingle{}s text property (Brian Mc\+Daniel)
\item Fix\+: for jsdom.\+env src bug
\item Add\+: test for jsdom.\+env src bug (multiple done calls)
\item Fix\+: Node\+List properties should enumerate like arrays (Felix Gnass)
\item Fix\+: when downloading a file, include the url.\+search in file path
\item Add\+: test for making a jsonp request with jquery from jsdom window
\item Add\+: test case for issue \#338
\item Fix\+: double load behavior when mixing jsdom.\+env\textquotesingle{}s {\ttfamily scripts} and {\ttfamily src} properties (cjroebuck)
\end{DoxyItemize}

\subsection*{0.\+2.\+8 (hotfix)}


\begin{DoxyItemize}
\item Fix\+: inline event handlers are ignored by everything except for the javascript context
\end{DoxyItemize}

\subsection*{0.\+2.\+7 (hotfix)}


\begin{DoxyItemize}
\item Fix stylesheet loading
\end{DoxyItemize}

\subsection*{0.\+2.\+6}


\begin{DoxyItemize}
\item Add\+: support for window.\+location.\+search and document.\+cookie (Derek Lindahl)
\item Add\+: jsdom.\+env now has a document configuation option which allows users to change the referer of the document (Derek Lindahl)
\item Fix\+: allow users to use different jsdom levels in the same process (sinegar)
\item Fix\+: remove\+Attribute\+NS no longer has a return value (Jason Davies)
\item Add\+: support for encoding/decoding all html entities from html4/5 (papandreou)
\item Add\+: jsdom.\+env() accepts the same features object seen in jsdom.\+jsdom and friends
\end{DoxyItemize}

\subsection*{0.\+2.\+5}


\begin{DoxyItemize}
\item Fix\+: serialize special characters in Element.\+inner\+H\+T\+ML/\+Element.attributes like a grade A browser (Jason Priestley)
\item Fix\+: ensure Element.\+get\+Element\+By\+Id only returns elements that are attached to the document
\item Fix\+: ensure an Element\textquotesingle{}s id is updated when changing the node\+Value of the \textquotesingle{}id\textquotesingle{} attribute (Felix Gnass)
\item Add\+: stacktrace to error reporter (Josh Marshall)
\item Fix\+: events now bubble up to the window (Jason Davies)
\item Add\+: initial window.\+location.\+hash support (Josh Marshall)
\item Add\+: Node\+::insert\+Before should do nothing when both params are the same node (Jason Davies)
\item Add\+: fixes for D\+O\+M\+Attr\+Modified mutation events (Felix Gnass)
\end{DoxyItemize}

\subsection*{0.\+2.\+4}


\begin{DoxyItemize}
\item Fix\+: adding script to invalid/incomplete dom (document.\+document\+Element) now catches the error and passes it in the {\ttfamily .env} callback (Gregory Tomlinson)
\item Cleanup\+: trigger and html tests
\item Add\+: support for inline event handlers (ie\+: `$<$div onclick=\textquotesingle{}some.\+horrible.\+string()'$>$\`{}) (Brian Mc\+Daniel)
\item Fix\+: script loading over https (Brian Mc\+Daniel) \#280
\item Add\+: using style.\+set\+Property updates the style attribute (Jimmy Mabey).
\item Add\+: invalid markup is reported as an error and attached to the associated element and document
\item Fix\+: crash when set\+Child() failes to create new D\+OM element (John Hurliman)
\item Added test for issue \#287.
\item Added support for inline event handlers.
\item Moved frame tests to test/window/frame.\+js and cleaned up formatting.
\item Moved script execution tests to test/window/script.\+js.
\item Fix a crash when set\+Child() fails to create a new D\+OM element
\item Override C\+S\+S\+OM to update style attribute
\end{DoxyItemize}

\subsection*{0.\+2.\+3}


\begin{DoxyItemize}
\item Fix\+: segfault due to window being garbage collected prematurely N\+O\+TE\+: you must manually close the window to free memory (window.\+close())
\end{DoxyItemize}

\subsection*{0.\+2.\+2}


\begin{DoxyItemize}
\item Switch to Contextify to manage the window\textquotesingle{}s script execution.
\item Fix\+: allow nodelists to have a length of 0 and to\+Array to return an empty array
\item Fix\+: style serialization; issues \#230 and \#259
\item Fix\+: Incomplete D\+O\+C\+T\+Y\+PE causes Java\+Script error
\item Fix\+: indentation, removed outdated debug code and trailing whitespace.
\item Prevent Java\+Script error when parsing incomplete {\ttfamily $<$!\+D\+O\+C\+T\+Y\+PE$>$}. Closes \#259.
\item Adding a test from brianmcd that ensures that set\+Timeout callbacks execute in the context of the window
\item Fixes issue 250\+: make {\ttfamily document.\+parent\+Window === window} work
\item Added test to ensure that timer callbacks execute in the window context.
\item Fixes 2 issues in Resource\+Queue
\item Make frame/iframe load/process scripts if the parent has the features enabled
\end{DoxyItemize}

\subsection*{0.\+2.\+1}


\begin{DoxyItemize}
\item Javascript execution fixes \mbox{[}\#248, \#163, \#179\mbox{]}
\item X\+Path (Yonathan and Daniel Cassidy)
\item Start of cssom integration (Yonathan)
\item Conversion of tests to nodeunit! (Martin Davis)
\item Added sizzle tests, only failing 3/15
\item Set the title node\textquotesingle{}s text\+Content rather than its inner\+H\+T\+ML \#242. (Andreas Lind Petersen)
\item The text\+Content getter now walks the D\+OM and extract the text properly. (Andreas Lind Petersen)
\item Empty scripts won\textquotesingle{}t cause jsdom.\+env to hang \#172 (Karuna Sagar)
\item Every document has either a body or a frameset \#82. (Karuna Sagar)
\item Added the ability to grab a level by string + feature. ie\+: jsdom.\+level(2, \textquotesingle{}html\textquotesingle{}) (Aria Stewart)
\item Cleaned up htmlencoding and fixed character (de)entification \#147, \#177 (Andreas Lind Petersen)
\item htmlencoding.\+H\+T\+M\+L\+Decode\+: Fixed decoding of {\ttfamily $<$}, {\ttfamily $>$}, {\ttfamily \&}, and {\ttfamily \textquotesingle{}}. Closes \#147 and \#177.
\item Require dom level as a string or object. (Aria Stewart)
\item JS errors ar triggered on the script element, not document. (Yonathan)
\item Added configuration property \textquotesingle{}headers\textquotesingle{} for H\+T\+TP request headers. (antonj)
\item Attr.\+specified is readonly -\/ Karuna Sagar
\item Removed return value from set\+Attribute\+N\+S() \#207 (Karuna Sagar)
\item Pass the correct script filename to run\+In\+Context. (robin)
\item Add http referrer support for the download() function. (Robin)
\item First attempt at fixing the horrible memory leak via window.\+stop\+Timers() (d-\/ash)
\item Use vm instead of evals binding (d-\/ash)
\item Add a way to set the encoding of the jsdom.\+env html request.
\item Fixed various typos/lint problems (d-\/ash)
\item The first parameter download is now the object returned by U\+R\+L.\+parse(). (Robin)
\item Fixed serialization of elements with a style attribute.
\item Added src config option to jsdom.\+env() (Jerry Sievert)
\item Removed dead code from get\+Named\+Item\+N\+S() (Karuna Sagar)
\item Changes to language/javascript so jsdom would work on v0.\+5.\+0-\/pre (Gord Tanner)
\item Correct spelling of \char`\"{}\+Hierarchy request error\char`\"{} (Daniel Cassidy)
\item Node and Exception type constants are available in all levels. (Daniel Cassidy)
\item Use ~\newline
 instead of ~\newline
 during serialization
\item Fixed auto-\/insertion of body/html tags (Adrian Makowski)
\item Adopt unowned nodes when added to the tree. (Aria Stewart)
\item Fix the selected and default\+Selected fields of {\ttfamily option} element. -\/ Yonathan
\item Fix\+: Event\+Target.\+get\+Listeners() now returns a shallow copy so that listeners can be safely removed while an event is being dispatched. (Felix Gnass)
\item Added remove\+Event\+Listener() to D\+O\+M\+Window (Felix Gnass)
\item Added the ability to pre-\/load scripts for jsdom.\+env() (Jerry Sievert)
\item Mutation event tests/fixes (Felix Gnass)
\item Changed H\+T\+ML serialization code to (optionally) pretty print while traversing the tree instead of doing a regexp-\/based postprocessing. (Andreas Lind Petersen)
\item Relative and absolute urls now work as expected
\item set\+Named\+Item no longer sets Node.\+parent\+Node \#153 (Karuna Sagar)
\item Added missing semicolon after entity name -\/ Felix Gnass
\item Added Node\+List\+::index\+Of implementation/tests (Karuna Sagar)
\item resource\+Loader.\+download now works correctly with https and redirects (waslogic)
\item Scheme-\/less U\+R\+Ls default to the current protocol \#87 (Alexander Flatter)
\item Simplification the prev\+Sibling(), append\+Child(), insert\+Before() and replace\+Child() code (Karuna Sagar)
\item Javascript errors use core.\+Node.\+trigger (Alexander Flatter)
\item Add core.\+Document.\+trigger in level1/core and level2/events; Make D\+O\+M\+Window.\+console use it (Alexander Flatter)
\item Resource resolver fixes (Alexander Flatter)
\item Fix serialization of doctypes with new lines \#148 (Karuna Sagar)
\item Child nodes are calculated immediately instead of after .length is called \#169, \#171, \#176 (Karuna Sagar) 
\end{DoxyItemize}