\href{http://unshift.io}{\tt }\href{http://browsenpm.org/package/url-parse}{\tt }\href{https://travis-ci.org/unshiftio/url-parse}{\tt }\href{https://david-dm.org/unshiftio/url-parse}{\tt }\href{https://coveralls.io/r/unshiftio/url-parse?branch=master}{\tt }\href{https://webchat.freenode.net/?channels=unshift}{\tt }

\href{https://saucelabs.com/u/url-parse}{\tt }

The {\ttfamily url-\/parse} method exposes two different A\+PI interfaces. The \href{https://nodejs.org/api/url.html}{\tt {\ttfamily url}} interface that you know from Node.\+js and the new \href{https://developer.mozilla.org/en-US/docs/Web/API/URL/URL}{\tt {\ttfamily U\+RL}} interface that is available in the latest browsers.

Since {\ttfamily 0.\+1} we\textquotesingle{}ve moved away from using the D\+OM\textquotesingle{}s {\ttfamily $<$a$>$} element for \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} parsing and moving to a full Regular Expression solution. The main reason for this change is to make the \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} parser available in different Java\+Script environments as you don\textquotesingle{}t always have access to the D\+OM like {\ttfamily Worker} environments. This module still have a really small foot print as this module\textquotesingle{}s main intention is to be bundled with client-\/side code. The only problem however with a Reg\+Exp based solution is that it required a lot of lookups causing major problems in Fire\+Fox. So the last and the current solution was a pure string parsing solution which chops up the \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} in smaller pieces.

In addition to \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} parsing we also expose the bundled {\ttfamily querystringify} module.

\subsection*{Installation}

This module is designed to be used using either browserify or node.\+js it\textquotesingle{}s released in the public npm registry and can be installed using\+:


\begin{DoxyCode}
npm install url-parse
\end{DoxyCode}


\subsection*{Usage}

All examples assume that this library is bootstrapped using\+:


\begin{DoxyCode}
'use strict';

var URL = require('url-parse');
\end{DoxyCode}


To parse an \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} simply call the {\ttfamily \mbox{\hyperlink{namespace_u_r_l}{U\+RL}}} method with the \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} that needs to be transformed in to an object.


\begin{DoxyCode}
var url = new URL('https://github.com/foo/bar');
\end{DoxyCode}


The {\ttfamily new} keyword is optional but it will save you an extra function invocation. In the example above we\textquotesingle{}ve demonstrated the \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} interface, but as said in the module description we also support the node.\+js interface. So you could also use the library in this way\+:


\begin{DoxyCode}
'use strict';

var parse = require('url-parse')
  , url = parse('https://github.com/foo/bar', true);
\end{DoxyCode}


The returned {\ttfamily url} instance contains the following properties\+:


\begin{DoxyItemize}
\item {\ttfamily protocol}\+: Requested protocol without slashes (e.\+g. {\ttfamily http\+:}).
\item {\ttfamily username}\+: Username of basic authentication.
\item {\ttfamily password}\+: Password of basic authentication.
\item {\ttfamily auth}\+: Authentication information portion (e.\+g. {\ttfamily username\+:password}).
\item {\ttfamily host}\+: Host name with port number.
\item {\ttfamily hostname}\+: Host name without port number.
\item {\ttfamily port}\+: Optional port number.
\item {\ttfamily pathname}\+: \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} path.
\item {\ttfamily query}\+: Parsed object containing query string, unless parsing is set to false.
\item {\ttfamily hash}\+: The \char`\"{}fragment\char`\"{} portion of the \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} including the pound-\/sign ({\ttfamily \#}).
\item {\ttfamily href}\+: The full \mbox{\hyperlink{namespace_u_r_l}{U\+RL}}.
\end{DoxyItemize}

\subsubsection*{U\+R\+L.\+set(key, value)}

A simple helper function to change parts of the \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} and propagating it through all properties. When you set a new {\ttfamily host} you want the same value to be applied to {\ttfamily port} if has a different port number, {\ttfamily hostname} so it has a correct name again and {\ttfamily href} so you have a complete \mbox{\hyperlink{namespace_u_r_l}{U\+RL}}.


\begin{DoxyCode}
var parsed = parse('http://google.com/parse-things');

parsed.set('hostname', 'yahoo.com');
console.log(parsed.href); // http://yahoo.com/parse-things
\end{DoxyCode}


It\textquotesingle{}s aware of default ports so you cannot set a port 80 on an \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} which has {\ttfamily http} as protocol.

\subsubsection*{U\+R\+L.\+to\+String()}

The returned {\ttfamily url} object comes with a custom {\ttfamily to\+String} method which will generate a full \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} again when called. The method accepts an extra function which will stringify the query string for you. If you don\textquotesingle{}t supply a function we will use our default method.


\begin{DoxyCode}
var location = url.toString(); // http://example.com/whatever/?qs=32
\end{DoxyCode}


You would rarely need to use this method as the full \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} is also available as {\ttfamily href} property. If you are using the {\ttfamily U\+R\+L.\+set} method to make changes, this will automatically update.

\subsection*{Testing}

The testing of this module is done in 3 different ways\+:


\begin{DoxyEnumerate}
\item We have unit tests setup which run under Node.\+js using the normal {\ttfamily npm test} command.
\item Code coverage can be run manually using {\ttfamily npm run coverage}
\item For browser testing we use {\ttfamily testling} to startup a test server. We do assume that you {\ttfamily testling} installed globally, if not please run {\ttfamily npm install -\/g testling} and after that {\ttfamily testling -\/u} in the root of this repository. When you visit the outputted \mbox{\hyperlink{namespace_u_r_l}{U\+RL}} all unit tests that were written from the Node can now be ran inside browsers.
\end{DoxyEnumerate}

\subsection*{License}

\mbox{[}M\+IT\mbox{]}(L\+I\+C\+E\+N\+SE) 