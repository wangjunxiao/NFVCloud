\href{https://npmjs.com/package/postcss-loader}{\tt } \href{https://nodejs.org}{\tt } \href{https://david-dm.org/postcss/postcss-loader}{\tt } \href{https://travis-ci.org/postcss/postcss-loader}{\tt } \href{https://gitter.im/postcss/postcss}{\tt }

  \href{https://github.com/webpack/webpack}{\tt }  \href{https://evilmartians.com/?utm_source=postcss}{\tt }  \section*{Post\+C\+SS Loader}

 

\subsection*{Install}


\begin{DoxyCode}
npm i -D  postcss-loader
\end{DoxyCode}


\subsection*{Usage}

\subsubsection*{{\ttfamily Config}}

{\bfseries postcss.\+config.\+js} 
\begin{DoxyCode}
module.exports = \{
  parser: 'sugarss',
  plugins: \{
    'postcss-import': \{\},
    'postcss-cssnext': \{\},
    'autoprefixer': \{\},
    'cssnano': \{\}
  \}
\}
\end{DoxyCode}


You can read more about common Post\+C\+SS Config \href{https://github.com/michael-ciniawsky/postcss-load-config}{\tt here}.

\subsubsection*{{\ttfamily Config Cascade}}

You can use different {\ttfamily postcss.\+config.\+js} files in different directories. Config lookup starts from {\ttfamily path.\+dirname(file)} and walks the file tree upwards until a config file is found.


\begin{DoxyCode}
|– components
| |– component
| | |– index.js
| | |– index.png
| | |– style.css (1)
| | |– postcss.config.js (1)
| |– component
| | |– index.js
| | |– image.png
| | |– style.css (2)
|
|– postcss.config.js (1 && 2 (recommended))
|– webpack.config.js
|
|– package.json
\end{DoxyCode}


After setting up your {\ttfamily postcss.\+config.\+js}, add {\ttfamily postcss-\/loader} to your {\ttfamily webpack.\+config.\+js}. You can use it standalone or in conjunction with {\ttfamily css-\/loader} (recommended). Use it {\bfseries after} {\ttfamily css-\/loader} and {\ttfamily style-\/loader}, but {\bfseries before} other preprocessor loaders like e.\+g {\ttfamily sass$\vert$less$\vert$stylus-\/loader}, if you use any.

{\bfseries webpack.\+config.\+js} 
\begin{DoxyCode}
module.exports = \{
  module: \{
    rules: [
      \{
        test: /\(\backslash\).css$/,
        use: [ 'style-loader', 'postcss-loader' ]
      \}
    ]
  \}
\}
\end{DoxyCode}


\begin{quote}
⚠️ When {\ttfamily postcss-\/loader} is used standalone (without {\ttfamily css-\/loader}) don\textquotesingle{}t use {\ttfamily @import} in your C\+SS, since this can lead to quite bloated bundles \end{quote}


{\bfseries webpack.\+config.\+js (recommended)} 
\begin{DoxyCode}
module.exports = \{
  module: \{
    rules: [
      \{
        test: /\(\backslash\).css$/,
        use: [
          'style-loader',
          \{ loader: 'css-loader', options: \{ importLoaders: 1 \} \},
          'postcss-loader'
        ]
      \}
    ]
  \}
\}
\end{DoxyCode}


\subsection*{Options}

\tabulinesep=1mm
\begin{longtabu} spread 0pt [c]{*{3}{|X[-1]}|}
\hline
\rowcolor{\tableheadbgcolor}\textbf{ Name  }&\textbf{ Default  }&\textbf{ Description   }\\\cline{1-3}
\endfirsthead
\hline
\endfoot
\hline
\rowcolor{\tableheadbgcolor}\textbf{ Name  }&\textbf{ Default  }&\textbf{ Description   }\\\cline{1-3}
\endhead
{\ttfamily exec}  &{\ttfamily undefined}  &Enable Post\+C\+SS Parser support in {\ttfamily C\+S\+S-\/in-\/\+JS}   \\\cline{1-3}
{\ttfamily parser}  &{\ttfamily undefined}  &Set Post\+C\+SS Parser   \\\cline{1-3}
{\ttfamily syntax}  &{\ttfamily undefined}  &Set Post\+C\+SS Syntax   \\\cline{1-3}
{\ttfamily stringifier}  &{\ttfamily undefined}  &Set Post\+C\+SS Stringifier   \\\cline{1-3}
{\ttfamily config}  &{\ttfamily undefined}  &Set {\ttfamily postcss.\+config.\+js} config path \&\& {\ttfamily ctx}   \\\cline{1-3}
{\ttfamily plugins}  &{\ttfamily \mbox{[}\mbox{]}}  &Set Post\+C\+SS Plugins   \\\cline{1-3}
{\ttfamily source\+Map}  &{\ttfamily false}  &Enable Source Maps   \\\cline{1-3}
\end{longtabu}


\subsubsection*{{\ttfamily Exec}}

If you use JS styles without the \href{https://github.com/postcss/postcss-js}{\tt {\ttfamily postcss-\/js}} parser, add the {\ttfamily exec} option.


\begin{DoxyCode}
\{
  test: /\(\backslash\).style.js$/,
  use: [
    'style-loader',
    \{ loader: 'css-loader', options: \{ importLoaders: 1 \} \},
    \{ loader: 'postcss-loader', options: \{ parser: 'sugarss', exec: true \} \}
  ]
\}
\end{DoxyCode}


\subsubsection*{{\ttfamily Config}}

\paragraph*{{\ttfamily Path}}

You can manually specify the path to search for your config ({\ttfamily postcss.\+config.\+js}) with the {\ttfamily config.\+path} option. This is needed if you store your config in a separate e.\+g {\ttfamily ./config $\vert$$\vert$ ./.config} folder.

\begin{quote}
⚠️ Otherwise it is {\bfseries unnecessary} to set this option and is {\bfseries not} recommended \end{quote}


{\bfseries webpack.\+config.\+js} 
\begin{DoxyCode}
\{
  loader: 'postcss-loader',
  options: \{
    config: \{
      path: 'path/to/postcss.config.js'
    \}
  \}
\}
\end{DoxyCode}


\paragraph*{{\ttfamily Context (ctx)}}

\tabulinesep=1mm
\begin{longtabu} spread 0pt [c]{*{4}{|X[-1]}|}
\hline
\rowcolor{\tableheadbgcolor}\textbf{ Name  }&\textbf{ Type  }&\textbf{ Default  }&\textbf{ Description   }\\\cline{1-4}
\endfirsthead
\hline
\endfoot
\hline
\rowcolor{\tableheadbgcolor}\textbf{ Name  }&\textbf{ Type  }&\textbf{ Default  }&\textbf{ Description   }\\\cline{1-4}
\endhead
{\ttfamily env}  &{\ttfamily \{String\}}  &`\textquotesingle{}development'{\ttfamily $<$/td$>$ $<$td class=\char`\"{}markdown\+Table\+Body\+Left\char`\"{}$>$}process.\+env.\+N\+O\+D\+E\+\_\+\+E\+NV\`{}   \\\cline{1-4}
{\ttfamily file}  &{\ttfamily \{Object\}}  &{\ttfamily loader.\+resource\+Path}  &{\ttfamily extname}, {\ttfamily dirname}, {\ttfamily basename}   \\\cline{1-4}
{\ttfamily options}  &{\ttfamily \{Object\}}  &{\ttfamily \{\}}  &Options   \\\cline{1-4}
\end{longtabu}


{\ttfamily postcss-\/loader} exposes context {\ttfamily ctx} to the config file, making your {\ttfamily postcss.\+config.\+js} dynamic, so can use it to do some real magic ✨

{\bfseries postcss.\+config.\+js} 
\begin{DoxyCode}
module.exports = (\{ file, options, env \}) => (\{
  parser: file.extname === '.sss' ? 'sugarss' : false,
  plugins: \{
    'postcss-import': \{ root: file.dirname \},
    'postcss-cssnext': options.cssnext ? options.cssnext : false,
    'autoprefixer': env == 'production' ? options.autoprefixer : false,
    'cssnano': env === 'production' ? options.cssnano : false
  \}
\})
\end{DoxyCode}


{\bfseries webpack.\+config.\+js} 
\begin{DoxyCode}
\{
  loader: 'postcss-loader'
  options: \{
    config: \{
      ctx: \{
        cssnext: \{...options\},
        cssnano: \{...options\},
        autoprefixer: \{...options\}
      \}
    \}
  \}
\}
\end{DoxyCode}


\subsubsection*{{\ttfamily Plugins}}

{\bfseries webpack.\+config.\+js} 
\begin{DoxyCode}
\{
  loader: 'postcss-loader',
  options: \{
    plugins: (loader) => [
      require('postcss-import')(\{ root: loader.resourcePath \}),
      require('postcss-cssnext')(),
      require('autoprefixer')(),
      require('cssnano')()
    ]
  \}
\}
\end{DoxyCode}


\subsubsection*{{\ttfamily Syntaxes}}

\tabulinesep=1mm
\begin{longtabu} spread 0pt [c]{*{4}{|X[-1]}|}
\hline
\rowcolor{\tableheadbgcolor}\textbf{ Name  }&\textbf{ Type  }&\textbf{ Default  }&\textbf{ Description   }\\\cline{1-4}
\endfirsthead
\hline
\endfoot
\hline
\rowcolor{\tableheadbgcolor}\textbf{ Name  }&\textbf{ Type  }&\textbf{ Default  }&\textbf{ Description   }\\\cline{1-4}
\endhead
{\ttfamily syntax}  &{\ttfamily \{String\textbackslash{}$\vert$\+Function\}}  &{\ttfamily undefined}  &Custom Post\+C\+SS Syntax   \\\cline{1-4}
{\ttfamily parser}  &{\ttfamily \{String\textbackslash{}$\vert$\+Function\}}  &{\ttfamily undefined}  &Custom Post\+C\+SS Parser   \\\cline{1-4}
{\ttfamily stringifier}  &{\ttfamily \{String\textbackslash{}$\vert$\+Function\}}  &{\ttfamily undefined}  &Custom Post\+C\+SS Stringifier   \\\cline{1-4}
\end{longtabu}


\paragraph*{{\ttfamily Parser}}

{\bfseries webpack.\+config.\+js} 
\begin{DoxyCode}
\{
  test: /\(\backslash\).sss$/,
  use: [
    ...,
    \{ loader: 'postcss-loader', options: \{ parser: 'sugarss' \} \}
  ]
\}
\end{DoxyCode}


\paragraph*{{\ttfamily Syntax}}

{\bfseries webpack.\+config.\+js} 
\begin{DoxyCode}
\{
  test: /\(\backslash\).css$/,
  use: [
    ...,
    \{ loader: 'postcss-loader', options: \{ syntax: 'sugarss' \} \}
  ]
\}
\end{DoxyCode}


\paragraph*{{\ttfamily Stringifier}}

{\bfseries webpack.\+config.\+js} 
\begin{DoxyCode}
\{
  test: /\(\backslash\).css$/,
  use: [
    ...,
    \{ loader: 'postcss-loader', options: \{ stringifier: 'midas' \} \}
  ]
\}
\end{DoxyCode}


\subsubsection*{{\ttfamily Source\+Map}}

Enables source map support, {\ttfamily postcss-\/loader} will use the previous source map given by other loaders and update it accordingly, if no previous loader is applied before {\ttfamily postcss-\/loader}, the loader will generate a source map for you.

\begin{quote}
\+:warning\+: If a previous loader like e.\+g {\ttfamily sass-\/loader} is applied and it\textquotesingle{}s {\ttfamily source\+Map} option is set, but the {\ttfamily source\+Map} option in {\ttfamily postcss-\/loader} is omitted, previous source maps will be discarded by {\ttfamily postcss-\/loader} {\bfseries entirely}. \end{quote}


{\bfseries webpack.\+config.\+js} 
\begin{DoxyCode}
\{
  test: /\(\backslash\).css/,
  use: [
    \{ loader: 'style-loader', options: \{ sourceMap: true \} \},
    \{ loader: 'css-loader', options: \{ sourceMap: true \} \},
    \{ loader: 'postcss-loader', options: \{ sourceMap: true \} \},
    \{ loader: 'sass-loader', options: \{ sourceMap: true \} \}
  ]
\}
\end{DoxyCode}


\paragraph*{`\textquotesingle{}inline'\`{}}

You can set the `source\+Map\+: \textquotesingle{}inline'\`{} option to inline the source map within the C\+SS directly as an annotation comment.

{\bfseries webpack.\+config.\+js} 
\begin{DoxyCode}
\{
  loader: 'postcss-loader',
  options: \{
    sourceMap: 'inline'
  \}
\}
\end{DoxyCode}



\begin{DoxyCode}
.class \{ color: red; \}

/*# sourceMappingURL=data:application/json;base64, ... */
\end{DoxyCode}


\subsection*{Examples}

\subsubsection*{{\ttfamily Stylelint}}

{\bfseries webpack.\+config.\+js} 
\begin{DoxyCode}
\{
  test: /\(\backslash\).css$/,
  use: [
    'style-loader',
    'css-loader',
    \{
      loader: 'postcss-loader',
      options: \{
        plugins: [
          require('postcss-import')(),
          require('stylelint')(),
          ...,
        ]
      \}
    \}
  ]
\}
\end{DoxyCode}


\subsubsection*{{\ttfamily C\+SS Modules}}

This loader \href{https://github.com/webpack/css-loader/issues/137}{\tt cannot be used} with \href{https://github.com/webpack/css-loader#css-modules}{\tt C\+SS Modules} out of the box due to the way {\ttfamily css-\/loader} processes file imports. To make them work properly, either add the css-\/loader’s \href{https://github.com/webpack-contrib/css-loader#importing-and-chained-loaders}{\tt {\ttfamily import\+Loaders}} option.

{\bfseries webpack.\+config.\+js} 
\begin{DoxyCode}
\{
  test: /\(\backslash\).css$/,
  use: [
    'style-loader',
    \{ loader: 'css-loader', options: \{ modules: true, importLoaders: 1 \} \},
    'postcss-loader'
  ]
\}
\end{DoxyCode}


or use \href{https://github.com/outpunk/postcss-modules}{\tt postcss-\/modules} instead of {\ttfamily css-\/loader}.

\subsubsection*{{\ttfamily C\+S\+S-\/in-\/\+JS}}

If you want to process styles written in Java\+Script, use the \href{https://github.com/postcss/postcss-js}{\tt postcss-\/js} parser.


\begin{DoxyCode}
\{
  test: /\(\backslash\).style.js$/,
  use: [
    'style-loader',
    \{ loader: 'css-loader', options: \{ importLoaders: 2 \} \},
    \{ loader: 'postcss-loader', options: \{ parser: 'postcss-js' \} \},
    'babel-loader'
  ]
\}
\end{DoxyCode}


As result you will be able to write styles in the following way


\begin{DoxyCode}
import colors from './styles/colors'

export default \{
    '.menu': \{
      color: colors.main,
      height: 25,
      '&\_link': \{
      color: 'white'
    \}
  \}
\}
\end{DoxyCode}


\begin{quote}
\+:warning\+: If you are using Babel you need to do the following in order for the setup to work \end{quote}


\begin{quote}

\begin{DoxyEnumerate}
\item Add \href{https://github.com/59naga/babel-plugin-add-module-exports}{\tt babel-\/plugin-\/add-\/module-\/exports} to your configuration
\item You need to have only one {\bfseries default} export per style module 
\end{DoxyEnumerate}\end{quote}


\subsubsection*{\href{https://github.com/webpack-contrib/extract-text-webpack-plugin}{\tt Extract C\+SS}}

{\bfseries webpack.\+config.\+js} 
\begin{DoxyCode}
const ExtractTextPlugin = require('extract-text-webpack-plugin')

module.exports = \{
  module: \{
    rules: [
      \{
        test: /\(\backslash\).css$/,
        use: ExtractTextPlugin.extract(\{
          fallback: 'style-loader',
          use: [
            \{ loader: 'css-loader', options: \{ importLoaders: 1 \} \},
            'postcss-loader'
          ]
        \})
      \}
    ]
  \},
  plugins: [
    new ExtractTextPlugin('[name].css')
  ]
\}
\end{DoxyCode}


\subsection*{Maintainers}

\tabulinesep=1mm
\begin{longtabu} spread 0pt [c]{*{0}{|X[-1]}|}
\hline
\end{longtabu}


\href{https://github.com/michael-ciniawsky}{\tt Michael Ciniawsky }  

\href{https://github.com/evilebottnawi}{\tt Alexander Krasnoyarov }   $<$tbody$>$ 