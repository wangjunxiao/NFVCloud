<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>demo: SW Precache Webpack Plugin</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">demo
   &#160;<span id="projectnumber">0.0.1</span>
   </div>
   <div id="projectbrief">Vfunc Spring Boot项目概要</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'搜索');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','搜索');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">SW Precache Webpack Plugin </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://npmjs.org/package/sw-precache-webpack-plugin"></a> <a href="https://npmjs.org/package/sw-precache-webpack-plugin"></a> <a href="https://circleci.com/gh/goldhand/sw-precache-webpack-plugin"></a></p>
<p>__<code>SWPrecacheWebpackPlugin</code>__ is a <a href="http://webpack.github.io/">webpack</a> plugin for using https://github.com/goldhand/notes/blob/master/notes/service_workers.md "service workers" to cache your external project dependencies. It will generate a service worker file using <a href="https://github.com/GoogleChrome/sw-precache" title="SW-Precache">sw-precache</a> and add it to your build directory.</p>
<p>## Install </p><div class="fragment"><div class="line">npm install --save-dev sw-precache-webpack-plugin</div></div><!-- fragment --><h2>Basic Usage</h2>
<p>A simple configuration example that will work well in most production environments. Based on the configuration used in <a href="https://github.com/facebookincubator/create-react-app/blob/e91648a9bb55230fa15a7867fd5b730d7e1a5808/packages/react-scripts/config/webpack.config.prod.js#L308">create-react-app</a>. </p><div class="fragment"><div class="line">var path = require(&#39;path&#39;);</div><div class="line">var SWPrecacheWebpackPlugin = require(&#39;sw-precache-webpack-plugin&#39;);</div><div class="line"></div><div class="line">const PUBLIC_PATH = &#39;https://www.my-project-name.com/&#39;;  // webpack needs the trailing slash for output.publicPath</div><div class="line"></div><div class="line">module.exports = {</div><div class="line"></div><div class="line">  entry: {</div><div class="line">    main: path.resolve(__dirname, &#39;src/index&#39;),</div><div class="line">  },</div><div class="line"></div><div class="line">  output: {</div><div class="line">    path: path.resolve(__dirname, &#39;src/bundles/&#39;),</div><div class="line">    filename: &#39;[name]-[hash].js&#39;,</div><div class="line">    publicPath: PUBLIC_PATH,</div><div class="line">  },</div><div class="line"></div><div class="line">  plugins: [</div><div class="line">    new SWPrecacheWebpackPlugin(</div><div class="line">      {</div><div class="line">        cacheId: &#39;my-project-name&#39;,</div><div class="line">        dontCacheBustUrlsMatching: /\.\w{8}\./,</div><div class="line">        filename: &#39;service-worker.js&#39;,</div><div class="line">        minify: true,</div><div class="line">        navigateFallback: PUBLIC_PATH + &#39;index.html&#39;,</div><div class="line">        staticFileGlobsIgnorePatterns: [/\.map$/, /asset-manifest\.json$/],</div><div class="line">      }</div><div class="line">    ),</div><div class="line">  ],</div><div class="line">}</div></div><!-- fragment --><p>This will generate a new service worker at <code>src/bundles/my-service-worker.js</code>. Then you would just register it in your application:</p>
<div class="fragment"><div class="line">(function() {</div><div class="line">  if(&#39;serviceWorker&#39; in navigator) {</div><div class="line">    navigator.serviceWorker.register(&#39;/my-service-worker.js&#39;);</div><div class="line">  }</div><div class="line">})();</div></div><!-- fragment --><p><a href="https://github.com/GoogleChrome/sw-precache/blob/5699e5d049235ef0f668e8e2aa3bf2646ba3872f/demo/app/js/service-worker-registration.js">Another example of registering a service worker is provided by GoogleChrome/sw-precache</a></p>
<h2>Configuration</h2>
<p>You can pass a hash of configuration options to <code>SWPrecacheWebpackPlugin</code>:</p>
<p><b>plugin options</b>:</p><ul>
<li><code>filename</code>: <code>[String]</code> - Service worker filename, default is <code>service-worker.js</code></li>
<li><code>filepath</code>: <code>[String]</code> - Service worker path and name, default is to use <code>webpack.output.path</code> + <code>options.filename</code>. This will overried <code>filename</code>. <em>Warning: Make the service worker available in the same directory it will be needed. This is because the scope of the service worker is defined by the directory the worker exists.</em></li>
<li><code>staticFileGlobsIgnorePatterns</code>: <code>[RegExp]</code> - Define an optional array of regex patterns to filter out of staticFileGlobs (see below)</li>
<li><code>mergeStaticsConfig</code>: <code>[boolean]</code> - Merge provided staticFileGlobs and stripPrefixMulti with webpack's config, rather than having those take precedence, default is false.</li>
<li><code>minify</code>: <code>[boolean]</code> - Set to true to minify and uglify the generated service-worker, default is false.</li>
</ul>
<p><a href="https://github.com/GoogleChrome/sw-precache#options-parameter" title="SW-Precache Options">__<code>sw-precache</code> options__</a>: Pass any option from <code>sw-precache</code> into your configuration. Some of these will be automatically be populated if you do not specify the value and a couple others will be modified to be more compatible with webpack. Options that are populated / modified:</p>
<ul>
<li><code>cacheId</code>: <code>[String]</code> - Not required but you should include this, it will give your service worker cache a unique name. Defaults to "sw-precache-webpack-plugin".</li>
<li><code>importScripts</code>: <code>[Array&lt;String|Object&gt;]</code><ul>
<li>When importScripts array item is a <code>String</code>:<ul>
<li>Converts to object format &lsquo;{ filename: &rsquo;&lt;publicPath&gt;/my-script.js'}<code></code></li>
</ul>
</li>
<li><code>When importScripts array item is an</code>Object<code>:<ul>
<li>Looks forchunkName<code>property.</code></li>
<li><code>Looks for</code>filename<code>property.</code></li>
<li><code>**If a</code>chunkName<code>is specified, it will override the accompanied value for</code>filename<code>.** *</code>replacePrefix<code>:</code>[String]<code>- Should only be used in conjunction with</code>stripPrefix<code> *</code>staticFileGlobs<code>:</code>[Array&lt;String&gt;]&lsquo; - Omit this to allow the plugin to cache all your bundles&rsquo; emitted assets. If <code>mergeStaticsConfig=true</code>: this value will be merged with your bundles' emitted assets, otherwise this value is just passed to <code>sw-precache</code> and emitted assets won't be included.</li>
</ul>
</code></li>
</ul>
</li>
<li><code><code>stripPrefix</code>: <code>[String]</code> - Same as &lsquo;stripPrefixMulti[stripPrefix] = &rsquo;'<code> *</code>stripPrefixMulti<code>:</code>[Object&lt;String,String&gt;]<code>- Omit this to use your webpack config's</code>output.path + '/': output.publicPath&lt;tt&gt;. If</code>mergeStaticsConfig=true<code>, this value will be merged with your webpack's</code>output.path: publicPath<code>for stripping prefixes. Otherwise this property will be passed directly to</code>sw-precache` and Webpack's output path won't be replaced.</li>
</ul>
<p><em>Note that all configuration options are optional. <code>SWPrecacheWebpackPlugin</code> will by default use all your assets emitted by webpack's compiler for the <code>staticFileGlobs</code> parameter and your webpack config's &lsquo;{[output.path + &rsquo;/']: output.publicPath}<code>as the</code>stripPrefixMulti<code>parameter. This behavior is probably what you want, all your webpack assets will be cached by your generated service worker. Just don't pass any arguments when you initialize this plugin, and let this plugin handle generating your</code>sw-precache` configuration.</em></p>
<h2>Examples</h2>
<p>See the <a href="/examples/">examples documentation</a> or the implementation in <a href="https://github.com/facebookincubator/create-react-app/blob/e91648a9bb55230fa15a7867fd5b730d7e1a5808/packages/react-scripts/config/webpack.config.prod.js#L308">create-react-app</a>.</p>
<h3>Simplest Example</h3>
<p>No arguments are required by default, <code>SWPrecacheWebpackPlugin</code> will use information provided by webpack to generate a service worker into your build directory that caches all your webpack assets. </p><div class="fragment"><div class="line">module.exports = {</div><div class="line">  ...</div><div class="line">  plugins: [</div><div class="line">    new SWPrecacheWebpackPlugin(),</div><div class="line">  ],</div><div class="line">  ...</div><div class="line">}</div></div><!-- fragment --><h3>Advanced Example</h3>
<p>Here's a more elaborate example with <code>mergeStaticsConfig: true</code> and <code>staticFileGlobsIgnorePatterns</code>. <code>mergeStaticsConfig: true</code> allows you to add some additional static file globs to the emitted ServiceWorker file alongside Webpack's emitted assets. <code>staticFileGlobsIgnorePatterns</code> can be used to avoid including sourcemap file references in the generated ServiceWorker. </p><div class="fragment"><div class="line">plugins: [</div><div class="line">  new SWPrecacheWebpackPlugin({</div><div class="line">    cacheId: &#39;my-project-name&#39;,</div><div class="line">    filename: &#39;my-project-service-worker.js&#39;,</div><div class="line">    staticFileGlobs: [</div><div class="line">      &#39;src/static/img/**.*&#39;,</div><div class="line">      &#39;src/static/styles.css&#39;,</div><div class="line">    ],</div><div class="line">    stripPrefix: &#39;src/static/&#39;, // stripPrefixMulti is also supported</div><div class="line">    mergeStaticsConfig: true, // if you don&#39;t set this to true, you won&#39;t see any webpack-emitted assets in your serviceworker config</div><div class="line">    staticFileGlobsIgnorePatterns: [/\.map$/], // use this to ignore sourcemap files</div><div class="line">  }),</div><div class="line">]</div></div><!-- fragment --><h3><code>importSripts</code> usage example</h3>
<p>Accepts an array of <code>&lt;String|Object&gt;</code>'s. <code>String</code> entries are legacy supported. Use <code>filename</code> instead.</p>
<p>If <code>importScripts</code> item is object, there are 2 possible properties to set on this object:</p><ul>
<li><b>filename</b>: Use this if you are referencing a path that "you just know" exists. You probably don't want to use this for named chunks.</li>
<li><b>chunkName</b>: Supports named entry chunks &amp; dynamically imported named chunks. <div class="fragment"><div class="line">entry: {</div><div class="line">  main: __dirname + &#39;/src/index.js&#39;,</div><div class="line">  sw: __dirname + &#39;/src/service-worker-entry.js&#39;</div><div class="line">},</div><div class="line">output: {</div><div class="line">  publicPath: &#39;/my/public/path&#39;,</div><div class="line">  chunkfileName: &#39;[name].[&lt;hash|chunkhash&gt;].js&#39;</div><div class="line">},</div><div class="line">plugins: [</div><div class="line">  new SWPrecacheWebpackPlugin({</div><div class="line">    filename: &#39;my-project-service-worker.js&#39;,</div><div class="line">    importSripts: [</div><div class="line">      // * legacy supported</div><div class="line">      // [chunkhash] is not supported for this usage</div><div class="line">      // This is transformed to new object syntax:</div><div class="line">      // { filename: &#39;/my/public/path/some-known-script-path.js&#39; }</div><div class="line">      &#39;some-known-script-path.js&#39;,</div><div class="line"></div><div class="line">      // This use case is identical to above, except</div><div class="line">      // for excluding the .[hash] part:</div><div class="line">      { filename: &#39;some-known-script-path.[hash].js&#39; },</div><div class="line"></div><div class="line">      // When [chunkhash] is specified in filename:</div><div class="line">      // - filename must match the format specified in output.chunkfileName</div><div class="line">      // - If chunkName is invalid; an error will be reported</div><div class="line">      { chunkName: &#39;sw&#39; },</div><div class="line"></div><div class="line">      // Works for named entry chunks &amp; dynamically imported named chunks:</div><div class="line">      // For ex, if in your code is:</div><div class="line">      // import(/* webpackChunkName: &quot;my-named-chunk&quot; */ &#39;./my-async-script.js&#39;);</div><div class="line">      { chunkName: &#39;my-named-chunk&#39; },</div><div class="line"></div><div class="line">      // All importSripts entries resolve to a string, therefore</div><div class="line">      // the final output of the above input is:</div><div class="line">      // [</div><div class="line">      //   &#39;/my/public/path/some-known-script-path.js&#39;,</div><div class="line">      //   &#39;/my/public/path/some-known-script-path.&lt;compilation hash&gt;.js&#39;,</div><div class="line">      //   &#39;/my/public/path/some-known-script-path.&lt;chunkhash&gt;.js&#39;,</div><div class="line">      //   &#39;/my/public/path/&lt;id&gt;.my-named-chunk.&lt;chunkhash&gt;.js&#39;</div><div class="line">      // ]</div><div class="line">    ]</div><div class="line">  }),</div><div class="line">]</div></div><!-- fragment --></li>
</ul>
<h2>Webpack Dev Server Support</h2>
<p>Currently <code>SWPrecacheWebpackPlugin</code> will not work with <code>Webpack Dev Server</code>. If you wish to test the service worker locally, you can use simple a node server <a href="/examples/">see example project</a> or <code>python SimpleHTTPServer</code> from your build directory. I would suggest pointing your node server to a different port than your usual local development port and keeping the precache service worker out of your <a href="https://github.com/goldhand/cookiecutter-webpack/blob/986151474b60dc19166eba18156a1f9dbceecb98/%7B%7Bcookiecutter.repo_name%7D%7D/webpack.local.config.js" title="Webpack local config example">local configuration (example)</a>.</p>
<p>There will likely never be <code>webpack-dev-server</code> support. <code>sw-precache</code> needs physical files in order to generate the service worker. Webpack-dev-server files are in-memory. It is only possible to provide <code>sw-precache</code> with globs to find these files. It will follow the glob pattern and generate a list of file names to cache.</p>
<h2>Contributing</h2>
<p>Install node dependencies: </p><div class="fragment"><div class="line">$ npm install</div></div><!-- fragment --><p>Or: </p><div class="fragment"><div class="line">$ yarn</div></div><!-- fragment --><p>Add unit tests for your new feature in <code>./test/plugin.spec.js</code></p>
<h2>Testing</h2>
<p>Tests are located in <code>./test</code></p>
<p>Run tests: </p><div class="fragment"><div class="line">$ npm t</div></div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
制作者 &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
