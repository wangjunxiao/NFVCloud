<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>demo: CircularJSON</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">demo
   &#160;<span id="projectnumber">0.0.1</span>
   </div>
   <div id="projectbrief">Vfunc Spring Boot项目概要</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'搜索');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','搜索');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">CircularJSON </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="http://travis-ci.org/WebReflection/circular-json"></a></p>
<p>Serializes and deserializes otherwise valid JSON objects containing circular references into and from a specialized JSON format.</p>
<h1>Example </h1>
<h3>A Working Solution To A Common Problem</h3>
<p>A usage example:</p>
<div class="fragment"><div class="line">var object = {};</div><div class="line">object.arr = [</div><div class="line">  object, object</div><div class="line">];</div><div class="line">object.arr.push(object.arr);</div><div class="line">object.obj = object;</div><div class="line"></div><div class="line">var serialized = CircularJSON.stringify(object);</div><div class="line">// &#39;{&quot;arr&quot;:[&quot;~&quot;,&quot;~&quot;,&quot;~arr&quot;],&quot;obj&quot;:&quot;~&quot;}&#39;</div><div class="line">// NOTE: CircularJSON DOES NOT parse JS</div><div class="line">// it handles receiver and reviver callbacks</div><div class="line"></div><div class="line">var unserialized = CircularJSON.parse(serialized);</div><div class="line">// { arr: [ [Circular], [Circular] ],</div><div class="line">// obj: [Circular] }</div><div class="line"></div><div class="line">unserialized.obj === unserialized;</div><div class="line">unserialized.arr[0] === unserialized;</div><div class="line">unserialized.arr.pop() === unserialized.arr;</div></div><!-- fragment --><p>A quick summary:</p>
<ul>
<li>uses <code>~</code> as a special prefix symbol to denote which parent the reference belongs to (i.e. <code>~root~child1~child2</code>)</li>
<li>reasonably fast in both serialization and deserialization</li>
<li>compact serialization for easier and slimmer transportation across environments</li>
<li><a href="test/circular-json.js">tested and covered</a> over nasty structures too</li>
<li>compatible with all JavaScript engines</li>
</ul>
<h1>Node Installation &amp; Usage </h1>
<div class="fragment"><div class="line">npm install --save circular-json</div></div><!-- fragment --><div class="fragment"><div class="line">&#39;use strict&#39;;</div><div class="line"></div><div class="line">var CircularJSON = require(&#39;circular-json&#39;)</div><div class="line">  , obj = { foo: &#39;bar&#39; }</div><div class="line">  , str</div><div class="line">  ;</div><div class="line"></div><div class="line">obj.self = obj;</div><div class="line">str = CircularJSON.stringify(obj);</div></div><!-- fragment --><p>There are no dependencies.</p>
<h1>Browser Installation &amp; Usage </h1>
<ul>
<li>Global: &lt;build/circular-json.js&gt;</li>
<li>AMD: &lt;build/circular-json.amd.js&gt;</li>
<li>CommonJS: &lt;build/circular-json.node.js&gt;</li>
</ul>
<p>(generated via <a href="https://github.com/WebReflection/gitstrap">gitstrap</a>)</p>
<div class="fragment"><div class="line">&lt;script src=&quot;build/circular-json.js&quot;&gt;&lt;/script&gt;</div></div><!-- fragment --><div class="fragment"><div class="line">&#39;use strict&#39;;</div><div class="line"></div><div class="line">var CircularJSON = window.CircularJSON</div><div class="line">  , obj = { foo: &#39;bar&#39; }</div><div class="line">  , str</div><div class="line">  ;</div><div class="line"></div><div class="line">obj.self = obj;</div><div class="line">str = CircularJSON.stringify(obj);</div></div><!-- fragment --><p>NOTE: Platforms without native JSON (i.e. MSIE &lt;= 8) requires <code>json3.js</code> or similar.</p>
<p>It is also <em>a bad idea</em> to <code>CircularJSON.parse(JSON.stringify(object))</code> because of those manipulation used in <code>CircularJSON.stringify()</code> able to make parsing safe and secure.</p>
<p>As summary: <code>CircularJSON.parse(CircularJSON.stringify(object))</code> is the way to go, same is for <code>JSON.parse(JSON.stringify(object))</code>.</p>
<h1>API </h1>
<p>It's the same as native JSON, except the fourth parameter <code>placeholder</code>, which circular references to be replaced with <code>"[Circular]"</code> (i.e. for logging).</p>
<ul>
<li>CircularJSON.stringify(object, replacer, spacer, placeholder)</li>
<li>CircularJSON.parse(string, reviver)</li>
</ul>
<p>Bear in mind <code>JSON.parse(CircularJSON.stringify(object))</code> will work but not produce the expected output.</p>
<h1>Similar Libraries </h1>
<h3>Why Not the <a href="https://twitter.com/izs"></a> One</h3>
<p>The module <a href="https://github.com/isaacs/json-stringify-safe">json-stringify-safe</a> seems to be for <code>console.log()</code> but it's completely pointless for <code>JSON.parse()</code>, being latter one unable to retrieve back the initial structure. Here an example:</p>
<div class="fragment"><div class="line">// a logged object with circular references</div><div class="line">{</div><div class="line">  &quot;circularRef&quot;: &quot;[Circular]&quot;,</div><div class="line">  &quot;list&quot;: [</div><div class="line">    &quot;[Circular]&quot;,</div><div class="line">    &quot;[Circular]&quot;</div><div class="line">  ]</div><div class="line">}</div><div class="line">// what do we do with above output ?</div></div><!-- fragment --><p>Just type this in your <code>node</code> console: <code>var o = {}; o.a = o; console.log(o);</code>. The output will be <code>{ a: [Circular] }</code> ... good, but that ain't really solving the problem.</p>
<p>However, if that's all you need, the function used to create that kind of output is probably faster than <code>CircularJSON</code> and surely fits in less lines of code.</p>
<h3>Why Not {{put random name}} Solution</h3>
<p>So here the thing: circular references can be wrong but, if there is a need for them, any attempt to ignore them or remove them can be considered just a failure.</p>
<p>Not because the method is bad or it's not working, simply because the circular info, the one we needed and used in the first place, is lost!</p>
<p>In this case, <code>CircularJSON</code> does even more than just solve circular and recursions: it maps all same objects so that less memory is used as well on deserialization as less bandwidth too! It's able to redefine those references back later on so the way we store is the way we retrieve and in a reasonably performant way, also trusting the snappy and native <code>JSON</code> methods to iterate. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
制作者 &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
