<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>demo: SPDY Server for node.js</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">demo
   &#160;<span id="projectnumber">0.0.1</span>
   </div>
   <div id="projectbrief">Vfunc Spring Boot项目概要</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'搜索');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','搜索');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">SPDY Server for node.js </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="http://travis-ci.org/spdy-http2/node-spdy"></a> <a href="http://badge.fury.io/js/spdy"></a> <a href="https://david-dm.org/spdy-http2/node-spdy"></a> <a href="http://standardjs.com/"></a> <a href="https://waffle.io/spdy-http2/node-spdy"></a></p>
<p>With this module you can create <a href="https://http2.github.io/">HTTP2</a> / <a href="http://www.chromium.org/spdy">SPDY</a> servers in node.js with natural http module interface and fallback to regular https (for browsers that don't support neither HTTP2, nor SPDY yet).</p>
<p>This module named <code>spdy</code> but it <a href="https://github.com/indutny/node-spdy/issues/269#issuecomment-239014184">provides</a> support for both http/2 (h2) and spdy (2,3,3.1). Also, <code>spdy</code> is compatible with Express.</p>
<h2>Usage</h2>
<h3>Examples</h3>
<p>Server: </p><div class="fragment"><div class="line">var spdy = require(&#39;spdy&#39;),</div><div class="line">    fs = require(&#39;fs&#39;);</div><div class="line"></div><div class="line">var options = {</div><div class="line">  // Private key</div><div class="line">  key: fs.readFileSync(__dirname + &#39;/keys/spdy-key.pem&#39;),</div><div class="line"></div><div class="line">  // Fullchain file or cert file (prefer the former)</div><div class="line">  cert: fs.readFileSync(__dirname + &#39;/keys/spdy-fullchain.pem&#39;),</div><div class="line"></div><div class="line">  // **optional** SPDY-specific options</div><div class="line">  spdy: {</div><div class="line">    protocols: [ &#39;h2&#39;, &#39;spdy/3.1&#39;, ..., &#39;http/1.1&#39; ],</div><div class="line">    plain: false,</div><div class="line"></div><div class="line">    // **optional**</div><div class="line">    // Parse first incoming X_FORWARDED_FOR frame and put it to the</div><div class="line">    // headers of every request.</div><div class="line">    // NOTE: Use with care! This should not be used without some proxy that</div><div class="line">    // will *always* send X_FORWARDED_FOR</div><div class="line">    &#39;x-forwarded-for&#39;: true,</div><div class="line"></div><div class="line">    connection: {</div><div class="line">      windowSize: 1024 * 1024, // Server&#39;s window size</div><div class="line"></div><div class="line">      // **optional** if true - server will send 3.1 frames on 3.0 *plain* spdy</div><div class="line">      autoSpdy31: false</div><div class="line">    }</div><div class="line">  }</div><div class="line">};</div><div class="line"></div><div class="line">var server = spdy.createServer(options, function(req, res) {</div><div class="line">  res.writeHead(200);</div><div class="line">  res.end(&#39;hello world!&#39;);</div><div class="line">});</div><div class="line"></div><div class="line">server.listen(3000);</div></div><!-- fragment --><p>Client: </p><div class="fragment"><div class="line">var spdy = require(&#39;spdy&#39;);</div><div class="line">var https = require(&#39;https&#39;);</div><div class="line"></div><div class="line">var agent = spdy.createAgent({</div><div class="line">  host: &#39;www.google.com&#39;,</div><div class="line">  port: 443,</div><div class="line"></div><div class="line">  // Optional SPDY options</div><div class="line">  spdy: {</div><div class="line">    plain: false,</div><div class="line">    ssl: true,</div><div class="line"></div><div class="line">    // **optional** send X_FORWARDED_FOR</div><div class="line">    &#39;x-forwarded-for&#39;: &#39;127.0.0.1&#39;</div><div class="line">  }</div><div class="line">});</div><div class="line"></div><div class="line">https.get({</div><div class="line">  host: &#39;www.google.com&#39;,</div><div class="line">  agent: agent</div><div class="line">}, function(response) {</div><div class="line">  console.log(&#39;yikes&#39;);</div><div class="line">  // Here it goes like with any other node.js HTTP request</div><div class="line">  // ...</div><div class="line">  // And once we&#39;re done - we may close TCP connection to server</div><div class="line">  // NOTE: All non-closed requests will die!</div><div class="line">  agent.close();</div><div class="line">}).end();</div></div><!-- fragment --><p>Please note that if you use a custom agent, by default all connection-level errors will result in an uncaught exception. To handle these errors subscribe to the <code>error</code> event and re-emit the captured error:</p>
<div class="fragment"><div class="line">var agent = spdy.createAgent({</div><div class="line">  host: &#39;www.google.com&#39;,</div><div class="line">  port: 443</div><div class="line">}).once(&#39;error&#39;, function (err) {</div><div class="line">  this.emit(err);</div><div class="line">});</div></div><!-- fragment --><h4>Push streams</h4>
<p>It is possible to initiate <a href="https://httpwg.github.io/specs/rfc7540.html#PUSH_PROMISE">PUSH_PROMISE</a> to send content to clients <em>before</em> the client requests it.</p>
<div class="fragment"><div class="line">spdy.createServer(options, function(req, res) {</div><div class="line">  var stream = res.push(&#39;/main.js&#39;, {</div><div class="line">    status: 200, // optional</div><div class="line">    method: &#39;GET&#39;, // optional</div><div class="line">    request: {</div><div class="line">      accept: &#39;*/*&#39;</div><div class="line">    },</div><div class="line">    response: {</div><div class="line">      &#39;content-type&#39;: &#39;application/javascript&#39;</div><div class="line">    }</div><div class="line">  });</div><div class="line">  stream.on(&#39;error&#39;, function() {</div><div class="line">  });</div><div class="line">  stream.end(&#39;alert(&quot;hello from push stream!&quot;);&#39;);</div><div class="line"></div><div class="line">  res.end(&#39;&lt;script src=&quot;/main.js&quot;&gt;&lt;/script&gt;&#39;);</div><div class="line">}).listen(3000);</div></div><!-- fragment --><p><a href="https://httpwg.github.io/specs/rfc7540.html#PUSH_PROMISE">PUSH_PROMISE</a> may be sent using the <code>push()</code> method on the current response object. The signature of the <code>push()</code> method is:</p>
<p>&lsquo;.push(&rsquo;/some/relative/url', { request: {...}, response: {...} }, callback)`</p>
<p>Second argument contains headers for both PUSH_PROMISE and emulated response. <code>callback</code> will receive two arguments: <code>err</code> (if any error is happened) and a <a href="https://iojs.org/api/stream.html#stream_class_stream_duplex">Duplex</a> stream as the second argument.</p>
<p>Client usage: </p><div class="fragment"><div class="line">var agent = spdy.createAgent({ /* ... */ });</div><div class="line">var req = http.get({</div><div class="line">  host: &#39;www.google.com&#39;,</div><div class="line">  agent: agent</div><div class="line">}, function(response) {</div><div class="line">});</div><div class="line">req.on(&#39;push&#39;, function(stream) {</div><div class="line">  stream.on(&#39;error&#39;, function(err) {</div><div class="line">    // Handle error</div><div class="line">  });</div><div class="line">  // Read data from stream</div><div class="line">});</div></div><!-- fragment --><p>NOTE: You're responsible for the <code>stream</code> object once given it in <code>.push()</code> callback or <code>push</code> event. Hence ignoring <code>error</code> event on it will result in uncaught exception and crash your program.</p>
<h4>Trailing headers</h4>
<p>Server usage: </p><div class="fragment"><div class="line">function (req, res) {</div><div class="line">  // Send trailing headers to client</div><div class="line">  res.addTrailers({ header1: &#39;value1&#39;, header2: &#39;value2&#39; });</div><div class="line"></div><div class="line">  // On client&#39;s trailing headers</div><div class="line">  req.on(&#39;trailers&#39;, function(headers) {</div><div class="line">    // ...</div><div class="line">  });</div><div class="line">}</div></div><!-- fragment --><p>Client usage: </p><div class="fragment"><div class="line">var req = http.request({ agent: spdyAgent, /* ... */ }).function (res) {</div><div class="line">  // On server&#39;s trailing headers</div><div class="line">  res.on(&#39;trailers&#39;, function(headers) {</div><div class="line">    // ...</div><div class="line">  });</div><div class="line">});</div><div class="line">req.write(&#39;stuff&#39;);</div><div class="line">req.addTrailers({ /* ... */ });</div><div class="line">req.end();</div></div><!-- fragment --><h4>Options</h4>
<p>All options supported by <a href="http://nodejs.org/docs/latest/api/tls.html#tls.createServer">tls</a> work with node-spdy.</p>
<p>Additional options may be passed via <code>spdy</code> sub-object:</p>
<ul>
<li><code>plain</code> - if defined, server will ignore NPN and ALPN data and choose whether to use spdy or plain http by looking at first data packet.</li>
<li><code>ssl</code> - if <code>false</code> and <code>options.plain</code> is <code>true</code>, <code>http.Server</code> will be used as a <code>base</code> class for created server.</li>
<li><code>maxChunk</code> - if set and non-falsy, limits number of bytes sent in one DATA chunk. Setting it to non-zero value is recommended if you care about interleaving of outgoing data from multiple different streams. (defaults to 8192)</li>
<li><code>protocols</code> - list of NPN/ALPN protocols to use (default is: &lsquo;['h2&rsquo;,'spdy/3.1', 'spdy/3', 'spdy/2','http/1.1', 'http/1.0']<code>) *</code>protocol<code>- use specific protocol if no NPN/ALPN ex In addition, *</code>maxStreams` - set "[maximum concurrent streams][3]" protocol option</li>
</ul>
<h3>API</h3>
<p>API is compatible with <code>http</code> and <code>https</code> module, but you can use another function as base class for SPDYServer.</p>
<div class="fragment"><div class="line">spdy.createServer(</div><div class="line">  [base class constructor, i.e. https.Server],</div><div class="line">  { /* keys and options */ }, // &lt;- the only one required argument</div><div class="line">  [request listener]</div><div class="line">).listen([port], [host], [callback]);</div></div><!-- fragment --><p>Request listener will receive two arguments: <code>request</code> and <code>response</code>. They're both instances of <code>http</code>'s <code>IncomingMessage</code> and <code>OutgoingMessage</code>. But three custom properties are added to both of them: <code>isSpdy</code>, <code>spdyVersion</code>. <code>isSpdy</code> is <code>true</code> when the request was processed using HTTP2/SPDY protocols, it is <code>false</code> in case of HTTP/1.1 fallback. <code>spdyVersion</code> is either of: <code>2</code>, <code>3</code>, <code>3.1</code>, or <code>4</code> (for HTTP2).</p>
<h4>Contributors</h4>
<ul>
<li><a href="https://github.com/indutny">Fedor Indutny</a></li>
<li><a href="https://github.com/eee-c">Chris Strom</a></li>
<li><a href="https://github.com/francois2metz">François de Metz</a></li>
<li><a href="https://github.com/igrigorik">Ilya Grigorik</a></li>
<li><a href="https://github.com/grmocg">Roberto Peon</a></li>
<li><a href="https://github.com/tatsuhiro-t">Tatsuhiro Tsujikawa</a></li>
<li><a href="https://github.com/jessecravens">Jesse Cravens</a></li>
</ul>
<h4>LICENSE</h4>
<p>This software is licensed under the MIT License.</p>
<p>Copyright Fedor Indutny, 2015.</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
制作者 &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
